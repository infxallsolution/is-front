/*! For license information please see 650.be76d58b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[650],{30914:function(t,i,e){var n=e(89752);i.Z=n.Z},79426:function(t,i,e){var n=(0,e(72791).createContext)({});i.Z=n},89752:function(t,i,e){var n=e(4942),s=e(29439),h=e(81694),r=e.n(h),a=e(72791),u=e(71929),l=e(79426),o=e(18554),c=function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e};var f=["xs","sm","md","lg","xl","xxl"],v=a.forwardRef((function(t,i){var e,h=a.useContext(u.E_),v=h.getPrefixCls,d=h.direction,y=a.useContext(l.Z),m=y.gutter,p=y.wrap,k=y.supportFlexGap,b=t.prefixCls,g=t.span,w=t.order,_=t.offset,S=t.push,M=t.pull,z=t.className,x=t.children,Z=t.flex,C=t.style,O=c(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),E=v("col",b),T=(0,o.c)(E),N=(0,s.Z)(T,2),R=N[0],B=N[1],L={};f.forEach((function(i){var e,s={},h=t[i];"number"===typeof h?s.span=h:"object"===typeof h&&(s=h||{}),delete O[i],L=Object.assign(Object.assign({},L),(e={},(0,n.Z)(e,"".concat(E,"-").concat(i,"-").concat(s.span),void 0!==s.span),(0,n.Z)(e,"".concat(E,"-").concat(i,"-order-").concat(s.order),s.order||0===s.order),(0,n.Z)(e,"".concat(E,"-").concat(i,"-offset-").concat(s.offset),s.offset||0===s.offset),(0,n.Z)(e,"".concat(E,"-").concat(i,"-push-").concat(s.push),s.push||0===s.push),(0,n.Z)(e,"".concat(E,"-").concat(i,"-pull-").concat(s.pull),s.pull||0===s.pull),(0,n.Z)(e,"".concat(E,"-rtl"),"rtl"===d),e))}));var P=r()(E,(e={},(0,n.Z)(e,"".concat(E,"-").concat(g),void 0!==g),(0,n.Z)(e,"".concat(E,"-order-").concat(w),w),(0,n.Z)(e,"".concat(E,"-offset-").concat(_),_),(0,n.Z)(e,"".concat(E,"-push-").concat(S),S),(0,n.Z)(e,"".concat(E,"-pull-").concat(M),M),e),z,L,B),I={};if(m&&m[0]>0){var W=m[0]/2;I.paddingLeft=W,I.paddingRight=W}if(m&&m[1]>0&&!k){var V=m[1]/2;I.paddingTop=V,I.paddingBottom=V}return Z&&(I.flex=function(t){return"number"===typeof t?"".concat(t," ").concat(t," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?"0 0 ".concat(t):t}(Z),!1!==p||I.minWidth||(I.minWidth=0)),R(a.createElement("div",Object.assign({},O,{style:Object.assign(Object.assign({},I),C),className:P,ref:i}),x))}));i.Z=v},37545:function(t,i,e){var n=e(4942),s=e(29439),h=e(81694),r=e.n(h),a=e(72791),u=e(71929),l=e(98883),o=e(70635),c=e(79426),f=e(18554),v=function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e};function d(t,i){var e=a.useState("string"===typeof t?t:""),n=(0,s.Z)(e,2),h=n[0],r=n[1];return a.useEffect((function(){!function(){if("string"===typeof t&&r(t),"object"===typeof t)for(var e=0;e<o.c.length;e++){var n=o.c[e];if(i[n]){var s=t[n];if(void 0!==s)return void r(s)}}}()}),[JSON.stringify(t),i]),h}var y=a.forwardRef((function(t,i){var e,h=t.prefixCls,y=t.justify,m=t.align,p=t.className,k=t.style,b=t.children,g=t.gutter,w=void 0===g?0:g,_=t.wrap,S=v(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),M=a.useContext(u.E_),z=M.getPrefixCls,x=M.direction,Z=a.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),C=(0,s.Z)(Z,2),O=C[0],E=C[1],T=a.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),N=(0,s.Z)(T,2),R=N[0],B=N[1],L=d(m,R),P=d(y,R),I=(0,l.Z)(),W=a.useRef(w),V=(0,o.Z)();a.useEffect((function(){var t=V.subscribe((function(t){B(t);var i=W.current||0;(!Array.isArray(i)&&"object"===typeof i||Array.isArray(i)&&("object"===typeof i[0]||"object"===typeof i[1]))&&E(t)}));return function(){return V.unsubscribe(t)}}),[]);var D=z("row",h),A=(0,f.V)(D),j=(0,s.Z)(A,2),F=j[0],H=j[1],$=function(){var t=[void 0,void 0];return(Array.isArray(w)?w:[w,void 0]).forEach((function(i,e){if("object"===typeof i)for(var n=0;n<o.c.length;n++){var s=o.c[n];if(O[s]&&void 0!==i[s]){t[e]=i[s];break}}else t[e]=i})),t}(),U=r()(D,(e={},(0,n.Z)(e,"".concat(D,"-no-wrap"),!1===_),(0,n.Z)(e,"".concat(D,"-").concat(P),P),(0,n.Z)(e,"".concat(D,"-").concat(L),L),(0,n.Z)(e,"".concat(D,"-rtl"),"rtl"===x),e),p,H),Y={},Q=null!=$[0]&&$[0]>0?$[0]/-2:void 0,X=null!=$[1]&&$[1]>0?$[1]/-2:void 0;if(Q&&(Y.marginLeft=Q,Y.marginRight=Q),I){var q=(0,s.Z)($,2);Y.rowGap=q[1]}else X&&(Y.marginTop=X,Y.marginBottom=X);var G=(0,s.Z)($,2),J=G[0],K=G[1],tt=a.useMemo((function(){return{gutter:[J,K],wrap:_,supportFlexGap:I}}),[J,K,_,I]);return F(a.createElement(c.Z.Provider,{value:tt},a.createElement("div",Object.assign({},S,{className:U,style:Object.assign(Object.assign({},Y),k),ref:i}),b)))}));i.Z=y},18554:function(t,i,e){e.d(i,{V:function(){return l},c:function(){return o}});var n=e(4942),s=e(55564),h=e(89922),r=function(t){var i=t.componentCls;return(0,n.Z)({},i,{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around ":{justifyContent:"space-around"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}})},a=function(t){var i=t.componentCls;return(0,n.Z)({},i,{position:"relative",maxWidth:"100%",minHeight:1})},u=function(t,i){return function(t,i){for(var e=t.componentCls,n=t.gridColumns,s={},h=n;h>=0;h--)0===h?(s["".concat(e).concat(i,"-").concat(h)]={display:"none"},s["".concat(e,"-push-").concat(h)]={insetInlineStart:"auto"},s["".concat(e,"-pull-").concat(h)]={insetInlineEnd:"auto"},s["".concat(e).concat(i,"-push-").concat(h)]={insetInlineStart:"auto"},s["".concat(e).concat(i,"-pull-").concat(h)]={insetInlineEnd:"auto"},s["".concat(e).concat(i,"-offset-").concat(h)]={marginInlineEnd:0},s["".concat(e).concat(i,"-order-").concat(h)]={order:0}):(s["".concat(e).concat(i,"-").concat(h)]={display:"block",flex:"0 0 ".concat(h/n*100,"%"),maxWidth:"".concat(h/n*100,"%")},s["".concat(e).concat(i,"-push-").concat(h)]={insetInlineStart:"".concat(h/n*100,"%")},s["".concat(e).concat(i,"-pull-").concat(h)]={insetInlineEnd:"".concat(h/n*100,"%")},s["".concat(e).concat(i,"-offset-").concat(h)]={marginInlineStart:"".concat(h/n*100,"%")},s["".concat(e).concat(i,"-order-").concat(h)]={order:h});return s}(t,i)},l=(0,s.Z)("Grid",(function(t){return[r(t)]})),o=(0,s.Z)("Grid",(function(t){var i=(0,h.TS)(t,{gridColumns:24}),e={"-sm":i.screenSMMin,"-md":i.screenMDMin,"-lg":i.screenLGMin,"-xl":i.screenXLMin,"-xxl":i.screenXXLMin};return[a(i),u(i,""),u(i,"-xs"),Object.keys(e).map((function(t){return function(t,i,e){return(0,n.Z)({},"@media (min-width: ".concat(i,"px)"),Object.assign({},u(t,e)))}(i,e[t],t)})).reduce((function(t,i){return Object.assign(Object.assign({},t),i)}),{})]}))},66106:function(t,i,e){var n=e(37545);i.Z=n.Z},30063:function(t,i,e){e.d(i,{Mr:function(){return je},C2:function(){return Is}});var n=e(29439),s=e(11752),h=e(61120),r=e(37762),a=e(97326),u=e(60136),l=e(29388),o=e(93433),c=e(15671),f=e(43144);function v(t){var i=t.width,e=t.height;if(i<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:i,height:e}}function d(t,i){return t.width===i.width&&t.height===i.height}var y=function(){function t(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var i=this,e={next:t};return this._observers.push(e),{unsubscribe:function(){i._observers=i._observers.filter((function(t){return t!==e}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(i){return i.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}();var m=function(){function t(t,i,e){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=v({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!==i&&void 0!==i?i:function(t){return t},this._allowResizeObserver=null===(n=null===e||void 0===e?void 0:e.allowResizeObserver)||void 0===n||n,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,i;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(i=this._devicePixelRatioObservable)||void 0===i||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return v({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=v(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(i){return i!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(i){return i!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var i=this.bitmapSize;d(i,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},t.prototype._emitBitmapSizeChanged=function(t,i){var e=this;this._bitmapSizeChangedListeners.forEach((function(n){return n.call(e,t,i)}))},t.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,e=v(this._transformBitmapSize(t,this._canvasElementClientSize)),n=d(this.bitmapSize,e)?null:e;null===i&&null===n||null!==i&&null!==n&&d(i,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(i,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var e=this;this._suggestedBitmapSizeChangedListeners.forEach((function(n){return n.call(e,t,i)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var i=new ResizeObserver((function(e){t(e.every((function(t){return"devicePixelContentBoxSize"in t}))),i.disconnect()}));i.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var i=p(this._canvasElement);if(null===i)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new y(t)}(i),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,i;if(null!==this._canvasElement){var e=p(this._canvasElement);if(null!==e){var n=null!==(i=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==i?i:e.devicePixelRatio,s=this._canvasElement.getClientRects(),h=void 0!==s[0]?function(t,i){return v({width:Math.round(t.left*i+t.width*i)-Math.round(t.left*i),height:Math.round(t.top*i+t.height*i)-Math.round(t.top*i)})}(s[0],n):v({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(h)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(i){var e=i.find((function(i){return i.target===t._canvasElement}));if(e&&e.devicePixelContentBoxSize&&e.devicePixelContentBoxSize[0]){var n=e.devicePixelContentBoxSize[0],s=v({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(s)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function p(t){return t.ownerDocument.defaultView}var k=function(){function t(t,i,e){if(0===i.width||0===i.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,0===e.width||0===e.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=e,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function b(t,i){var e=t.canvasElementClientSize;if(0===e.width||0===e.height)return null;var n=t.bitmapSize;if(0===n.width||0===n.height)return null;var s=t.canvasElement.getContext("2d",i);return null===s?null:new k(s,e,n)}var g,w,_,S={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},M={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},z={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},x={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Z={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},C={color:"#26a69a",base:0},O={color:"#2196f3"},E={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function T(t,i){var e={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(e)}function N(t,i,e,n){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(e,i+s),t.lineTo(n,i+s),t.stroke()}function R(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function B(t){if(void 0===t)throw new Error("Value is undefined");return t}function L(t){if(null===t)throw new Error("Value is null");return t}function P(t){return L(B(t))}(_=g||(g={}))[_.Simple=0]="Simple",_[_.WithSteps=1]="WithSteps",_[_.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(w||(w={}));var I={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function W(t){return t<0?0:t>255?255:Math.round(t)||0}function V(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var D=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,A=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,j=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,F=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function H(t){(t=t.toLowerCase())in I&&(t=I[t]);var i=F.exec(t)||j.exec(t);if(i)return[W(parseInt(i[1],10)),W(parseInt(i[2],10)),W(parseInt(i[3],10)),V(i.length<5?1:parseFloat(i[4]))];var e=A.exec(t);if(e)return[W(parseInt(e[1],16)),W(parseInt(e[2],16)),W(parseInt(e[3],16)),1];var n=D.exec(t);if(n)return[W(17*parseInt(n[1],16)),W(17*parseInt(n[2],16)),W(17*parseInt(n[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function $(t){var i,e=H(t);return{t:"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var U=function(){function t(){(0,c.Z)(this,t),this.h=[]}return(0,f.Z)(t,[{key:"l",value:function(t,i,e){var n={o:t,_:i,u:!0===e};this.h.push(n)}},{key:"v",value:function(t){var i=this.h.findIndex((function(i){return t===i.o}));i>-1&&this.h.splice(i,1)}},{key:"p",value:function(t){this.h=this.h.filter((function(i){return i._!==t}))}},{key:"m",value:function(t,i,e){var n=(0,o.Z)(this.h);this.h=this.h.filter((function(t){return!t.u})),n.forEach((function(n){return n.o(t,i,e)}))}},{key:"M",value:function(){return this.h.length>0}},{key:"S",value:function(){this.h=[]}}]),t}();function Y(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];for(var s=0,h=e;s<h.length;s++){var r=h[s];for(var a in r)void 0!==r[a]&&("object"!=typeof r[a]||void 0===t[a]||Array.isArray(r[a])?t[a]=r[a]:Y(t[a],r[a]))}return t}function Q(t){return"number"==typeof t&&isFinite(t)}function X(t){return"number"==typeof t&&t%1==0}function q(t){return"string"==typeof t}function G(t){return"boolean"==typeof t}function J(t){var i,e,n,s=t;if(!s||"object"!=typeof s)return s;for(e in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(e)&&(n=s[e],i[e]=n&&"object"==typeof n?J(n):n);return i}function K(t){return null!==t}function tt(t){return null===t?void 0:t}var it="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function et(t,i,e){return void 0===i&&(i=it),"".concat(e=void 0!==e?"".concat(e," "):"").concat(t,"px ").concat(i)}var nt=function(){function t(i){(0,c.Z)(this,t),this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=i}return(0,f.Z)(t,[{key:"W",value:function(){var t=this.k,i=this.j(),e=this.H();return t.P===i&&t.D===e||(t.P=i,t.D=e,t.R=et(i,e),t.L=2.5/12*i,t.V=t.L,t.B=i/12*t.T,t.I=i/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}},{key:"$",value:function(){return this.F.W().layout.textColor}},{key:"U",value:function(){return this.F.q()}},{key:"j",value:function(){return this.F.W().layout.fontSize}},{key:"H",value:function(){return this.F.W().layout.fontFamily}}]),t}(),st=function(){function t(){(0,c.Z)(this,t),this.Y=[]}return(0,f.Z)(t,[{key:"X",value:function(t){this.Y=t}},{key:"K",value:function(t,i,e){this.Y.forEach((function(n){n.K(t,i,e)}))}}]),t}(),ht=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"K",value:function(t,i,e){var n=this;t.useBitmapCoordinateSpace((function(t){return n.Z(t,i,e)}))}}]),t}(),rt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).G=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.G=t}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio;if(null!==this.G&&null!==this.G.tt){var s=this.G.tt,h=this.G,r=Math.max(1,Math.floor(e))%2/2,a=function(t){i.beginPath();for(var a=s.to-1;a>=s.from;--a){var u=h.it[a],l=Math.round(u.nt*e)+r,o=u.st*n,c=t*n+r;i.moveTo(l,o),i.arc(l,o,c,0,2*Math.PI)}i.fill()};h.et>0&&(i.fillStyle=h.rt,a(h.ht+h.et)),i.fillStyle=h.lt,a(h.ht)}}}]),e}(ht);function at(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}var ut={from:0,to:1},lt=function(){function t(i,e){(0,c.Z)(this,t),this.ut=new st,this.ct=[],this.dt=[],this.ft=!0,this.F=i,this.vt=e,this.ut.X(this.ct)}return(0,f.Z)(t,[{key:"bt",value:function(t){var i=this.F.wt();i.length!==this.ct.length&&(this.dt=i.map(at),this.ct=this.dt.map((function(t){var i=new rt;return i.J(t),i})),this.ut.X(this.ct)),this.ft=!0}},{key:"gt",value:function(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}},{key:"Mt",value:function(){var t=this,i=2===this.vt.W().mode,e=this.F.wt(),n=this.vt.xt(),s=this.F.St();e.forEach((function(e,h){var r,a=t.dt[h],u=e.kt(n);if(!i&&null!==u&&e.yt()){var l=L(e.Ct());a.lt=u.Tt,a.ht=u.ht,a.et=u.Pt,a.it[0]._t=u._t,a.it[0].st=e.Dt().Rt(u._t,l.Ot),a.rt=null!==(r=u.At)&&void 0!==r?r:t.F.Vt(a.it[0].st/e.Dt().Bt()),a.it[0].ot=n,a.it[0].nt=s.It(n),a.tt=ut}else a.tt=null}))}}]),t}(),ot=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).zt=t,n}return(0,f.Z)(e,[{key:"Z",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(null!==this.zt){var h=this.zt.Lt.yt,r=this.zt.Et.yt;if(h||r){var a=Math.round(this.zt.nt*n),u=Math.round(this.zt.st*s);i.lineCap="butt",h&&a>=0&&(i.lineWidth=Math.floor(this.zt.Lt.et*n),i.strokeStyle=this.zt.Lt.O,i.fillStyle=this.zt.Lt.O,T(i,this.zt.Lt.Nt),function(t,i,e,n){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,0),t.lineTo(i+s,n),t.stroke()}(i,a,0,e.height)),r&&u>=0&&(i.lineWidth=Math.floor(this.zt.Et.et*s),i.strokeStyle=this.zt.Et.O,i.fillStyle=this.zt.Et.O,T(i,this.zt.Et.Nt),N(i,u,0,e.width))}}}}]),e}(ht),ct=function(){function t(i){(0,c.Z)(this,t),this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new ot(this.Ft),this.jt=i}return(0,f.Z)(t,[{key:"bt",value:function(){this.ft=!0}},{key:"gt",value:function(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}},{key:"Mt",value:function(){var t=this.jt.yt(),i=L(this.jt.Ht()),e=i.$t().W().crosshair,n=this.Ft;if(2===e.mode)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=t&&this.jt.Ut(i),n.Lt.yt=t&&this.jt.qt(),n.Et.et=e.horzLine.width,n.Et.Nt=e.horzLine.style,n.Et.O=e.horzLine.color,n.Lt.et=e.vertLine.width,n.Lt.Nt=e.vertLine.style,n.Lt.O=e.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Xt()}}]),t}();function ft(t,i,e,n,s,h){t.fillRect(i+h,e,n-2*h,h),t.fillRect(i+h,e+s-h,n-2*h,h),t.fillRect(i,e,h,s),t.fillRect(i+n-h,e,h,s)}function vt(t,i,e,n,s,h){t.save(),t.globalCompositeOperation="copy",t.fillStyle=h,t.fillRect(i,e,n,s),t.restore()}function dt(t,i){return t.map((function(t){return 0===t?t:t+i}))}function yt(t,i,e,n,s,h){t.beginPath(),t.lineTo(i+n-h[1],e),0!==h[1]&&t.arcTo(i+n,e,i+n,e+h[1],h[1]),t.lineTo(i+n,e+s-h[2]),0!==h[2]&&t.arcTo(i+n,e+s,i+n-h[2],e+s,h[2]),t.lineTo(i+h[3],e+s),0!==h[3]&&t.arcTo(i,e+s,i,e+s-h[3],h[3]),t.lineTo(i,e+h[0]),0!==h[0]&&t.arcTo(i,e,i+h[0],e,h[0])}function mt(t,i,e,n,s,h){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,0,0,0],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";if(t.save(),!r||!u||u===h)return yt(t,i,e,n,s,a),t.fillStyle=h,t.fill(),void t.restore();var l=r/2;"transparent"!==h&&(yt(t,i+r,e+r,n-2*r,s-2*r,dt(a,-r)),t.fillStyle=h,t.fill()),"transparent"!==u&&(yt(t,i+l,e+l,n-r,s-r,dt(a,-l)),t.lineWidth=r,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function pt(t,i,e,n,s,h,r){t.save(),t.globalCompositeOperation="copy";var a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,h),a.addColorStop(1,r),t.fillStyle=a,t.fillRect(i,e,n,s),t.restore()}var kt,bt=function(){function t(i,e){(0,c.Z)(this,t),this.J(i,e)}return(0,f.Z)(t,[{key:"J",value:function(t,i){this.zt=t,this.Kt=i}},{key:"Bt",value:function(t,i){return this.zt.yt?t.P+t.L+t.V:0}},{key:"K",value:function(t,i,e,n){var s=this;if(this.zt.yt&&0!==this.zt.Zt.length){var h=this.zt.O,r=this.Kt.t,a=t.useBitmapCoordinateSpace((function(t){var a=t.context;a.font=i.R;var u=s.Gt(t,i,e,n),l=u.Jt,o=function(t,i){u.Qt?mt(a,l.ti,l.ii,l.ni,l.si,t,l.ei,[l.ht,0,0,l.ht],i):mt(a,l.ri,l.ii,l.ni,l.si,t,l.ei,[0,l.ht,l.ht,0],i)};return o(r,"transparent"),s.zt.hi&&(a.fillStyle=h,a.fillRect(l.ri,l.li,l.ai-l.ri,l.oi)),o("transparent",r),s.zt._i&&(a.fillStyle=i.A,a.fillRect(u.Qt?l.ui-l.ei:0,l.ii,l.ei,l.ci-l.ii)),u}));t.useMediaCoordinateSpace((function(t){var e=t.context,n=a.di;e.font=i.R,e.textAlign=a.Qt?"right":"left",e.textBaseline="middle",e.fillStyle=h,e.fillText(s.zt.Zt,n.fi,(n.ii+n.ci)/2+n.vi)}))}}},{key:"Gt",value:function(t,i,e,n){var s,h=t.context,r=t.bitmapSize,a=t.mediaSize,u=t.horizontalPixelRatio,l=t.verticalPixelRatio,o=this.zt.hi||!this.zt.pi?i.T:0,c=this.zt.mi?i.C:0,f=i.L+this.Kt.bi,v=i.V+this.Kt.wi,d=i.B,y=i.I,m=this.zt.Zt,p=i.P,k=e.gi(h,m),b=Math.ceil(e.Mi(h,m)),g=p+f+v,w=i.C+d+y+b+o,_=Math.max(1,Math.floor(l)),S=Math.round(g*l);S%2!=_%2&&(S+=1);var M,z,x,Z=c>0?Math.max(1,Math.floor(c*u)):0,C=Math.round(w*u),O=Math.round(o*u),E=null!==(s=this.Kt.xi)&&void 0!==s?s:this.Kt.Si,T=Math.round(E*l)-Math.floor(.5*l),N=Math.floor(T+_/2-S/2),R=N+S,B="right"===n,L=B?a.width-c:c,P=B?r.width-Z:Z;return B?(M=P-C,z=P-O,x=L-o-d-c):(M=P+C,z=P+O,x=L+o+d),{Qt:B,Jt:{ii:N,li:T,ci:R,ni:C,si:S,ht:2*u,ei:Z,ti:M,ri:P,ai:z,oi:_,ui:r.width},di:{ii:N/l,ci:R/l,fi:x,vi:k}}}}]),t}(),gt=function(){function t(i){(0,c.Z)(this,t),this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(i||bt)(this.yi,this.ki),this.Pi=new(i||bt)(this.Ci,this.ki)}return(0,f.Z)(t,[{key:"Zt",value:function(){return this.Ri(),this.yi.Zt}},{key:"Si",value:function(){return this.Ri(),this.ki.Si}},{key:"bt",value:function(){this.ft=!0}},{key:"Bt",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.max(this.Ti.Bt(t,i),this.Pi.Bt(t,i))}},{key:"Di",value:function(){return this.ki.xi||0}},{key:"Oi",value:function(t){this.ki.xi=t}},{key:"Ai",value:function(){return this.Ri(),this.yi.yt||this.Ci.yt}},{key:"Vi",value:function(){return this.Ri(),this.yi.yt}},{key:"gt",value:function(t){return this.Ri(),this.yi.hi=this.yi.hi&&t.W().ticksVisible,this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}},{key:"Bi",value:function(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}},{key:"Ri",value:function(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}]),t}(),wt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n,s){var h;return(0,c.Z)(this,e),(h=i.call(this)).jt=t,h.zi=n,h.Li=s,h}return(0,f.Z)(e,[{key:"Ii",value:function(t,i,e){if(t.yt=!1,2!==this.jt.W().mode){var n=this.jt.W().horzLine;if(n.labelVisible){var s=this.zi.Ct();if(this.jt.yt()&&!this.zi.Ei()&&null!==s){var h=$(n.labelBackgroundColor);e.t=h.t,t.O=h.i;var r=2/12*this.zi.P();e.bi=r,e.wi=r;var a=this.Li(this.zi);e.Si=a.Si,t.Zt=this.zi.Ni(a._t,s),t.yt=!0}}}}}]),e}(gt),_t=/[1-9]/g,St=function(){function t(){(0,c.Z)(this,t),this.zt=null}return(0,f.Z)(t,[{key:"J",value:function(t){this.zt=t}},{key:"K",value:function(t,i){var e=this;if(null!==this.zt&&!1!==this.zt.yt&&0!==this.zt.Zt.length){var n=t.useMediaCoordinateSpace((function(t){var n=t.context;return n.font=i.R,Math.round(i.Fi.Mi(n,L(e.zt).Zt,_t))}));if(!(n<=0)){var s=i.Wi,h=n+2*s,r=h/2,a=this.zt.ji,u=this.zt.Si,l=Math.floor(u-r)+.5;l<0?(u+=Math.abs(0-l),l=Math.floor(u-r)+.5):l+h>a&&(u-=Math.abs(a-(l+h)),l=Math.floor(u-r)+.5);var o=l+h,c=Math.ceil(0+i.C+i.T+i.L+i.P+i.V);t.useBitmapCoordinateSpace((function(t){var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r=L(e.zt);n.fillStyle=r.t;var a=Math.round(l*s),u=Math.round(0*h),f=Math.round(o*s),v=Math.round(c*h),d=Math.round(2*s);if(n.beginPath(),n.moveTo(a,u),n.lineTo(a,v-d),n.arcTo(a,v,a+d,v,d),n.lineTo(f-d,v),n.arcTo(f,v,f,v-d,d),n.lineTo(f,u),n.fill(),r.hi){var y=Math.round(r.Si*s),m=u,p=Math.round((m+i.T)*h);n.fillStyle=r.O;var k=Math.max(1,Math.floor(s)),b=Math.floor(.5*s);n.fillRect(y-b,m,k,p-m)}})),t.useMediaCoordinateSpace((function(t){var n=t.context,h=L(e.zt),r=0+i.C+i.T+i.L+i.P/2;n.font=i.R,n.textAlign="left",n.textBaseline="middle",n.fillStyle=h.O;var a=i.Fi.gi(n,"Apr0");n.translate(l+s,r+a),n.fillText(h.Zt,0,0)}))}}}}]),t}(),Mt=function(){function t(i,e,n){(0,c.Z)(this,t),this.ft=!0,this.Wt=new St,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=i,this.Hi=e,this.Li=n}return(0,f.Z)(t,[{key:"bt",value:function(){this.ft=!0}},{key:"gt",value:function(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}},{key:"Mt",value:function(){var t=this.Ft;if(t.yt=!1,2!==this.vt.W().mode){var i=this.vt.W().vertLine;if(i.labelVisible){var e=this.Hi.St();if(!e.Ei()){t.ji=e.ji();var n=this.Li();if(null!==n){t.Si=n.Si;var s=e.$i(this.vt.xt());t.Zt=e.Ui(L(s)),t.yt=!0;var h=$(i.labelBackgroundColor);t.t=h.t,t.O=h.i,t.hi=e.W().ticksVisible}}}}}}]),t}(),zt=function(){function t(){(0,c.Z)(this,t),this.qi=null,this.Yi=0}return(0,f.Z)(t,[{key:"Xi",value:function(){return this.Yi}},{key:"Ki",value:function(t){this.Yi=t}},{key:"Dt",value:function(){return this.qi}},{key:"Zi",value:function(t){this.qi=t}},{key:"Gi",value:function(t){return[]}},{key:"Ji",value:function(){return[]}},{key:"yt",value:function(){return!0}}]),t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(kt||(kt={}));var xt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;(0,c.Z)(this,e),(s=i.call(this)).Qi=null,s.tn=NaN,s.nn=0,s.sn=!0,s.en=new Map,s.rn=!1,s.hn=NaN,s.ln=NaN,s.an=NaN,s.on=NaN,s.Hi=t,s._n=n,s.un=new lt(t,(0,a.Z)(s)),s.cn=function(t){var i=s.ln,e=s.tn;if(t===L(s.Qi).dn())return{_t:e,Si:i};var n=L(t.Ct());return{_t:t.fn(i,n),Si:i}};var h=function(){var t=s.Hi.St().vn(s.nn),i=s.Yt();return t&&Number.isFinite(i)?{ot:t,Si:i}:null};return s.pn=new Mt((0,a.Z)(s),t,h),s.mn=new ct((0,a.Z)(s)),s}return(0,f.Z)(e,[{key:"W",value:function(){return this._n}},{key:"bn",value:function(t,i){this.an=t,this.on=i}},{key:"wn",value:function(){this.an=NaN,this.on=NaN}},{key:"gn",value:function(){return this.an}},{key:"Mn",value:function(){return this.on}},{key:"xn",value:function(t,i,e){this.rn||(this.rn=!0),this.sn=!0,this.Sn(t,i,e)}},{key:"xt",value:function(){return this.nn}},{key:"Yt",value:function(){return this.hn}},{key:"Xt",value:function(){return this.ln}},{key:"yt",value:function(){return this.sn}},{key:"kn",value:function(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}},{key:"Cn",value:function(t){return null!==this.Qi?[this.mn,this.un]:[]}},{key:"Ut",value:function(t){return t===this.Qi&&this._n.horzLine.visible}},{key:"qt",value:function(){return this._n.vertLine.visible}},{key:"Tn",value:function(t,i){this.sn&&this.Qi===t||this.en.clear();var e=[];return this.Qi===t&&e.push(this.Pn(this.en,i,this.cn)),e}},{key:"Ji",value:function(){return this.sn?[this.pn]:[]}},{key:"Ht",value:function(){return this.Qi}},{key:"Rn",value:function(){this.mn.bt(),this.en.forEach((function(t){return t.bt()})),this.pn.bt(),this.un.bt()}},{key:"Dn",value:function(t){return t&&!t.dn().Ei()?t.dn():null}},{key:"Sn",value:function(t,i,e){this.On(t,i,e)&&this.Rn()}},{key:"On",value:function(t,i,e){var n=this.hn,s=this.ln,h=this.tn,r=this.nn,a=this.Qi,u=this.Dn(e);this.nn=t,this.hn=isNaN(t)?NaN:this.Hi.St().It(t),this.Qi=e;var l=null!==u?u.Ct():null;return null!==u&&null!==l?(this.tn=i,this.ln=u.Rt(i,l)):(this.tn=NaN,this.ln=NaN),n!==this.hn||s!==this.ln||r!==this.nn||h!==this.tn||a!==this.Qi}},{key:"yn",value:function(){var t=this.Hi.wt().map((function(t){return t.Vn().An()})).filter(K),i=0===t.length?null:Math.max.apply(Math,(0,o.Z)(t));this.nn=null!==i?i:NaN}},{key:"Pn",value:function(t,i,e){var n=t.get(i);return void 0===n&&(n=new wt(this,i,e),t.set(i,n)),n}}]),e}(zt);function Zt(t){return"left"===t||"right"===t}var Ct=function(){function t(i){(0,c.Z)(this,t),this.Bn=new Map,this.In=[],this.zn=i}return(0,f.Z)(t,[{key:"Ln",value:function(t,i){var e=function(t,i){return void 0===t?i:{En:Math.max(t.En,i.En),Nn:t.Nn||i.Nn}}(this.Bn.get(t),i);this.Bn.set(t,e)}},{key:"Fn",value:function(){return this.zn}},{key:"Wn",value:function(t){var i=this.Bn.get(t);return void 0===i?{En:this.zn}:{En:Math.max(this.zn,i.En),Nn:i.Nn}}},{key:"jn",value:function(){this.Hn(),this.In=[{$n:0}]}},{key:"Un",value:function(t){this.Hn(),this.In=[{$n:1,Ot:t}]}},{key:"qn",value:function(t){this.Yn(),this.In.push({$n:5,Ot:t})}},{key:"Hn",value:function(){this.Yn(),this.In.push({$n:6})}},{key:"Xn",value:function(){this.Hn(),this.In=[{$n:4}]}},{key:"Kn",value:function(t){this.Hn(),this.In.push({$n:2,Ot:t})}},{key:"Zn",value:function(t){this.Hn(),this.In.push({$n:3,Ot:t})}},{key:"Gn",value:function(){return this.In}},{key:"Jn",value:function(t){var i,e=this,n=(0,r.Z)(t.In);try{for(n.s();!(i=n.n()).done;){var s=i.value;this.Qn(s)}}catch(h){n.e(h)}finally{n.f()}this.zn=Math.max(this.zn,t.zn),t.Bn.forEach((function(t,i){e.Ln(i,t)}))}},{key:"Qn",value:function(t){switch(t.$n){case 0:this.jn();break;case 1:this.Un(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Zn(t.Ot);break;case 4:this.Xn();break;case 5:this.qn(t.Ot);break;case 6:this.Yn()}}},{key:"Yn",value:function(){var t=this.In.findIndex((function(t){return 5===t.$n}));-1!==t&&this.In.splice(t,1)}}],[{key:"ts",value:function(){return new t(2)}},{key:"ns",value:function(){return new t(3)}}]),t}();function Ot(t,i){if(!Q(t))return"n/a";if(!X(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var Et=function(){function t(i,e){if((0,c.Z)(this,t),e||(e=1),Q(i)&&X(i)||(i=100),i<0)throw new TypeError("invalid base");this.zi=i,this.ss=e,this.es()}return(0,f.Z)(t,[{key:"format",value:function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.rs(t)}},{key:"es",value:function(){if(this.hs=0,this.zi>0&&this.ss>0)for(var t=this.zi;t>1;)t/=10,this.hs++}},{key:"rs",value:function(t){var i=this.zi/this.ss,e=Math.floor(t),n="",s=void 0!==this.hs?this.hs:NaN;if(i>1){var h=+(Math.round(t*i)-e*i).toFixed(this.hs);h>=i&&(h-=i,e+=1),n="."+Ot(+h.toFixed(this.hs)*this.ss,s)}else e=Math.round(e*i)/i,s>0&&(n="."+Ot(0,s));return e.toFixed(0)+n}}]),t}(),Tt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"format",value:function(t){return"".concat((0,s.Z)((0,h.Z)(e.prototype),"format",this).call(this,t),"%")}}]),e}(Et),Nt=function(){function t(i){(0,c.Z)(this,t),this.ls=i}return(0,f.Z)(t,[{key:"format",value:function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.os(t):t<999995?i+this.os(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.os(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.os(t/1e9)+"B")}},{key:"os",value:function(t){var i=Math.pow(10,this.ls);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.ls).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))}}]),t}();function Rt(t,i,e,s,h,r,a){if(!(0===i.length||s.from>=i.length||s.to<=0)){var u=t.context,l=t.horizontalPixelRatio,o=t.verticalPixelRatio,c=i[s.from],f=r(t,c),v=c;if(s.to-s.from<2){var d=h/2;u.beginPath();var y={nt:c.nt-d,st:c.st},m={nt:c.nt+d,st:c.st};u.moveTo(y.nt*l,y.st*o),u.lineTo(m.nt*l,m.st*o),a(t,f,y,m)}else{var p=function(i,e){a(t,f,v,e),u.beginPath(),f=i,v=e},k=v;u.beginPath(),u.moveTo(c.nt*l,c.st*o);for(var b=s.from+1;b<s.to;++b){k=i[b];var g=r(t,k);switch(e){case 0:u.lineTo(k.nt*l,k.st*o);break;case 1:u.lineTo(k.nt*l,i[b-1].st*o),g!==f&&(p(g,k),u.lineTo(k.nt*l,i[b-1].st*o)),u.lineTo(k.nt*l,k.st*o);break;case 2:var w=Pt(i,b-1,b),_=(0,n.Z)(w,2),S=_[0],M=_[1];u.bezierCurveTo(S.nt*l,S.st*o,M.nt*l,M.st*o,k.nt*l,k.st*o)}1!==e&&g!==f&&(p(g,k),u.moveTo(k.nt*l,k.st*o))}(v!==k||v===k&&1===e)&&a(t,f,v,k)}}}function Bt(t,i){return{nt:t.nt-i.nt,st:t.st-i.st}}function Lt(t,i){return{nt:t.nt/i,st:t.st/i}}function Pt(t,i,e){var n,s,h=Math.max(0,i-1),r=Math.min(t.length-1,e+1);return[(n=t[i],s=Lt(Bt(t[e],t[h]),6),{nt:n.nt+s.nt,st:n.st+s.st}),Bt(t[e],Lt(Bt(t[r],t[i]),6))]}function It(t,i,e,n,s){var h=i.context,r=i.horizontalPixelRatio,a=i.verticalPixelRatio;h.lineTo(s.nt*r,t*a),h.lineTo(n.nt*r,t*a),h.closePath(),h.fillStyle=e,h.fill()}var Wt=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).G=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.G=t}},{key:"Z",value:function(t){var i;if(null!==this.G){var e=this.G,n=e.it,s=e.tt,h=e._s,r=e.et,a=e.Nt,u=e.us,l=null!==(i=this.G.cs)&&void 0!==i?i:this.G.ds?0:t.mediaSize.height;if(null!==s){var o=t.context;o.lineCap="butt",o.lineJoin="round",o.lineWidth=r,T(o,a),o.lineWidth=1,Rt(t,n,u,s,h,this.fs.bind(this),It.bind(null,l))}}}}]),e}(ht);function Vt(t,i,e){return Math.min(Math.max(t,i),e)}function Dt(t,i,e){return i-t<=e}function At(t){var i=Math.ceil(t);return i%2==0?i-1:i}var jt=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"vs",value:function(t,i){var e=this.ps,n=i.bs,s=i.ws,h=i.gs,r=i.Ms,a=i.xs,u=i.cs;if(void 0===this.Ss||void 0===e||e.bs!==n||e.ws!==s||e.gs!==h||e.Ms!==r||e.cs!==u||e.xs!==a){var l=t.context.createLinearGradient(0,0,0,a);if(l.addColorStop(0,n),null!=u){var o=Vt(u*t.verticalPixelRatio/a,0,1);l.addColorStop(o,s),l.addColorStop(o,h)}l.addColorStop(1,r),this.Ss=l,this.ps=i}return this.Ss}}]),t}(),Ft=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).ks=new jt,t}return(0,f.Z)(e,[{key:"fs",value:function(t,i){return this.ks.vs(t,{bs:i.ys,ws:"",gs:"",Ms:i.Cs,xs:t.bitmapSize.height})}}]),e}(Wt);function Ht(t,i){var e=t.context;e.strokeStyle=i,e.stroke()}var $t=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).G=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.G=t}},{key:"Z",value:function(t){if(null!==this.G){var i=this.G,e=i.it,n=i.tt,s=i._s,h=i.us,r=i.et,a=i.Nt,u=i.Ts;if(null!==n){var l=t.context;l.lineCap="butt",l.lineWidth=r*t.verticalPixelRatio,T(l,a),l.lineJoin="round";var o=this.Ps.bind(this);void 0!==h&&Rt(t,e,h,n,s,o,Ht),u&&function(t,i,e,n,s){for(var h=t.horizontalPixelRatio,r=t.verticalPixelRatio,a=t.context,u=null,l=Math.max(1,Math.floor(h))%2/2,o=e*r+l,c=n.to-1;c>=n.from;--c){var f=i[c];if(f){var v=s(t,f);v!==u&&(a.beginPath(),null!==u&&a.fill(),a.fillStyle=v,u=v);var d=Math.round(f.nt*h)+l,y=f.st*r;a.moveTo(d,y),a.arc(d,y,o,0,2*Math.PI)}}a.fill()}(t,e,u,n,o)}}}}]),e}(ht),Ut=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){return(0,c.Z)(this,e),i.apply(this,arguments)}return(0,f.Z)(e,[{key:"Ps",value:function(t,i){return i.lt}}]),e}($t);function Yt(t,i,e,n){for(var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.length,r=h-s;0<r;){var a=r>>1,u=s+a;n(i[u],e)===t?(s=u+1,r-=a+1):r=a}return s}var Qt=Yt.bind(null,!0),Xt=Yt.bind(null,!1);function qt(t,i){return t.ot<i}function Gt(t,i){return i<t.ot}function Jt(t,i,e){var n=i.Rs(),s=i.ui(),h=Qt(t,n,qt),r=Xt(t,s,Gt);if(!e)return{from:h,to:r};var a=h,u=r;return h>0&&h<t.length&&t[h].ot>=n&&(a=h-1),r>0&&r<t.length&&t[r-1].ot<=s&&(u=r+1),{from:a,to:u}}var Kt=function(){function t(i,e,n){(0,c.Z)(this,t),this.Ds=!0,this.Os=!0,this.As=!0,this.Vs=[],this.Bs=null,this.Is=i,this.zs=e,this.Ls=n}return(0,f.Z)(t,[{key:"bt",value:function(t){this.Ds=!0,"data"===t&&(this.Os=!0),"options"===t&&(this.As=!0)}},{key:"gt",value:function(){return this.Is.yt()?(this.Es(),null===this.Bs?null:this.Ns):null}},{key:"Fs",value:function(){var t=this;this.Vs=this.Vs.map((function(i){return Object.assign(Object.assign({},i),t.Is.js().Ws(i.ot))}))}},{key:"Hs",value:function(){this.Bs=null}},{key:"Es",value:function(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}},{key:"Us",value:function(){var t=this.Is.Dt(),i=this.zs.St();if(this.Hs(),!i.Ei()&&!t.Ei()){var e=i.qs();if(null!==e&&0!==this.Is.Vn().Ys()){var n=this.Is.Ct();null!==n&&(this.Bs=Jt(this.Vs,e,this.Ls),this.Xs(t,i,n.Ot),this.Ks())}}}}]),t}(),ti=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){return(0,c.Z)(this,e),i.call(this,t,n,!0)}return(0,f.Z)(e,[{key:"Xs",value:function(t,i,e){i.Zs(this.Vs,tt(this.Bs)),t.Gs(this.Vs,e,tt(this.Bs))}},{key:"Js",value:function(t,i){return{ot:t,_t:i,nt:NaN,st:NaN}}},{key:"$s",value:function(){var t=this,i=this.Is.js();this.Vs=this.Is.Vn().Qs().map((function(e){var n=e.Ot[3];return t.te(e.ie,n,i)}))}}]),e}(Kt),ii=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t,n)).Ns=new st,s.ne=new Ft,s.se=new Ut,s.Ns.X([s.ne,s.se]),s}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.Js(t,i)),e.Ws(t))}},{key:"Ks",value:function(){var t=this.Is.W();this.ne.J({us:t.lineType,it:this.Vs,Nt:t.lineStyle,et:t.lineWidth,cs:null,ds:t.invertFilledArea,tt:this.Bs,_s:this.zs.St().ee()}),this.se.J({us:t.lineVisible?t.lineType:void 0,it:this.Vs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Bs,_s:this.zs.St().ee(),Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}]),e}(ti),ei=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.re=0,t.he=0,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio;if(null!==this.zt&&0!==this.zt.Vn.length&&null!==this.zt.tt){this.re=this.le(e),this.re>=2&&Math.max(1,Math.floor(e))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(e)):this.re;for(var s=null,h=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*e),r=this.zt.tt.from;r<this.zt.tt.to;++r){var a=this.zt.Vn[r];s!==a.oe&&(i.fillStyle=a.oe,s=a.oe);var u=Math.floor(.5*this.he),l=Math.round(a.nt*e),o=l-u,c=this.he,f=o+c-1,v=Math.min(a._e,a.ue),d=Math.max(a._e,a.ue),y=Math.round(v*n)-u,m=Math.round(d*n)+u,p=Math.max(m-y,this.he);i.fillRect(o,y,c,p);var k=Math.ceil(1.5*this.re);if(h){if(this.zt.ce){var b=l-k,g=Math.max(y,Math.round(a.de*n)-u),w=g+c-1;w>y+p-1&&(g=(w=y+p-1)-c+1),i.fillRect(b,g,o-b,w-g+1)}var _=l+k,S=Math.max(y,Math.round(a.fe*n)-u),M=S+c-1;M>y+p-1&&(S=(M=y+p-1)-c+1),i.fillRect(f+1,S,_-f,M-S+1)}}}}},{key:"le",value:function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(L(this.zt).ee,t)))}}]),e}(ht),ni=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){return(0,c.Z)(this,e),i.call(this,t,n,!1)}return(0,f.Z)(e,[{key:"Xs",value:function(t,i,e){i.Zs(this.Vs,tt(this.Bs)),t.ve(this.Vs,e,tt(this.Bs))}},{key:"pe",value:function(t,i,e){return{ot:t,me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}},{key:"$s",value:function(){var t=this,i=this.Is.js();this.Vs=this.Is.Vn().Qs().map((function(e){return t.te(e.ie,e,i)}))}}]),e}(Kt),si=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Ns=new ei,t}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.pe(t,i,e)),e.Ws(t))}},{key:"Ks",value:function(){var t=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),ce:t.openVisible,ae:t.thinBars,tt:this.Bs})}}]),e}(ni),hi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).ks=new jt,t}return(0,f.Z)(e,[{key:"fs",value:function(t,i){var e=this.G;return this.ks.vs(t,{bs:i.Me,ws:i.xe,gs:i.Se,Ms:i.ke,xs:t.bitmapSize.height,cs:e.cs})}}]),e}(Wt),ri=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).ye=new jt,t}return(0,f.Z)(e,[{key:"Ps",value:function(t,i){var e=this.G;return this.ye.vs(t,{bs:i.Ce,ws:i.Ce,gs:i.Te,Ms:i.Te,xs:t.bitmapSize.height,cs:e.cs})}}]),e}($t),ai=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t,n)).Ns=new st,s.Pe=new hi,s.Re=new ri,s.Ns.X([s.Pe,s.Re]),s}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.Js(t,i)),e.Ws(t))}},{key:"Ks",value:function(){var t=this.Is.Ct();if(null!==t){var i=this.Is.W(),e=this.Is.Dt().Rt(i.baseValue.price,t.Ot),n=this.zs.St().ee();this.Pe.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineType,cs:e,ds:!1,tt:this.Bs,_s:n}),this.Re.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineVisible?i.lineType:void 0,Ts:i.pointMarkersVisible?i.pointMarkersRadius||i.lineWidth/2+2:void 0,cs:e,tt:this.Bs,_s:n})}}}]),e}(ti),ui=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.re=0,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"Z",value:function(t){if(null!==this.zt&&0!==this.zt.Vn.length&&null!==this.zt.tt){var i=t.horizontalPixelRatio;this.re=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var e=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),n=Math.floor(t*e*i),s=Math.floor(t*i),h=Math.min(n,s);return Math.max(Math.floor(i),h)}(this.zt.ee,i),this.re>=2&&Math.floor(i)%2!=this.re%2&&this.re--;var e=this.zt.Vn;this.zt.De&&this.Oe(t,e,this.zt.tt),this.zt._i&&this.Ae(t,e,this.zt.tt);var n=this.Ve(i);(!this.zt._i||this.re>2*n)&&this.Be(t,e,this.zt.tt)}}},{key:"Oe",value:function(t,i,e){if(null!==this.zt){var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=Math.min(Math.floor(s),Math.floor(this.zt.ee*s));a=Math.max(Math.floor(s),Math.min(a,this.re));for(var u=Math.floor(.5*a),l=null,o=e.from;o<e.to;o++){var c=i[o];c.Ie!==r&&(n.fillStyle=c.Ie,r=c.Ie);var f=Math.round(Math.min(c.de,c.fe)*h),v=Math.round(Math.max(c.de,c.fe)*h),d=Math.round(c._e*h),y=Math.round(c.ue*h),m=Math.round(s*c.nt)-u,p=m+a-1;null!==l&&(m=Math.max(l+1,m),m=Math.min(m,p));var k=p-m+1;n.fillRect(m,d,k,f-d),n.fillRect(m,v+1,k,y-v),l=p}}}},{key:"Ve",value:function(t){var i=Math.floor(1*t);this.re<=2*i&&(i=Math.floor(.5*(this.re-1)));var e=Math.max(Math.floor(t),i);return this.re<=2*e?Math.max(Math.floor(t),Math.floor(1*t)):e}},{key:"Ae",value:function(t,i,e){if(null!==this.zt)for(var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=this.Ve(s),u=null,l=e.from;l<e.to;l++){var o=i[l];o.ze!==r&&(n.fillStyle=o.ze,r=o.ze);var c=Math.round(o.nt*s)-Math.floor(.5*this.re),f=c+this.re-1,v=Math.round(Math.min(o.de,o.fe)*h),d=Math.round(Math.max(o.de,o.fe)*h);if(null!==u&&(c=Math.max(u+1,c),c=Math.min(c,f)),this.zt.ee*s>2*a)ft(n,c,v,f-c+1,d-v+1,a);else{var y=f-c+1;n.fillRect(c,v,y,d-v+1)}u=f}}},{key:"Be",value:function(t,i,e){if(null!==this.zt)for(var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio,r="",a=this.Ve(s),u=e.from;u<e.to;u++){var l=i[u],o=Math.round(Math.min(l.de,l.fe)*h),c=Math.round(Math.max(l.de,l.fe)*h),f=Math.round(l.nt*s)-Math.floor(.5*this.re),v=f+this.re-1;if(l.oe!==r){var d=l.oe;n.fillStyle=d,r=d}this.zt._i&&(f+=a,o+=a,v-=a,c-=a),o>c||n.fillRect(f,o,v-f+1,c-o+1)}}}]),e}(ht),li=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Ns=new ui,t}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.pe(t,i,e)),e.Ws(t))}},{key:"Ks",value:function(){var t=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),De:t.wickVisible,_i:t.borderVisible,tt:this.Bs})}}]),e}(ni),oi=function(){function t(i,e){(0,c.Z)(this,t),this.Le=i,this.zi=e}return(0,f.Z)(t,[{key:"K",value:function(t,i,e){this.Le.draw(t,this.zi,i,e)}}]),t}(),ci=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n,s){var h;return(0,c.Z)(this,e),(h=i.call(this,t,n,!1)).mn=s,h.Ns=new oi(h.mn.renderer(),(function(i){var e=t.Ct();return null===e?null:t.Dt().Rt(i,e.Ot)})),h}return(0,f.Z)(e,[{key:"Ee",value:function(t){return this.mn.priceValueBuilder(t)}},{key:"Ne",value:function(t){return this.mn.isWhitespace(t)}},{key:"$s",value:function(){var t=this.Is.js();this.Vs=this.Is.Vn().Qs().map((function(i){return Object.assign(Object.assign({ot:i.ie,nt:NaN},t.Ws(i.ie)),{Fe:i.We})}))}},{key:"Xs",value:function(t,i){i.Zs(this.Vs,tt(this.Bs))}},{key:"Ks",value:function(){this.mn.update({bars:this.Vs.map(fi),barSpacing:this.zs.St().ee(),visibleRange:this.Bs},this.Is.W())}}]),e}(Kt);function fi(t){return{x:t.nt,time:t.ot,originalData:t.Fe,barColor:t.oe}}var vi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.je=[],t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t,this.je=[]}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio;if(null!==this.zt&&0!==this.zt.it.length&&null!==this.zt.tt){this.je.length||this.He(e);for(var s=Math.max(1,Math.floor(n)),h=Math.round(this.zt.$e*n)-Math.floor(s/2),r=h+s,a=this.zt.tt.from;a<this.zt.tt.to;a++){var u=this.zt.it[a],l=this.je[a-this.zt.tt.from],o=Math.round(u.st*n),c=void 0,f=void 0;i.fillStyle=u.oe,o<=h?(c=o,f=r):(c=h,f=o-Math.floor(s/2)+s),i.fillRect(l.Rs,c,l.ui-l.Rs+1,f-c)}}}},{key:"He",value:function(t){if(null!==this.zt&&0!==this.zt.it.length&&null!==this.zt.tt){var i=Math.ceil(this.zt.ee*t)<=1?0:Math.max(1,Math.floor(t)),e=Math.round(this.zt.ee*t)-i;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(var n=this.zt.tt.from;n<this.zt.tt.to;n++){var s=this.zt.it[n],h=Math.round(s.nt*t),r=void 0,a=void 0;if(e%2){var u=(e-1)/2;r=h-u,a=h+u}else{var l=e/2;r=h-l,a=h+l-1}this.je[n-this.zt.tt.from]={Rs:r,ui:a,Ue:h,qe:s.nt*t,ot:s.ot}}for(var o=this.zt.tt.from+1;o<this.zt.tt.to;o++){var c=this.je[o-this.zt.tt.from],f=this.je[o-this.zt.tt.from-1];c.ot===f.ot+1&&c.Rs-f.ui!==i+1&&(f.Ue>f.qe?f.ui=c.Rs-i-1:c.Rs=f.ui+i+1)}for(var v=Math.ceil(this.zt.ee*t),d=this.zt.tt.from;d<this.zt.tt.to;d++){var y=this.je[d-this.zt.tt.from];y.ui<y.Rs&&(y.ui=y.Rs);var m=y.ui-y.Rs+1;v=Math.min(m,v)}if(i>0&&v<4)for(var p=this.zt.tt.from;p<this.zt.tt.to;p++){var k=this.je[p-this.zt.tt.from];k.ui-k.Rs+1>v&&(k.Ue>k.qe?k.ui-=1:k.Rs+=1)}}else this.je=[]}}]),e}(ht),di=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Ns=new vi,t}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.Js(t,i)),e.Ws(t))}},{key:"Ks",value:function(){var t={it:this.Vs,ee:this.zs.St().ee(),tt:this.Bs,$e:this.Is.Dt().Rt(this.Is.W().base,L(this.Is.Ct()).Ot)};this.Ns.J(t)}}]),e}(ti),yi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).Ns=new Ut,t}return(0,f.Z)(e,[{key:"te",value:function(t,i,e){return Object.assign(Object.assign({},this.Js(t,i)),e.Ws(t))}},{key:"Ks",value:function(){var t=this.Is.W(),i={it:this.Vs,Nt:t.lineStyle,us:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Bs,_s:this.zs.St().ee()};this.Ns.J(i)}}]),e}(ti),mi=/[2-9]/g,pi=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;(0,c.Z)(this,t),this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=i}return(0,f.Z)(t,[{key:"Qe",value:function(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}},{key:"Mi",value:function(t,i,e){return this.tr(t,i,e).width}},{key:"gi",value:function(t,i,e){var n=this.tr(t,i,e);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}},{key:"tr",value:function(t,i,e){var n=e||mi,s=String(i).replace(n,"0");if(this.Ge.has(s))return B(this.Ge.get(s)).ir;if(this.Ye===this.Je){var h=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(h),this.Ke++,this.Ye--}t.save(),t.textBaseline="middle";var r=t.measureText(s);return t.restore(),0===r.width&&i.length||(this.Ge.set(s,{ir:r,nr:this.Xe}),this.Ze[this.Xe]=s,this.Ye++,this.Xe++),r}}]),t}(),ki=function(){function t(i){(0,c.Z)(this,t),this.sr=null,this.k=null,this.er="right",this.rr=i}return(0,f.Z)(t,[{key:"hr",value:function(t,i,e){this.sr=t,this.k=i,this.er=e}},{key:"K",value:function(t){null!==this.k&&null!==this.sr&&this.sr.K(t,this.k,this.rr,this.er)}}]),t}(),bi=function(){function t(i,e,n){(0,c.Z)(this,t),this.lr=i,this.rr=new pi(50),this.ar=e,this.F=n,this.j=-1,this.Wt=new ki(this.rr)}return(0,f.Z)(t,[{key:"gt",value:function(){var t=this.F._r(this.ar);if(null===t)return null;var i=t.ur(this.ar)?t.cr():this.ar.Dt();if(null===i)return null;var e=t.dr(i);if("overlay"===e)return null;var n=this.F.vr();return n.P!==this.j&&(this.j=n.P,this.rr.Qe()),this.Wt.hr(this.lr.Bi(),n,e),this.Wt}}]),t}(),gi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"pr",value:function(t,i){var e;if(!(null===(e=this.zt)||void 0===e?void 0:e.yt))return null;var n=this.zt,s=n.st,h=n.et,r=n.mr;return i>=s-h-7&&i<=s+h+7?{br:this.zt,mr:r}:null}},{key:"Z",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(null!==this.zt&&!1!==this.zt.yt){var h=Math.round(this.zt.st*s);h<0||h>e.height||(i.lineCap="butt",i.strokeStyle=this.zt.O,i.lineWidth=Math.floor(this.zt.et*n),T(i,this.zt.Nt),N(i,h,0,e.width))}}}]),e}(ht),wi=function(){function t(i){(0,c.Z)(this,t),this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new gi,this.ft=!0,this.Is=i,this.zs=i.$t(),this.gr.J(this.wr)}return(0,f.Z)(t,[{key:"bt",value:function(){this.ft=!0}},{key:"gt",value:function(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}]),t}(),_i=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"Mr",value:function(){this.wr.yt=!1;var t=this.Is.Dt(),i=t.Sr().Sr;if(2===i||3===i){var e=this.Is.W();if(e.baseLineVisible&&this.Is.yt()){var n=this.Is.Ct();null!==n&&(this.wr.yt=!0,this.wr.st=t.Rt(n.Ot,n.Ot),this.wr.O=e.baseLineColor,this.wr.et=e.baseLineWidth,this.wr.Nt=e.baseLineStyle)}}}}]),e}(wi),Si=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"We",value:function(){return this.zt}},{key:"Z",value:function(t){var i=t.context,e=t.horizontalPixelRatio,n=t.verticalPixelRatio,s=this.zt;if(null!==s){var h=Math.max(1,Math.floor(e)),r=h%2/2,a=Math.round(s.qe.x*e)+r,u=s.qe.y*n;i.fillStyle=s.kr,i.beginPath();var l=Math.max(2,1.5*s.yr)*e;i.arc(a,u,l,0,2*Math.PI,!1),i.fill(),i.fillStyle=s.Cr,i.beginPath(),i.arc(a,u,s.ht*e,0,2*Math.PI,!1),i.fill(),i.lineWidth=h,i.strokeStyle=s.Tr,i.beginPath(),i.arc(a,u,s.ht*e+h/2,0,2*Math.PI,!1),i.stroke()}}}]),e}(ht),Mi=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Vr:0,Br:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Vr:0,Br:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Vr:0,Br:0,Ir:0}];function zi(t,i,e,n){return function(t,i){if("transparent"===t)return t;var e=H(t),n=e[3];return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i*n,")")}(t,e+(n-e)*i)}function xi(t,i){var e,n,s=t%2600/2600,h=(0,r.Z)(Mi);try{for(h.s();!(n=h.n()).done;){var a=n.value;if(s>=a.Pr&&s<=a.Rr){e=a;break}}}catch(f){h.e(f)}finally{h.f()}R(void 0!==e,"Last price animation internal logic error");var u,l,o,c=(s-e.Pr)/(e.Rr-e.Pr);return{Cr:zi(i,c,e.Ar,e.Vr),Tr:zi(i,c,e.Br,e.Ir),ht:(u=c,l=e.Dr,o=e.Or,l+(o-l)*u)}}var Zi=function(){function t(i){(0,c.Z)(this,t),this.Wt=new Si,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=i}return(0,f.Z)(t,[{key:"Fr",value:function(){this.Er=this.Lr-1,this.bt()}},{key:"Wr",value:function(){if(this.bt(),2===this.Nr.W().lastPriceAnimation){var t=performance.now(),i=this.Er-t;if(i>0)return void(i<650&&(this.Er+=2600));this.Lr=t,this.Er=t+2600}}},{key:"bt",value:function(){this.ft=!0}},{key:"jr",value:function(){this.zr=!0}},{key:"yt",value:function(){return 0!==this.Nr.W().lastPriceAnimation}},{key:"Hr",value:function(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}},{key:"gt",value:function(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}},{key:"Mt",value:function(){this.Wt.J(null);var t=this.Nr.$t().St(),i=t.qs(),e=this.Nr.Ct();if(null!==i&&null!==e){var n=this.Nr.Ur(!0);if(!n.qr&&i.Yr(n.ie)){var s={x:t.It(n.ie),y:this.Nr.Dt().Rt(n._t,e.Ot)},h=n.O,r=this.Nr.W().lineWidth,a=xi(this.Xr(),h);this.Wt.J({kr:h,yr:r,Cr:a.Cr,Tr:a.Tr,ht:a.ht,qe:s})}}}},{key:"$r",value:function(){var t=this.Wt.We();if(null!==t){var i=xi(this.Xr(),t.kr);t.Cr=i.Cr,t.Tr=i.Tr,t.ht=i.ht}}},{key:"Xr",value:function(){return this.Hr()?performance.now()-this.Lr:2599}}]),t}();function Ci(t,i){return At(Math.min(Math.max(t,12),30)*i)}function Oi(t,i){switch(t){case"arrowDown":case"arrowUp":return Ci(i,1);case"circle":return Ci(i,.8);case"square":return Ci(i,.7)}}function Ei(t){return function(t){var i=Math.ceil(t);return i%2!=0?i-1:i}(Ci(t,1))}function Ti(t){return Math.max(Ci(t,.1),3)}function Ni(t,i,e,n,s){var h=Oi("square",e),r=(h-1)/2,a=t-r,u=i-r;return n>=a&&n<=a+h&&s>=u&&s<=u+h}function Ri(t,i,e,n){var s=(Oi("arrowUp",n)-1)/2*e.Kr,h=(At(n/2)-1)/2*e.Kr;i.beginPath(),t?(i.moveTo(e.nt-s,e.st),i.lineTo(e.nt,e.st-s),i.lineTo(e.nt+s,e.st),i.lineTo(e.nt+h,e.st),i.lineTo(e.nt+h,e.st+s),i.lineTo(e.nt-h,e.st+s),i.lineTo(e.nt-h,e.st)):(i.moveTo(e.nt-s,e.st),i.lineTo(e.nt,e.st+s),i.lineTo(e.nt+s,e.st),i.lineTo(e.nt+h,e.st),i.lineTo(e.nt+h,e.st-s),i.lineTo(e.nt-h,e.st-s),i.lineTo(e.nt-h,e.st)),i.fill()}var Bi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t.rr=new pi,t.j=-1,t.H="",t.Zr="",t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"hr",value:function(t,i){this.j===t&&this.H===i||(this.j=t,this.H=i,this.Zr=et(t,i),this.rr.Qe())}},{key:"pr",value:function(t,i){if(null===this.zt||null===this.zt.tt)return null;for(var e=this.zt.tt.from;e<this.zt.tt.to;e++){var n=this.zt.it[e];if(Pi(n,t,i))return{br:n.Gr,mr:n.mr}}return null}},{key:"Z",value:function(t,i,e){var n=t.context,s=t.horizontalPixelRatio,h=t.verticalPixelRatio;if(null!==this.zt&&null!==this.zt.tt){n.textBaseline="middle",n.font=this.Zr;for(var r=this.zt.tt.from;r<this.zt.tt.to;r++){var a=this.zt.it[r];void 0!==a.Zt&&(a.Zt.ji=this.rr.Mi(n,a.Zt.Jr),a.Zt.Bt=this.j,a.Zt.nt=a.nt-a.Zt.ji/2),Li(a,n,s,h)}}}}]),e}(ht);function Li(t,i,e,n){i.fillStyle=t.O,void 0!==t.Zt&&function(t,i,e,n,s,h){t.save(),t.scale(s,h),t.fillText(i,e,n),t.restore()}(i,t.Zt.Jr,t.Zt.nt,t.Zt.st,e,n),function(t,i,e){if(0!==t.Ys){switch(t.Qr){case"arrowDown":return void Ri(!1,i,e,t.Ys);case"arrowUp":return void Ri(!0,i,e,t.Ys);case"circle":return void function(t,i,e){var n=(Oi("circle",e)-1)/2;t.beginPath(),t.arc(i.nt,i.st,n*i.Kr,0,2*Math.PI,!1),t.fill()}(i,e,t.Ys);case"square":return void function(t,i,e){var n=Oi("square",e),s=(n-1)*i.Kr/2,h=i.nt-s,r=i.st-s;t.fillRect(h,r,n*i.Kr,n*i.Kr)}(i,e,t.Ys)}t.Qr}}(t,i,function(t,i,e){var n=Math.max(1,Math.floor(i))%2/2;return{nt:Math.round(t.nt*i)+n,st:t.st*e,Kr:i}}(t,e,n))}function Pi(t,i,e){return!(void 0===t.Zt||!function(t,i,e,n,s,h){var r=n/2;return s>=t&&s<=t+e&&h>=i-r&&h<=i+r}(t.Zt.nt,t.Zt.st,t.Zt.ji,t.Zt.Bt,i,e))||function(t,i,e){if(0===t.Ys)return!1;switch(t.Qr){case"arrowDown":case"arrowUp":return function(t,i,e,n,s,h){return Ni(i,e,n,s,h)}(0,t.nt,t.st,t.Ys,i,e);case"circle":return function(t,i,e,n,s){var h=2+Oi("circle",e)/2,r=t-n,a=i-s;return Math.sqrt(r*r+a*a)<=h}(t.nt,t.st,t.Ys,i,e);case"square":return Ni(t.nt,t.st,t.Ys,i,e)}}(t,i,e)}function Ii(t,i,e,n,s,h,r,a,u){var l=Q(e)?e:e.ge,o=Q(e)?e:e.be,c=Q(e)?e:e.we,f=Q(i.size)?Math.max(i.size,0):1,v=Ei(a.ee())*f,d=v/2;switch(t.Ys=v,i.position){case"inBar":return t.st=r.Rt(l,u),void(void 0!==t.Zt&&(t.Zt.st=t.st+d+h+.6*s));case"aboveBar":return t.st=r.Rt(o,u)-d-n.th,void 0!==t.Zt&&(t.Zt.st=t.st-d-.6*s,n.th+=1.2*s),void(n.th+=v+h);case"belowBar":return t.st=r.Rt(c,u)+d+n.ih,void 0!==t.Zt&&(t.Zt.st=t.st+d+h+.6*s,n.ih+=1.2*s),void(n.ih+=v+h)}i.position}var Wi=function(){function t(i,e){(0,c.Z)(this,t),this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.Wt=new Bi,this.Nr=i,this.Hi=e,this.zt={it:[],tt:null}}return(0,f.Z)(t,[{key:"bt",value:function(t){this.ft=!0,this.sh=!0,"data"===t&&(this.nh=!0)}},{key:"gt",value:function(t){if(!this.Nr.yt())return null;this.ft&&this.rh();var i=this.Hi.W().layout;return this.Wt.hr(i.fontSize,i.fontFamily),this.Wt.J(this.zt),this.Wt}},{key:"hh",value:function(){if(this.sh){if(this.Nr.lh().length>0){var t=this.Hi.St().ee(),i=Ti(t),e=1.5*Ei(t)+2*i;this.eh={above:e,below:e}}else this.eh=null;this.sh=!1}return this.eh}},{key:"rh",value:function(){var t=this.Nr.Dt(),i=this.Hi.St(),e=this.Nr.lh();this.nh&&(this.zt.it=e.map((function(t){return{ot:t.time,nt:0,st:0,Ys:0,Qr:t.shape,O:t.color,Gr:t.Gr,mr:t.id,Zt:void 0}})),this.nh=!1);var n=this.Hi.W().layout;this.zt.tt=null;var s=i.qs();if(null!==s){var h=this.Nr.Ct();if(null!==h&&0!==this.zt.it.length){var r=NaN,a=Ti(i.ee()),u={th:a,ih:a};this.zt.tt=Jt(this.zt.it,s,!0);for(var l=this.zt.tt.from;l<this.zt.tt.to;l++){var o=e[l];o.time!==r&&(u.th=a,u.ih=a,r=o.time);var c=this.zt.it[l];c.nt=i.It(o.time),void 0!==o.text&&o.text.length>0&&(c.Zt={Jr:o.text,nt:0,st:0,ji:0,Bt:0});var f=this.Nr.ah(o.time);null!==f&&Ii(c,o,f,u,n.fontSize,a,t,i,h.Ot)}this.ft=!1}}}}]),t}(),Vi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){return(0,c.Z)(this,e),i.call(this,t)}return(0,f.Z)(e,[{key:"Mr",value:function(){var t=this.wr;t.yt=!1;var i=this.Is.W();if(i.priceLineVisible&&this.Is.yt()){var e=this.Is.Ur(0===i.priceLineSource);e.qr||(t.yt=!0,t.st=e.Si,t.O=this.Is.oh(e.O),t.et=i.priceLineWidth,t.Nt=i.priceLineStyle)}}}]),e}(wi),Di=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).jt=t,n}return(0,f.Z)(e,[{key:"Ii",value:function(t,i,e){t.yt=!1,i.yt=!1;var n=this.jt;if(n.yt()){var s=n.W(),h=s.lastValueVisible,r=""!==n._h(),a=0===s.seriesLastValueMode,u=n.Ur(!1);if(!u.qr){h&&(t.Zt=this.uh(u,h,a),t.yt=0!==t.Zt.length),(r||a)&&(i.Zt=this.dh(u,h,r,a),i.yt=i.Zt.length>0);var l=n.oh(u.O),o=$(l);e.t=o.t,e.Si=u.Si,i.At=n.$t().Vt(u.Si/n.Dt().Bt()),t.At=l,t.O=o.i,i.O=o.i}}}},{key:"dh",value:function(t,i,e,n){var s="",h=this.jt._h();return e&&0!==h.length&&(s+="".concat(h," ")),i&&n&&(s+=this.jt.Dt().fh()?t.ph:t.mh),s.trim()}},{key:"uh",value:function(t,i,e){return i?e?this.jt.Dt().fh()?t.mh:t.ph:t.Zt:""}}]),e}(gt);function Ai(t,i,e,n){var s=Number.isFinite(i),h=Number.isFinite(e);return s&&h?t(i,e):s||h?s?i:e:n}var ji,Fi=function(){function t(i,e){(0,c.Z)(this,t),this.bh=i,this.wh=e}return(0,f.Z)(t,[{key:"gh",value:function(t){return null!==t&&this.bh===t.bh&&this.wh===t.wh}},{key:"Mh",value:function(){return new t(this.bh,this.wh)}},{key:"xh",value:function(){return this.bh}},{key:"Sh",value:function(){return this.wh}},{key:"kh",value:function(){return this.wh-this.bh}},{key:"Ei",value:function(){return this.wh===this.bh||Number.isNaN(this.wh)||Number.isNaN(this.bh)}},{key:"Jn",value:function(i){return null===i?this:new t(Ai(Math.min,this.xh(),i.xh(),-1/0),Ai(Math.max,this.Sh(),i.Sh(),1/0))}},{key:"yh",value:function(t){if(Q(t)&&0!==this.wh-this.bh){var i=.5*(this.wh+this.bh),e=this.wh-i,n=this.bh-i;e*=t,n*=t,this.wh=i+e,this.bh=i+n}}},{key:"Ch",value:function(t){Q(t)&&(this.wh+=t,this.bh+=t)}},{key:"Th",value:function(){return{minValue:this.bh,maxValue:this.wh}}}],[{key:"Ph",value:function(i){return null===i?null:new t(i.minValue,i.maxValue)}}]),t}(),Hi=function(){function t(i,e){(0,c.Z)(this,t),this.Rh=i,this.Dh=e||null}return(0,f.Z)(t,[{key:"Oh",value:function(){return this.Rh}},{key:"Ah",value:function(){return this.Dh}},{key:"Th",value:function(){return null===this.Rh?null:{priceRange:this.Rh.Th(),margins:this.Dh||void 0}}}],[{key:"Ph",value:function(i){return null===i?null:new t(Fi.Ph(i.priceRange),i.margins)}}]),t}(),$i=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this,t)).Vh=n,s}return(0,f.Z)(e,[{key:"Mr",value:function(){var t=this.wr;t.yt=!1;var i=this.Vh.W();if(this.Is.yt()&&i.lineVisible){var e=this.Vh.Bh();null!==e&&(t.yt=!0,t.st=e,t.O=i.color,t.et=i.lineWidth,t.Nt=i.lineStyle,t.mr=this.Vh.W().id)}}}]),e}(wi),Ui=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this)).Nr=t,s.Vh=n,s}return(0,f.Z)(e,[{key:"Ii",value:function(t,i,e){t.yt=!1,i.yt=!1;var n=this.Vh.W(),s=n.axisLabelVisible,h=""!==n.title,r=this.Nr;if(s&&r.yt()){var a=this.Vh.Bh();if(null!==a){h&&(i.Zt=n.title,i.yt=!0),i.At=r.$t().Vt(a/r.Dt().Bt()),t.Zt=this.Ih(n.price),t.yt=!0;var u=$(n.axisLabelColor||n.color);e.t=u.t;var l=n.axisLabelTextColor||u.i;t.O=l,i.O=l,e.Si=a}}}},{key:"Ih",value:function(t){var i=this.Nr.Ct();return null===i?"":this.Nr.Dt().Ni(t,i.Ot)}}]),e}(gt),Yi=function(){function t(i,e){(0,c.Z)(this,t),this.Nr=i,this._n=e,this.zh=new $i(i,this),this.lr=new Ui(i,this),this.Lh=new bi(this.lr,i,i.$t())}return(0,f.Z)(t,[{key:"Eh",value:function(t){Y(this._n,t),this.bt(),this.Nr.$t().Nh()}},{key:"W",value:function(){return this._n}},{key:"Fh",value:function(){return this.zh}},{key:"Wh",value:function(){return this.Lh}},{key:"jh",value:function(){return this.lr}},{key:"bt",value:function(){this.zh.bt(),this.lr.bt()}},{key:"Bh",value:function(){var t=this.Nr,i=t.Dt();if(t.$t().St().Ei()||i.Ei())return null;var e=t.Ct();return null===e?null:i.Rt(this._n.price,e.Ot)}}]),t}(),Qi=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).Hi=t,n}return(0,f.Z)(e,[{key:"$t",value:function(){return this.Hi}}]),e}(zt),Xi={Bar:function(t,i,e,n){var s,h=i.upColor,r=i.downColor,a=L(t(e,n)),u=P(a.Ot[0])<=P(a.Ot[3]);return{oe:null!==(s=a.O)&&void 0!==s?s:u?h:r}},Candlestick:function(t,i,e,n){var s,h,r,a=i.upColor,u=i.downColor,l=i.borderUpColor,o=i.borderDownColor,c=i.wickUpColor,f=i.wickDownColor,v=L(t(e,n)),d=P(v.Ot[0])<=P(v.Ot[3]);return{oe:null!==(s=v.O)&&void 0!==s?s:d?a:u,ze:null!==(h=v.At)&&void 0!==h?h:d?l:o,Ie:null!==(r=v.Hh)&&void 0!==r?r:d?c:f}},Custom:function(t,i,e,n){var s;return{oe:null!==(s=L(t(e,n)).O)&&void 0!==s?s:i.color}},Area:function(t,i,e,n){var s,h,r,a,u=L(t(e,n));return{oe:null!==(s=u.lt)&&void 0!==s?s:i.lineColor,lt:null!==(h=u.lt)&&void 0!==h?h:i.lineColor,ys:null!==(r=u.ys)&&void 0!==r?r:i.topColor,Cs:null!==(a=u.Cs)&&void 0!==a?a:i.bottomColor}},Baseline:function(t,i,e,n){var s,h,r,a,u,l,o=L(t(e,n));return{oe:o.Ot[3]>=i.baseValue.price?i.topLineColor:i.bottomLineColor,Ce:null!==(s=o.Ce)&&void 0!==s?s:i.topLineColor,Te:null!==(h=o.Te)&&void 0!==h?h:i.bottomLineColor,Me:null!==(r=o.Me)&&void 0!==r?r:i.topFillColor1,xe:null!==(a=o.xe)&&void 0!==a?a:i.topFillColor2,Se:null!==(u=o.Se)&&void 0!==u?u:i.bottomFillColor1,ke:null!==(l=o.ke)&&void 0!==l?l:i.bottomFillColor2}},Line:function(t,i,e,n){var s,h,r=L(t(e,n));return{oe:null!==(s=r.O)&&void 0!==s?s:i.color,lt:null!==(h=r.O)&&void 0!==h?h:i.color}},Histogram:function(t,i,e,n){var s;return{oe:null!==(s=L(t(e,n)).O)&&void 0!==s?s:i.color}}},qi=function(){function t(i){var e=this;(0,c.Z)(this,t),this.$h=function(t,i){return void 0!==i?i.Ot:e.Nr.Vn().Uh(t)},this.Nr=i,this.qh=Xi[i.Yh()]}return(0,f.Z)(t,[{key:"Ws",value:function(t,i){return this.qh(this.$h,this.Nr.W(),t,i)}}]),t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(ji||(ji={}));var Gi=30,Ji=function(){function t(){(0,c.Z)(this,t),this.Xh=[],this.Kh=new Map,this.Zh=new Map}return(0,f.Z)(t,[{key:"Gh",value:function(){return this.Ys()>0?this.Xh[this.Xh.length-1]:null}},{key:"Jh",value:function(){return this.Ys()>0?this.Qh(0):null}},{key:"An",value:function(){return this.Ys()>0?this.Qh(this.Xh.length-1):null}},{key:"Ys",value:function(){return this.Xh.length}},{key:"Ei",value:function(){return 0===this.Ys()}},{key:"Yr",value:function(t){return null!==this.tl(t,0)}},{key:"Uh",value:function(t){return this.il(t)}},{key:"il",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=this.tl(t,i);return null===e?null:Object.assign(Object.assign({},this.nl(e)),{ie:this.Qh(e)})}},{key:"Qs",value:function(){return this.Xh}},{key:"sl",value:function(t,i,e){if(this.Ei())return null;var n,s=null,h=(0,r.Z)(e);try{for(h.s();!(n=h.n()).done;){var a=n.value;s=Ki(s,this.el(t,i,a))}}catch(u){h.e(u)}finally{h.f()}return s}},{key:"J",value:function(t){this.Zh.clear(),this.Kh.clear(),this.Xh=t}},{key:"Qh",value:function(t){return this.Xh[t].ie}},{key:"nl",value:function(t){return this.Xh[t]}},{key:"tl",value:function(t,i){var e=this.rl(t);if(null===e&&0!==i)switch(i){case-1:return this.hl(t);case 1:return this.ll(t);default:throw new TypeError("Unknown search mode")}return e}},{key:"hl",value:function(t){var i=this.al(t);return i>0&&(i-=1),i!==this.Xh.length&&this.Qh(i)<t?i:null}},{key:"ll",value:function(t){var i=this.ol(t);return i!==this.Xh.length&&t<this.Qh(i)?i:null}},{key:"rl",value:function(t){var i=this.al(t);return i===this.Xh.length||t<this.Xh[i].ie?null:i}},{key:"al",value:function(t){return Qt(this.Xh,t,(function(t,i){return t.ie<i}))}},{key:"ol",value:function(t){return Xt(this.Xh,t,(function(t,i){return t.ie>i}))}},{key:"_l",value:function(t,i,e){for(var n=null,s=t;s<i;s++){var h=this.Xh[s].Ot[e];Number.isNaN(h)||(null===n?n={ul:h,cl:h}:(h<n.ul&&(n.ul=h),h>n.cl&&(n.cl=h)))}return n}},{key:"el",value:function(t,i,e){if(this.Ei())return null;var n=null,s=L(this.Jh()),h=L(this.An()),r=Math.max(t,s),a=Math.min(i,h),u=Math.ceil(r/Gi)*Gi,l=Math.max(u,Math.floor(a/Gi)*Gi),o=this.al(r),c=this.ol(Math.min(a,u,i));n=Ki(n,this._l(o,c,e));var f=this.Kh.get(e);void 0===f&&(f=new Map,this.Kh.set(e,f));for(var v=Math.max(u+1,r);v<l;v+=Gi){var d=Math.floor(v/Gi),y=f.get(d);if(void 0===y){var m=this.al(d*Gi),p=this.ol((d+1)*Gi-1);y=this._l(m,p,e),f.set(d,y)}n=Ki(n,y)}var k=this.al(l),b=this.ol(a);return n=Ki(n,this._l(k,b,e))}}]),t}();function Ki(t,i){return null===t?i:null===i?t:{ul:Math.min(t.ul,i.ul),cl:Math.max(t.cl,i.cl)}}var te=function(){function t(i){(0,c.Z)(this,t),this.dl=i}return(0,f.Z)(t,[{key:"K",value:function(t,i,e){this.dl.draw(t)}},{key:"fl",value:function(t,i,e){var n,s;null===(s=(n=this.dl).drawBackground)||void 0===s||s.call(n,t)}}]),t}(),ie=function(){function t(i){(0,c.Z)(this,t),this.Ge=null,this.mn=i}return(0,f.Z)(t,[{key:"gt",value:function(){var t,i=this.mn.renderer();if(null===i)return null;if((null===(t=this.Ge)||void 0===t?void 0:t.vl)===i)return this.Ge.pl;var e=new te(i);return this.Ge={vl:i,pl:e},e}},{key:"ml",value:function(){var t,i,e;return null!==(e=null===(i=(t=this.mn).zOrder)||void 0===i?void 0:i.call(t))&&void 0!==e?e:"normal"}}]),t}();function ee(t){var i,e,n,s,h;return{Zt:t.text(),Si:t.coordinate(),xi:null===(i=t.fixedCoordinate)||void 0===i?void 0:i.call(t),O:t.textColor(),t:t.backColor(),yt:null===(n=null===(e=t.visible)||void 0===e?void 0:e.call(t))||void 0===n||n,hi:null===(h=null===(s=t.tickVisible)||void 0===s?void 0:s.call(t))||void 0===h||h}}var ne=function(){function t(i,e){(0,c.Z)(this,t),this.Wt=new St,this.bl=i,this.wl=e}return(0,f.Z)(t,[{key:"gt",value:function(){return this.Wt.J(Object.assign({ji:this.wl.ji()},ee(this.bl))),this.Wt}}]),t}(),se=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this)).bl=t,s.zi=n,s}return(0,f.Z)(e,[{key:"Ii",value:function(t,i,e){var n=ee(this.bl);e.t=n.t,t.O=n.O;var s=2/12*this.zi.P();e.bi=s,e.wi=s,e.Si=n.Si,e.xi=n.xi,t.Zt=n.Zt,t.yt=n.yt,t.hi=n.hi}}]),e}(gt),he=function(){function t(i,e){(0,c.Z)(this,t),this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=i,this.Nr=e}return(0,f.Z)(t,[{key:"Cl",value:function(){return this.yl}},{key:"Rn",value:function(){var t,i;null===(i=(t=this.yl).updateAllViews)||void 0===i||i.call(t)}},{key:"Cn",value:function(){var t,i,e,n,s=null!==(e=null===(i=(t=this.yl).paneViews)||void 0===i?void 0:i.call(t))&&void 0!==e?e:[];if((null===(n=this.gl)||void 0===n?void 0:n.vl)===s)return this.gl.pl;var h=s.map((function(t){return new ie(t)}));return this.gl={vl:s,pl:h},h}},{key:"Ji",value:function(){var t,i,e,n,s=null!==(e=null===(i=(t=this.yl).timeAxisViews)||void 0===i?void 0:i.call(t))&&void 0!==e?e:[];if((null===(n=this.Ml)||void 0===n?void 0:n.vl)===s)return this.Ml.pl;var h=this.Nr.$t().St(),r=s.map((function(t){return new ne(t,h)}));return this.Ml={vl:s,pl:r},r}},{key:"Tn",value:function(){var t,i,e,n,s=null!==(e=null===(i=(t=this.yl).priceAxisViews)||void 0===i?void 0:i.call(t))&&void 0!==e?e:[];if((null===(n=this.xl)||void 0===n?void 0:n.vl)===s)return this.xl.pl;var h=this.Nr.Dt(),r=s.map((function(t){return new se(t,h)}));return this.xl={vl:s,pl:r},r}},{key:"Tl",value:function(){var t,i,e,n,s=null!==(e=null===(i=(t=this.yl).priceAxisPaneViews)||void 0===i?void 0:i.call(t))&&void 0!==e?e:[];if((null===(n=this.Sl)||void 0===n?void 0:n.vl)===s)return this.Sl.pl;var h=s.map((function(t){return new ie(t)}));return this.Sl={vl:s,pl:h},h}},{key:"Pl",value:function(){var t,i,e,n,s=null!==(e=null===(i=(t=this.yl).timeAxisPaneViews)||void 0===i?void 0:i.call(t))&&void 0!==e?e:[];if((null===(n=this.kl)||void 0===n?void 0:n.vl)===s)return this.kl.pl;var h=s.map((function(t){return new ie(t)}));return this.kl={vl:s,pl:h},h}},{key:"Rl",value:function(t,i){var e,n,s;return null!==(s=null===(n=(e=this.yl).autoscaleInfo)||void 0===n?void 0:n.call(e,t,i))&&void 0!==s?s:null}},{key:"pr",value:function(t,i){var e,n,s;return null!==(s=null===(n=(e=this.yl).hitTest)||void 0===n?void 0:n.call(e,t,i))&&void 0!==s?s:null}}]),t}();function re(t,i,e,n){t.forEach((function(t){i(t).forEach((function(t){t.ml()===e&&n.push(t)}))}))}function ae(t){return t.Cn()}function ue(t){return t.Tl()}function le(t){return t.Pl()}var oe=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n,s,h,r){var u;(0,c.Z)(this,e),(u=i.call(this,t)).zt=new Ji,u.zh=new Vi((0,a.Z)(u)),u.Dl=[],u.Ol=new _i((0,a.Z)(u)),u.Al=null,u.Vl=null,u.Bl=[],u.Il=[],u.zl=null,u.Ll=[],u._n=n,u.El=s;var l=new Di((0,a.Z)(u));return u.en=[l],u.Lh=new bi(l,(0,a.Z)(u),t),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(u.Al=new Zi((0,a.Z)(u))),u.Nl(),u.Fl(r),u}return(0,f.Z)(e,[{key:"S",value:function(){null!==this.zl&&clearTimeout(this.zl)}},{key:"oh",value:function(t){return this._n.priceLineColor||t}},{key:"Ur",value:function(t){var i={qr:!0},e=this.Dt();if(this.$t().St().Ei()||e.Ei()||this.zt.Ei())return i;var n,s,h=this.$t().St().qs(),r=this.Ct();if(null===h||null===r)return i;if(t){var a=this.zt.Gh();if(null===a)return i;n=a,s=a.ie}else{var u=this.zt.il(h.ui(),-1);if(null===u)return i;if(null===(n=this.zt.Uh(u.ie)))return i;s=u.ie}var l=n.Ot[3],o=this.js().Ws(s,{Ot:n}),c=e.Rt(l,r.Ot);return{qr:!1,_t:l,Zt:e.Ni(l,r.Ot),ph:e.Wl(l),mh:e.jl(l,r.Ot),O:o.oe,Si:c,ie:s}}},{key:"js",value:function(){return null!==this.Vl||(this.Vl=new qi(this)),this.Vl}},{key:"W",value:function(){return this._n}},{key:"Eh",value:function(t){var i=t.priceScaleId;void 0!==i&&i!==this._n.priceScaleId&&this.$t().Hl(this,i),Y(this._n,t),void 0!==t.priceFormat&&(this.Nl(),this.$t().$l()),this.$t().Ul(this),this.$t().ql(),this.mn.bt("options")}},{key:"J",value:function(t,i){this.zt.J(t),this.Yl(),this.mn.bt("data"),this.un.bt("data"),null!==this.Al&&(i&&i.Xl?this.Al.Wr():0===t.length&&this.Al.Fr());var e=this.$t()._r(this);this.$t().Kl(e),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}},{key:"Zl",value:function(t){this.Bl=t,this.Yl();var i=this.$t()._r(this);this.un.bt("data"),this.$t().Kl(i),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}},{key:"Gl",value:function(){return this.Bl}},{key:"lh",value:function(){return this.Il}},{key:"Jl",value:function(t){var i=new Yi(this,t);return this.Dl.push(i),this.$t().Ul(this),i}},{key:"Ql",value:function(t){var i=this.Dl.indexOf(t);-1!==i&&this.Dl.splice(i,1),this.$t().Ul(this)}},{key:"Yh",value:function(){return this.El}},{key:"Ct",value:function(){var t=this.ta();return null===t?null:{Ot:t.Ot[3],ia:t.ot}}},{key:"ta",value:function(){var t=this.$t().St().qs();if(null===t)return null;var i=t.Rs();return this.zt.il(i,1)}},{key:"Vn",value:function(){return this.zt}},{key:"ah",value:function(t){var i=this.zt.Uh(t);return null===i?null:"Bar"===this.El||"Candlestick"===this.El||"Custom"===this.El?{me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3]}:i.Ot[3]}},{key:"na",value:function(t){var i=this,e=[];re(this.Ll,ae,"top",e);var n=this.Al;return null!==n&&n.yt()?(null===this.zl&&n.Hr()&&(this.zl=setTimeout((function(){i.zl=null,i.$t().sa()}),0)),n.jr(),e.push(n),e):e}},{key:"Cn",value:function(){var t=[];this.ea()||t.push(this.Ol),t.push(this.mn,this.zh,this.un);var i=this.Dl.map((function(t){return t.Fh()}));return t.push.apply(t,(0,o.Z)(i)),re(this.Ll,ae,"normal",t),t}},{key:"ra",value:function(){return this.ha(ae,"bottom")}},{key:"la",value:function(t){return this.ha(ue,t)}},{key:"aa",value:function(t){return this.ha(le,t)}},{key:"oa",value:function(t,i){return this.Ll.map((function(e){return e.pr(t,i)})).filter((function(t){return null!==t}))}},{key:"Gi",value:function(t){return[this.Lh].concat((0,o.Z)(this.Dl.map((function(t){return t.Wh()}))))}},{key:"Tn",value:function(t,i){if(i!==this.qi&&!this.ea())return[];var e,n=(0,o.Z)(this.en),s=(0,r.Z)(this.Dl);try{for(s.s();!(e=s.n()).done;){var h=e.value;n.push(h.jh())}}catch(a){s.e(a)}finally{s.f()}return this.Ll.forEach((function(t){n.push.apply(n,(0,o.Z)(t.Tn()))})),n}},{key:"Ji",value:function(){var t=[];return this.Ll.forEach((function(i){t.push.apply(t,(0,o.Z)(i.Ji()))})),t}},{key:"Rl",value:function(t,i){var e=this;if(void 0!==this._n.autoscaleInfoProvider){var n=this._n.autoscaleInfoProvider((function(){var n=e._a(t,i);return null===n?null:n.Th()}));return Hi.Ph(n)}return this._a(t,i)}},{key:"ua",value:function(){return this._n.priceFormat.minMove}},{key:"ca",value:function(){return this.da}},{key:"Rn",value:function(){var t;this.mn.bt(),this.un.bt();var i,e=(0,r.Z)(this.en);try{for(e.s();!(i=e.n()).done;){i.value.bt()}}catch(h){e.e(h)}finally{e.f()}var n,s=(0,r.Z)(this.Dl);try{for(s.s();!(n=s.n()).done;){n.value.bt()}}catch(h){s.e(h)}finally{s.f()}this.zh.bt(),this.Ol.bt(),null===(t=this.Al)||void 0===t||t.bt(),this.Ll.forEach((function(t){return t.Rn()}))}},{key:"Dt",value:function(){return L((0,s.Z)((0,h.Z)(e.prototype),"Dt",this).call(this))}},{key:"kt",value:function(t){if("Line"!==this.El&&"Area"!==this.El&&"Baseline"!==this.El||!this._n.crosshairMarkerVisible)return null;var i=this.zt.Uh(t);return null===i?null:{_t:i.Ot[3],ht:this.fa(),At:this.va(),Pt:this.pa(),Tt:this.ma(t)}}},{key:"_h",value:function(){return this._n.title}},{key:"yt",value:function(){return this._n.visible}},{key:"ba",value:function(t){this.Ll.push(new he(t,this))}},{key:"wa",value:function(t){this.Ll=this.Ll.filter((function(i){return i.Cl()!==t}))}},{key:"ga",value:function(){var t=this;if(this.mn instanceof ci!=0)return function(i){return t.mn.Ee(i)}}},{key:"Ma",value:function(){var t=this;if(this.mn instanceof ci!=0)return function(i){return t.mn.Ne(i)}}},{key:"ea",value:function(){return!Zt(this.Dt().xa())}},{key:"_a",value:function(t,i){if(!X(t)||!X(i)||this.zt.Ei())return null;var e="Line"===this.El||"Area"===this.El||"Baseline"===this.El||"Histogram"===this.El?[3]:[2,1],n=this.zt.sl(t,i,e),s=null!==n?new Fi(n.ul,n.cl):null;if("Histogram"===this.Yh()){var h=this._n.base,r=new Fi(h,h);s=null!==s?s.Jn(r):r}var a=this.un.hh();return this.Ll.forEach((function(e){var n,h,r,u,l=e.Rl(t,i);if(null==l?void 0:l.priceRange){var o=new Fi(l.priceRange.minValue,l.priceRange.maxValue);s=null!==s?s.Jn(o):o}(null==l?void 0:l.margins)&&(n=a,h=l.margins,a={above:Math.max(null!==(r=null==n?void 0:n.above)&&void 0!==r?r:0,h.above),below:Math.max(null!==(u=null==n?void 0:n.below)&&void 0!==u?u:0,h.below)})})),new Hi(s,a)}},{key:"fa",value:function(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}},{key:"va",value:function(){switch(this.El){case"Line":case"Area":case"Baseline":var t=this._n.crosshairMarkerBorderColor;if(0!==t.length)return t}return null}},{key:"pa",value:function(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}},{key:"ma",value:function(t){switch(this.El){case"Line":case"Area":case"Baseline":var i=this._n.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.js().Ws(t).oe}},{key:"Nl",value:function(){switch(this._n.priceFormat.type){case"custom":this.da={format:this._n.priceFormat.formatter};break;case"volume":this.da=new Nt(this._n.priceFormat.precision);break;case"percent":this.da=new Tt(this._n.priceFormat.precision);break;default:var t=Math.pow(10,this._n.priceFormat.precision);this.da=new Et(t,this._n.priceFormat.minMove*t)}null!==this.qi&&this.qi.Sa()}},{key:"Yl",value:function(){var t=this,i=this.$t().St();if(i.ka()&&!this.zt.Ei()){var e=L(this.zt.Jh());this.Il=this.Bl.map((function(n,s){var h=L(i.ya(n.time,!0)),r=h<e?1:-1;return{time:L(t.zt.il(h,r)).ie,position:n.position,shape:n.shape,color:n.color,id:n.id,Gr:s,text:n.text,size:n.size,originalTime:n.originalTime}}))}else this.Il=[]}},{key:"Fl",value:function(t){switch(this.un=new Wi(this,this.$t()),this.El){case"Bar":this.mn=new si(this,this.$t());break;case"Candlestick":this.mn=new li(this,this.$t());break;case"Line":this.mn=new yi(this,this.$t());break;case"Custom":this.mn=new ci(this,this.$t(),B(t));break;case"Area":this.mn=new ii(this,this.$t());break;case"Baseline":this.mn=new ai(this,this.$t());break;case"Histogram":this.mn=new di(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.El)}}},{key:"ha",value:function(t,i){var e=[];return re(this.Ll,t,i,e),e}}]),e}(Qi),ce=function(){function t(i){(0,c.Z)(this,t),this._n=i}return(0,f.Z)(t,[{key:"Ca",value:function(t,i,e){var n=t;if(0===this._n.mode)return n;var s=e.dn(),h=s.Ct();if(null===h)return n;var r=s.Rt(t,h),a=e.Ta().filter((function(t){return t instanceof oe})).reduce((function(t,n){if(e.ur(n)||!n.yt())return t;var s=n.Dt(),h=n.Vn();if(s.Ei()||!h.Yr(i))return t;var r=h.Uh(i);if(null===r)return t;var a=P(n.Ct());return t.concat([s.Rt(r.Ot[3],a.Ot)])}),[]);if(0===a.length)return n;a.sort((function(t,i){return Math.abs(t-r)-Math.abs(i-r)}));var u=a[0];return n=s.fn(u,h)}}]),t}(),fe=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=i.apply(this,arguments)).zt=null,t}return(0,f.Z)(e,[{key:"J",value:function(t){this.zt=t}},{key:"Z",value:function(t){var i=this,e=t.context,n=t.bitmapSize,s=t.horizontalPixelRatio,h=t.verticalPixelRatio;if(null!==this.zt){var a=Math.max(1,Math.floor(s));e.lineWidth=a,function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(e,(function(){var t=L(i.zt);if(t.Pa){e.strokeStyle=t.Ra,T(e,t.Da),e.beginPath();var u,l=(0,r.Z)(t.Oa);try{for(l.s();!(u=l.n()).done;){var o=u.value,c=Math.round(o.Aa*s);e.moveTo(c,-a),e.lineTo(c,n.height+a)}}catch(m){l.e(m)}finally{l.f()}e.stroke()}if(t.Va){e.strokeStyle=t.Ba,T(e,t.Ia),e.beginPath();var f,v=(0,r.Z)(t.za);try{for(v.s();!(f=v.n()).done;){var d=f.value,y=Math.round(d.Aa*h);e.moveTo(-a,y),e.lineTo(n.width+a,y)}}catch(m){v.e(m)}finally{v.f()}e.stroke()}}))}}}]),e}(ht),ve=function(){function t(i){(0,c.Z)(this,t),this.Wt=new fe,this.ft=!0,this.Qi=i}return(0,f.Z)(t,[{key:"bt",value:function(){this.ft=!0}},{key:"gt",value:function(){if(this.ft){var t=this.Qi.$t().W().grid,i={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.Qi.dn().La(),Oa:(this.Qi.$t().St().La()||[]).map((function(t){return{Aa:t.coord}}))};this.Wt.J(i),this.ft=!1}return this.Wt}}]),t}(),de=function(){function t(i){(0,c.Z)(this,t),this.mn=new ve(i)}return(0,f.Z)(t,[{key:"Fh",value:function(){return this.mn}}]),t}(),ye={Ea:4,Na:1e-4};function me(t,i){var e=100*(t-i)/i;return i<0?-e:e}function pe(t,i){var e=me(t.xh(),i),n=me(t.Sh(),i);return new Fi(e,n)}function ke(t,i){var e=100*(t-i)/i+100;return i<0?-e:e}function be(t,i){var e=ke(t.xh(),i),n=ke(t.Sh(),i);return new Fi(e,n)}function ge(t,i){var e=Math.abs(t);if(e<1e-15)return 0;var n=Math.log10(e+i.Na)+i.Ea;return t<0?-n:n}function we(t,i){var e=Math.abs(t);if(e<1e-15)return 0;var n=Math.pow(10,e-i.Ea)-i.Na;return t<0?-n:n}function _e(t,i){if(null===t)return null;var e=ge(t.xh(),i),n=ge(t.Sh(),i);return new Fi(e,n)}function Se(t,i){if(null===t)return null;var e=we(t.xh(),i),n=we(t.Sh(),i);return new Fi(e,n)}function Me(t){if(null===t)return ye;var i=Math.abs(t.Sh()-t.xh());if(i>=1||i<1e-15)return ye;var e=Math.ceil(Math.abs(Math.log10(i))),n=ye.Ea+e;return{Ea:n,Na:1/Math.pow(10,n)}}var ze,xe=function(){function t(i,e){if((0,c.Z)(this,t),this.Fa=i,this.Wa=e,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(var n=this.Fa;1!==n;){if(n%2==0)this.ja.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),n/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}return(0,f.Z)(t,[{key:"Ha",value:function(t,i,e){for(var n,s=0===this.Fa?0:1/this.Fa,h=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-i)))),r=0,a=this.Wa[0];;){var u=Dt(h,s,1e-14)&&h>s+1e-14,l=Dt(h,e*a,1e-14),o=Dt(h,1,1e-14);if(!(u&&l&&o))break;h/=a,a=this.Wa[++r%this.Wa.length]}if(h<=s+1e-14&&(h=s),h=Math.max(1,h),this.ja.length>0&&(n=h,1,1e-14,Math.abs(n-1)<1e-14))for(r=0,a=this.ja[0];Dt(h,e*a,1e-14)&&h>s+1e-14;)h/=a,a=this.ja[++r%this.ja.length];return h}}]),t}(),Ze=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.$a=[],this.zi=i,this.Fa=e,this.Ua=n,this.qa=s}return(0,f.Z)(t,[{key:"Ha",value:function(t,i){if(t<i)throw new Error("high < low");var e=this.zi.Bt(),n=(t-i)*this.Ya()/e,s=new xe(this.Fa,[2,2.5,2]),h=new xe(this.Fa,[2,2,2.5]),r=new xe(this.Fa,[2.5,2,2]),a=[];return a.push(s.Ha(t,i,n),h.Ha(t,i,n),r.Ha(t,i,n)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],e=1;e<t.length;++e)t[e]<i&&(i=t[e]);return i}(a)}},{key:"Xa",value:function(){var t=this.zi,i=t.Ct();if(null!==i){var e=t.Bt(),n=this.Ua(e-1,i),s=this.Ua(0,i),h=this.zi.W().entireTextOnly?this.Ka()/2:0,r=h,a=e-1-h,u=Math.max(n,s),l=Math.min(n,s);if(u!==l){for(var o=this.Ha(u,l),c=u%o,f=u>=l?1:-1,v=null,d=0,y=u-(c+=c<0?o:0);y>l;y-=o){var m=this.qa(y,i,!0);null!==v&&Math.abs(m-v)<this.Ya()||m<r||m>a||(d<this.$a.length?(this.$a[d].Aa=m,this.$a[d].Za=t.Ga(y)):this.$a.push({Aa:m,Za:t.Ga(y)}),d++,v=m,t.Ja()&&(o=this.Ha(y*f,l)))}this.$a.length=d}else this.$a=[]}else this.$a=[]}},{key:"La",value:function(){return this.$a}},{key:"Ka",value:function(){return this.zi.P()}},{key:"Ya",value:function(){return Math.ceil(2.5*this.Ka())}}]),t}();function Ce(t){return t.slice().sort((function(t,i){return L(t.Xi())-L(i.Xi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(ze||(ze={}));var Oe=new Tt,Ee=new Et(100,1),Te=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.Qa=0,this.io=null,this.Rh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new U,this.oo=new U,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=Ee,this.vo=Me(null),this.po=i,this._n=e,this.mo=n,this.bo=s,this.wo=new Ze(this,100,this.Mo.bind(this),this.xo.bind(this))}return(0,f.Z)(t,[{key:"xa",value:function(){return this.po}},{key:"W",value:function(){return this._n}},{key:"Eh",value:function(t){if(Y(this._n,t),this.Sa(),void 0!==t.mode&&this.So({Sr:t.mode}),void 0!==t.scaleMargins){var i=B(t.scaleMargins.top),e=B(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(e<0||e>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(e));if(i+e>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+e));this.ko(),this.co=null}}},{key:"yo",value:function(){return this._n.autoScale}},{key:"Ja",value:function(){return 1===this._n.mode}},{key:"fh",value:function(){return 2===this._n.mode}},{key:"Co",value:function(){return 3===this._n.mode}},{key:"Sr",value:function(){return{Nn:this._n.autoScale,To:this._n.invertScale,Sr:this._n.mode}}},{key:"So",value:function(t){var i=this.Sr(),e=null;void 0!==t.Nn&&(this._n.autoScale=t.Nn),void 0!==t.Sr&&(this._n.mode=t.Sr,2!==t.Sr&&3!==t.Sr||(this._n.autoScale=!0),this.so.eo=!1),1===i.Sr&&t.Sr!==i.Sr&&(function(t,i){if(null===t)return!1;var e=we(t.xh(),i),n=we(t.Sh(),i);return isFinite(e)&&isFinite(n)}(this.Rh,this.vo)?null!==(e=Se(this.Rh,this.vo))&&this.Po(e):this._n.autoScale=!0),1===t.Sr&&t.Sr!==i.Sr&&(null!==(e=_e(this.Rh,this.vo))&&this.Po(e));var n=i.Sr!==this._n.mode;n&&(2===i.Sr||this.fh())&&this.Sa(),n&&(3===i.Sr||this.Co())&&this.Sa(),void 0!==t.To&&i.To!==t.To&&(this._n.invertScale=t.To,this.Ro()),this.oo.m(i,this.Sr())}},{key:"Do",value:function(){return this.oo}},{key:"P",value:function(){return this.mo.fontSize}},{key:"Bt",value:function(){return this.Qa}},{key:"Oo",value:function(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}},{key:"Ao",value:function(){if(this.io)return this.io;var t=this.Bt()-this.Vo()-this.Bo();return this.io=t,t}},{key:"Oh",value:function(){return this.Io(),this.Rh}},{key:"Po",value:function(t,i){var e=this.Rh;(i||null===e&&null!==t||null!==e&&!e.gh(t))&&(this.co=null,this.Rh=t)}},{key:"Ei",value:function(){return this.Io(),0===this.Qa||!this.Rh||this.Rh.Ei()}},{key:"zo",value:function(t){return this.To()?t:this.Bt()-1-t}},{key:"Rt",value:function(t,i){return this.fh()?t=me(t,i):this.Co()&&(t=ke(t,i)),this.xo(t,i)}},{key:"Gs",value:function(t,i,e){this.Io();for(var n=this.Bo(),s=L(this.Oh()),h=s.xh(),r=s.Sh(),a=this.Ao()-1,u=this.To(),l=a/(r-h),o=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Lo(),v=o;v<c;v++){var d=t[v],y=d._t;if(!isNaN(y)){var m=y;null!==f&&(m=f(d._t,i));var p=n+l*(m-h),k=u?p:this.Qa-1-p;d.st=k}}}},{key:"ve",value:function(t,i,e){this.Io();for(var n=this.Bo(),s=L(this.Oh()),h=s.xh(),r=s.Sh(),a=this.Ao()-1,u=this.To(),l=a/(r-h),o=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Lo(),v=o;v<c;v++){var d=t[v],y=d.me,m=d.be,p=d.we,k=d.ge;null!==f&&(y=f(d.me,i),m=f(d.be,i),p=f(d.we,i),k=f(d.ge,i));var b=n+l*(y-h),g=u?b:this.Qa-1-b;d.de=g,b=n+l*(m-h),g=u?b:this.Qa-1-b,d._e=g,b=n+l*(p-h),g=u?b:this.Qa-1-b,d.ue=g,b=n+l*(k-h),g=u?b:this.Qa-1-b,d.fe=g}}},{key:"fn",value:function(t,i){var e=this.Mo(t,i);return this.Eo(e,i)}},{key:"Eo",value:function(t,i){var e=t;return this.fh()?e=function(t,i){return i<0&&(t=-t),t/100*i+i}(e,i):this.Co()&&(e=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(e,i)),e}},{key:"Ta",value:function(){return this._o}},{key:"No",value:function(){if(this.uo)return this.uo;for(var t=[],i=0;i<this._o.length;i++){var e=this._o[i];null===e.Xi()&&e.Ki(i+1),t.push(e)}return t=Ce(t),this.uo=t,this.uo}},{key:"Fo",value:function(t){-1===this._o.indexOf(t)&&(this._o.push(t),this.Sa(),this.Wo())}},{key:"jo",value:function(t){var i=this._o.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this._o.splice(i,1),0===this._o.length&&(this.So({Nn:!0}),this.Po(null)),this.Sa(),this.Wo()}},{key:"Ct",value:function(){var t,i=null,e=(0,r.Z)(this._o);try{for(e.s();!(t=e.n()).done;){var n=t.value.Ct();null!==n&&(null===i||n.ia<i.ia)&&(i=n)}}catch(s){e.e(s)}finally{e.f()}return null===i?null:i.Ot}},{key:"To",value:function(){return this._n.invertScale}},{key:"La",value:function(){var t=null===this.Ct();if(null!==this.co&&(t||this.co.Ho===t))return this.co.La;this.wo.Xa();var i=this.wo.La();return this.co={La:i,Ho:t},this.ao.m(),i}},{key:"$o",value:function(){return this.ao}},{key:"Uo",value:function(t){this.fh()||this.Co()||null===this.do&&null===this.no&&(this.Ei()||(this.do=this.Qa-t,this.no=L(this.Oh()).Mh()))}},{key:"qo",value:function(t){if(!this.fh()&&!this.Co()&&null!==this.do){this.So({Nn:!1}),(t=this.Qa-t)<0&&(t=0);var i=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1)),e=L(this.no).Mh();i=Math.max(i,.1),e.yh(i),this.Po(e)}}},{key:"Yo",value:function(){this.fh()||this.Co()||(this.do=null,this.no=null)}},{key:"Xo",value:function(t){this.yo()||null===this.fo&&null===this.no&&(this.Ei()||(this.fo=t,this.no=L(this.Oh()).Mh()))}},{key:"Ko",value:function(t){if(!this.yo()&&null!==this.fo){var i=L(this.Oh()).kh()/(this.Ao()-1),e=t-this.fo;this.To()&&(e*=-1);var n=e*i,s=L(this.no).Mh();s.Ch(n),this.Po(s,!0),this.co=null}}},{key:"Zo",value:function(){this.yo()||null!==this.fo&&(this.fo=null,this.no=null)}},{key:"ca",value:function(){return this.da||this.Sa(),this.da}},{key:"Ni",value:function(t,i){switch(this._n.mode){case 2:return this.Go(me(t,i));case 3:return this.ca().format(ke(t,i));default:return this.Ih(t)}}},{key:"Ga",value:function(t){switch(this._n.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.Ih(t)}}},{key:"Wl",value:function(t){return this.Ih(t,L(this.Jo()).ca())}},{key:"jl",value:function(t,i){return t=me(t,i),this.Go(t,Oe)}},{key:"Qo",value:function(){return this._o}},{key:"t_",value:function(t){this.so={ro:t,eo:!1}}},{key:"Rn",value:function(){this._o.forEach((function(t){return t.Rn()}))}},{key:"Sa",value:function(){this.co=null;var t=this.Jo(),i=100;null!==t&&(i=Math.round(1/t.ua())),this.da=Ee,this.fh()?(this.da=Oe,i=100):this.Co()?(this.da=new Et(100,1),i=100):null!==t&&(this.da=t.ca()),this.wo=new Ze(this,i,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}},{key:"Wo",value:function(){this.uo=null}},{key:"Jo",value:function(){return this._o[0]||null}},{key:"Vo",value:function(){return this.To()?this._n.scaleMargins.bottom*this.Bt()+this.lo:this._n.scaleMargins.top*this.Bt()+this.ho}},{key:"Bo",value:function(){return this.To()?this._n.scaleMargins.top*this.Bt()+this.ho:this._n.scaleMargins.bottom*this.Bt()+this.lo}},{key:"Io",value:function(){this.so.eo||(this.so.eo=!0,this.i_())}},{key:"ko",value:function(){this.io=null}},{key:"xo",value:function(t,i){if(this.Io(),this.Ei())return 0;t=this.Ja()&&t?ge(t,this.vo):t;var e=L(this.Oh()),n=this.Bo()+(this.Ao()-1)*(t-e.xh())/e.kh();return this.zo(n)}},{key:"Mo",value:function(t,i){if(this.Io(),this.Ei())return 0;var e=this.zo(t),n=L(this.Oh()),s=n.xh()+n.kh()*((e-this.Bo())/(this.Ao()-1));return this.Ja()?we(s,this.vo):s}},{key:"Ro",value:function(){this.co=null,this.wo.Xa()}},{key:"i_",value:function(){var t=this.so.ro;if(null!==t){var i,e,n,s=null,h=this.Qo(),a=0,u=0,l=(0,r.Z)(h);try{for(l.s();!(i=l.n()).done;){var o=i.value;if(o.yt()){var c=o.Ct();if(null!==c){var f=o.Rl(t.Rs(),t.ui()),v=f&&f.Oh();if(null!==v){switch(this._n.mode){case 1:v=_e(v,this.vo);break;case 2:v=pe(v,c.Ot);break;case 3:v=be(v,c.Ot)}if(s=null===s?v:s.Jn(L(v)),null!==f){var d=f.Ah();null!==d&&(a=Math.max(a,d.above),u=Math.max(a,d.below))}}}}}}catch(g){l.e(g)}finally{l.f()}if(a===this.ho&&u===this.lo||(this.ho=a,this.lo=u,this.co=null,this.ko()),null!==s){if(s.xh()===s.Sh()){var y=this.Jo(),m=5*(null===y||this.fh()||this.Co()?1:y.ua());this.Ja()&&(s=Se(s,this.vo)),s=new Fi(s.xh()-m,s.Sh()+m),this.Ja()&&(s=_e(s,this.vo))}if(this.Ja()){var p=Se(s,this.vo),k=Me(p);if(e=k,n=this.vo,e.Ea!==n.Ea||e.Na!==n.Na){var b=null!==this.no?Se(this.no,this.vo):null;this.vo=k,s=_e(p,k),null!==b&&(this.no=_e(b,k))}}this.Po(s)}else null===this.Rh&&(this.Po(new Fi(-.5,.5)),this.vo=Me(null));this.so.eo=!0}}},{key:"Lo",value:function(){var t=this;return this.fh()?me:this.Co()?ke:this.Ja()?function(i){return ge(i,t.vo)}:null}},{key:"n_",value:function(t,i,e){return void 0===i?(void 0===e&&(e=this.ca()),e.format(t)):i(t)}},{key:"Ih",value:function(t,i){return this.n_(t,this.bo.priceFormatter,i)}},{key:"Go",value:function(t,i){return this.n_(t,this.bo.percentageFormatter,i)}}]),t}(),Ne=function(){function t(i,e){(0,c.Z)(this,t),this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new U,this.wl=i,this.Hi=e,this.l_=new de(this);var n=e.W();this.a_=this.o_("left",n.leftPriceScale),this.__=this.o_("right",n.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(n)}return(0,f.Z)(t,[{key:"c_",value:function(t){if(t.leftPriceScale&&this.a_.Eh(t.leftPriceScale),t.rightPriceScale&&this.__.Eh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales)for(var i=0,e=Array.from(this.s_.values());i<e.length;i++){var n=L(e[i][0].Dt());n.Eh(t.overlayPriceScales),t.localization&&n.Sa()}}},{key:"d_",value:function(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?B(this.s_.get(t))[0].Dt():null}},{key:"S",value:function(){this.$t().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach((function(t){t.S&&t.S()})),this.h_.m()}},{key:"v_",value:function(){return this.r_}},{key:"p_",value:function(t){this.r_=t}},{key:"$t",value:function(){return this.Hi}},{key:"ji",value:function(){return this.e_}},{key:"Bt",value:function(){return this.Qa}},{key:"m_",value:function(t){this.e_=t,this.b_()}},{key:"Oo",value:function(t){var i=this;this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach((function(e){if(i.ur(e)){var n=e.Dt();null!==n&&n.Oo(t)}})),this.b_()}},{key:"Ta",value:function(){return this._o}},{key:"ur",value:function(t){var i=t.Dt();return null===i||this.a_!==i&&this.__!==i}},{key:"Fo",value:function(t,i,e){var n=void 0!==e?e:this.g_().w_+1;this.M_(t,i,n)}},{key:"jo",value:function(t){var i=this._o.indexOf(t);R(-1!==i,"removeDataSource: invalid data source"),this._o.splice(i,1);var e=L(t.Dt()).xa();if(this.s_.has(e)){var n=B(this.s_.get(e)),s=n.indexOf(t);-1!==s&&(n.splice(s,1),0===n.length&&this.s_.delete(e))}var h=t.Dt();h&&h.Ta().indexOf(t)>=0&&h.jo(t),null!==h&&(h.Wo(),this.x_(h)),this.uo=null}},{key:"dr",value:function(t){return t===this.a_?"left":t===this.__?"right":"overlay"}},{key:"S_",value:function(){return this.a_}},{key:"k_",value:function(){return this.__}},{key:"y_",value:function(t,i){t.Uo(i)}},{key:"C_",value:function(t,i){t.qo(i),this.b_()}},{key:"T_",value:function(t){t.Yo()}},{key:"P_",value:function(t,i){t.Xo(i)}},{key:"R_",value:function(t,i){t.Ko(i),this.b_()}},{key:"D_",value:function(t){t.Zo()}},{key:"b_",value:function(){this._o.forEach((function(t){t.Rn()}))}},{key:"dn",value:function(){var t=null;return this.Hi.W().rightPriceScale.visible&&0!==this.__.Ta().length?t=this.__:this.Hi.W().leftPriceScale.visible&&0!==this.a_.Ta().length?t=this.a_:0!==this._o.length&&(t=this._o[0].Dt()),null===t&&(t=this.__),t}},{key:"cr",value:function(){var t=null;return this.Hi.W().rightPriceScale.visible?t=this.__:this.Hi.W().leftPriceScale.visible&&(t=this.a_),t}},{key:"x_",value:function(t){null!==t&&t.yo()&&this.O_(t)}},{key:"A_",value:function(t){var i=this.wl.qs();t.So({Nn:!0}),null!==i&&t.t_(i),this.b_()}},{key:"V_",value:function(){this.O_(this.a_),this.O_(this.__)}},{key:"B_",value:function(){var t=this;this.x_(this.a_),this.x_(this.__),this._o.forEach((function(i){t.ur(i)&&t.x_(i.Dt())})),this.b_(),this.Hi.Nh()}},{key:"No",value:function(){return null===this.uo&&(this.uo=Ce(this._o)),this.uo}},{key:"I_",value:function(){return this.h_}},{key:"z_",value:function(){return this.l_}},{key:"O_",value:function(t){var i=t.Qo();if(i&&i.length>0&&!this.wl.Ei()){var e=this.wl.qs();null!==e&&t.t_(e)}t.Rn()}},{key:"g_",value:function(){var t=this.No();if(0===t.length)return{L_:0,w_:0};for(var i=0,e=0,n=0;n<t.length;n++){var s=t[n].Xi();null!==s&&(s<i&&(i=s),s>e&&(e=s))}return{L_:i,w_:e}}},{key:"M_",value:function(t,i,e){var n=this.d_(i);if(null===n&&(n=this.o_(i,this.Hi.W().overlayPriceScales)),this._o.push(t),!Zt(i)){var s=this.s_.get(i)||[];s.push(t),this.s_.set(i,s)}n.Fo(t),t.Zi(n),t.Ki(e),this.x_(n),this.uo=null}},{key:"u_",value:function(t,i,e){i.Sr!==e.Sr&&this.O_(t)}},{key:"o_",value:function(t,i){var e=Object.assign({visible:!0,autoScale:!0},J(i)),n=new Te(t,e,this.Hi.W().layout,this.Hi.W().localization);return n.Oo(this.Bt()),n}}]),t}(),Re=function(){function t(i,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;(0,c.Z)(this,t),this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.E_=i,this.N_=e,this.Je=n}return(0,f.Z)(t,[{key:"F_",value:function(t){var i=t.time,e=this.N_.cacheKey(i),n=this.Ge.get(e);if(void 0!==n)return n.W_;if(this.Ye===this.Je){var s=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(B(s)),this.Ke++,this.Ye--}var h=this.E_(t);return this.Ge.set(e,{W_:h,nr:this.Xe}),this.Ze.set(this.Xe,e),this.Ye++,this.Xe++,h}}]),t}(),Be=function(){function t(i,e){(0,c.Z)(this,t),R(i<=e,"right should be >= left"),this.j_=i,this.H_=e}return(0,f.Z)(t,[{key:"Rs",value:function(){return this.j_}},{key:"ui",value:function(){return this.H_}},{key:"U_",value:function(){return this.H_-this.j_+1}},{key:"Yr",value:function(t){return this.j_<=t&&t<=this.H_}},{key:"gh",value:function(t){return this.j_===t.Rs()&&this.H_===t.ui()}}]),t}();function Le(t,i){return null===t||null===i?t===i:t.gh(i)}var Pe=function(){function t(){(0,c.Z)(this,t),this.q_=new Map,this.Ge=null,this.Y_=!1}return(0,f.Z)(t,[{key:"X_",value:function(t){this.Y_=t,this.Ge=null}},{key:"K_",value:function(t,i){this.Z_(i),this.Ge=null;for(var e=i;e<t.length;++e){var n=t[e],s=this.q_.get(n.timeWeight);void 0===s&&(s=[],this.q_.set(n.timeWeight,s)),s.push({index:e,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}},{key:"G_",value:function(t,i){var e=Math.ceil(i/t);return null!==this.Ge&&this.Ge.J_===e||(this.Ge={La:this.Q_(e),J_:e}),this.Ge.La}},{key:"Z_",value:function(t){if(0!==t){var i=[];this.q_.forEach((function(e,n){t<=e[0].index?i.push(n):e.splice(Qt(e,t,(function(i){return i.index<t})),1/0)}));for(var e=0,n=i;e<n.length;e++){var s=n[e];this.q_.delete(s)}}else this.q_.clear()}},{key:"Q_",value:function(t){var i,e=[],n=(0,r.Z)(Array.from(this.q_.keys()).sort((function(t,i){return i-t})));try{for(n.s();!(i=n.n()).done;){var s=i.value;if(this.q_.get(s)){var h=e;e=[];for(var a=h.length,u=0,l=B(this.q_.get(s)),o=l.length,c=1/0,f=-1/0,v=0;v<o;v++){for(var d=l[v],y=d.index;u<a;){var m=h[u],p=m.index;if(!(p<y)){c=p;break}u++,e.push(m),f=p,c=1/0}if(c-y>=t&&y-f>=t)e.push(d),f=y;else if(this.Y_)return h}for(;u<a;u++)e.push(h[u])}}}catch(k){n.e(k)}finally{n.f()}return e}}]),t}(),Ie=function(){function t(i){(0,c.Z)(this,t),this.tu=i}return(0,f.Z)(t,[{key:"iu",value:function(){return null===this.tu?null:new Be(Math.floor(this.tu.Rs()),Math.ceil(this.tu.ui()))}},{key:"nu",value:function(){return this.tu}}],[{key:"su",value:function(){return new t(null)}}]),t}();function We(t,i){return t.weight>i.weight?t:i}var Ve,De,Ae,je,Fe,He=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new Pe,this.lu=new Map,this.au=Ie.su(),this.ou=!0,this._u=new U,this.uu=new U,this.cu=new U,this.du=null,this.fu=null,this.vu=[],this._n=e,this.bo=n,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Hi=i,this.N_=s,this.bu(),this.hu.X_(e.uniformDistribution)}return(0,f.Z)(t,[{key:"W",value:function(){return this._n}},{key:"wu",value:function(t){Y(this.bo,t),this.gu(),this.bu()}},{key:"Eh",value:function(t,i){var e;Y(this._n,t),this._n.fixLeftEdge&&this.Mu(),this._n.fixRightEdge&&this.xu(),void 0!==t.barSpacing&&this.Hi.Kn(t.barSpacing),void 0!==t.rightOffset&&this.Hi.Zn(t.rightOffset),void 0!==t.minBarSpacing&&this.Hi.Kn(null!==(e=t.barSpacing)&&void 0!==e?e:this.mu),this.gu(),this.bu(),this.cu.m()}},{key:"vn",value:function(t){var i,e;return null!==(e=null===(i=this.ru[t])||void 0===i?void 0:i.time)&&void 0!==e?e:null}},{key:"$i",value:function(t){var i;return null!==(i=this.ru[t])&&void 0!==i?i:null}},{key:"ya",value:function(t,i){var e=this;if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return i?this.ru.length-1:null;var n=Qt(this.ru,this.N_.key(t),(function(t,i){return e.N_.key(t.time)<i}));return this.N_.key(t)<this.N_.key(this.ru[n].time)?i?n:null:n}},{key:"Ei",value:function(){return 0===this.e_||0===this.ru.length||null===this.eu}},{key:"ka",value:function(){return this.ru.length>0}},{key:"qs",value:function(){return this.Su(),this.au.iu()}},{key:"ku",value:function(){return this.Su(),this.au.nu()}},{key:"yu",value:function(){var t=this.qs();if(null===t)return null;var i={from:t.Rs(),to:t.ui()};return this.Cu(i)}},{key:"Cu",value:function(t){var i=Math.round(t.from),e=Math.round(t.to),n=L(this.Tu()),s=L(this.Pu());return{from:L(this.$i(Math.max(n,i))),to:L(this.$i(Math.min(s,e)))}}},{key:"Ru",value:function(t){return{from:L(this.ya(t.from,!0)),to:L(this.ya(t.to,!0))}}},{key:"ji",value:function(){return this.e_}},{key:"m_",value:function(t){if(isFinite(t)&&!(t<=0)&&this.e_!==t){var i=this.ku(),e=this.e_;if(this.e_=t,this.ou=!0,this._n.lockVisibleTimeRangeOnResize&&0!==e){var n=this.mu*t/e;this.mu=n}if(this._n.fixLeftEdge&&null!==i&&i.Rs()<=0){var s=e-t;this.pu-=Math.round(s/this.mu)+1,this.ou=!0}this.Du(),this.Ou()}}},{key:"It",value:function(t){if(this.Ei()||!X(t))return 0;var i=this.Au()+this.pu-t;return this.e_-(i+.5)*this.mu-1}},{key:"Zs",value:function(t,i){for(var e=this.Au(),n=void 0===i?0:i.from,s=void 0===i?t.length:i.to,h=n;h<s;h++){var r=t[h].ot,a=e+this.pu-r,u=this.e_-(a+.5)*this.mu-1;t[h].nt=u}}},{key:"Vu",value:function(t){return Math.ceil(this.Bu(t))}},{key:"Zn",value:function(t){this.ou=!0,this.pu=t,this.Ou(),this.Hi.Iu(),this.Hi.Nh()}},{key:"ee",value:function(){return this.mu}},{key:"Kn",value:function(t){this.zu(t),this.Ou(),this.Hi.Iu(),this.Hi.Nh()}},{key:"Lu",value:function(){return this.pu}},{key:"La",value:function(){if(this.Ei())return null;if(null!==this.fu)return this.fu;var t,i=this.mu,e=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),n=Math.round(e/i),s=L(this.qs()),h=Math.max(s.Rs(),s.Rs()-n),a=Math.max(s.ui(),s.ui()-n),u=this.hu.G_(i,e),l=this.Tu()+n,o=this.Pu()-n,c=this.Eu(),f=this._n.fixLeftEdge||c,v=this._n.fixRightEdge||c,d=0,y=(0,r.Z)(u);try{for(y.s();!(t=y.n()).done;){var m=t.value;if(h<=m.index&&m.index<=a){var p=void 0;d<this.vu.length?((p=this.vu[d]).coord=this.It(m.index),p.label=this.Nu(m),p.weight=m.weight):(p={needAlignCoordinate:!1,coord:this.It(m.index),label:this.Nu(m),weight:m.weight},this.vu.push(p)),this.mu>e/2&&!c?p.needAlignCoordinate=!1:p.needAlignCoordinate=f&&m.index<=l||v&&m.index>=o,d++}}}catch(k){y.e(k)}finally{y.f()}return this.vu.length=d,this.fu=this.vu,this.vu}},{key:"Fu",value:function(){this.ou=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}},{key:"Wu",value:function(t){this.ou=!0,this.eu=t,this.Ou(),this.Mu()}},{key:"ju",value:function(t,i){var e=this.Bu(t),n=this.ee(),s=n+i*(n/10);this.Kn(s),this._n.rightBarStaysOnScroll||this.Zn(this.Lu()+(e-this.Bu(t)))}},{key:"Uo",value:function(t){this.fo&&this.Zo(),null===this.do&&null===this.du&&(this.Ei()||(this.do=t,this.Hu()))}},{key:"qo",value:function(t){if(null!==this.du){var i=Vt(this.e_-t,0,this.e_),e=Vt(this.e_-L(this.do),0,this.e_);0!==i&&0!==e&&this.Kn(this.du.ee*i/e)}}},{key:"Yo",value:function(){null!==this.do&&(this.do=null,this.$u())}},{key:"Xo",value:function(t){null===this.fo&&null===this.du&&(this.Ei()||(this.fo=t,this.Hu()))}},{key:"Ko",value:function(t){if(null!==this.fo){var i=(this.fo-t)/this.ee();this.pu=L(this.du).Lu+i,this.ou=!0,this.Ou()}}},{key:"Zo",value:function(){null!==this.fo&&(this.fo=null,this.$u())}},{key:"Uu",value:function(){this.qu(this._n.rightOffset)}},{key:"qu",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.pu,n=performance.now();this.Hi.qn({Yu:function(t){return(t-n)/i>=1},Xu:function(s){var h=(s-n)/i;return h>=1?t:e+(t-e)*h}})}},{key:"bt",value:function(t,i){this.ou=!0,this.ru=t,this.hu.K_(t,i),this.Ou()}},{key:"Ku",value:function(){return this._u}},{key:"Zu",value:function(){return this.uu}},{key:"Gu",value:function(){return this.cu}},{key:"Au",value:function(){return this.eu||0}},{key:"Ju",value:function(t){var i=t.U_();this.zu(this.e_/i),this.pu=t.ui()-this.Au(),this.Ou(),this.ou=!0,this.Hi.Iu(),this.Hi.Nh()}},{key:"Qu",value:function(){var t=this.Tu(),i=this.Pu();null!==t&&null!==i&&this.Ju(new Be(t,i+this._n.rightOffset))}},{key:"tc",value:function(t){var i=new Be(t.from,t.to);this.Ju(i)}},{key:"Ui",value:function(t){return void 0!==this.bo.timeFormatter?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}},{key:"Eu",value:function(){var t=this.Hi.W(),i=t.handleScroll,e=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}},{key:"Tu",value:function(){return 0===this.ru.length?null:0}},{key:"Pu",value:function(){return 0===this.ru.length?null:this.ru.length-1}},{key:"ic",value:function(t){return(this.e_-1-t)/this.mu}},{key:"Bu",value:function(t){var i=this.ic(t),e=this.Au()+this.pu-i;return Math.round(1e6*e)/1e6}},{key:"zu",value:function(t){var i=this.mu;this.mu=t,this.Du(),i!==this.mu&&(this.ou=!0,this.nc())}},{key:"Su",value:function(){if(this.ou)if(this.ou=!1,this.Ei())this.sc(Ie.su());else{var t=this.Au(),i=this.e_/this.mu,e=this.pu+t,n=new Be(e-i+1,e);this.sc(new Ie(n))}}},{key:"Du",value:function(){var t=this.ec();if(this.mu<t&&(this.mu=t,this.ou=!0),0!==this.e_){var i=.5*this.e_;this.mu>i&&(this.mu=i,this.ou=!0)}}},{key:"ec",value:function(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&0!==this.ru.length?this.e_/this.ru.length:this._n.minBarSpacing}},{key:"Ou",value:function(){var t=this.rc();this.pu>t&&(this.pu=t,this.ou=!0);var i=this.hc();null!==i&&this.pu<i&&(this.pu=i,this.ou=!0)}},{key:"hc",value:function(){var t=this.Tu(),i=this.eu;return null===t||null===i?null:t-i-1+(this._n.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}},{key:"rc",value:function(){return this._n.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}},{key:"Hu",value:function(){this.du={ee:this.ee(),Lu:this.Lu()}}},{key:"$u",value:function(){this.du=null}},{key:"Nu",value:function(t){var i=this,e=this.lu.get(t.weight);return void 0===e&&(e=new Re((function(t){return i.lc(t)}),this.N_),this.lu.set(t.weight,e)),e.F_(t)}},{key:"lc",value:function(t){return this.N_.formatTickmark(t,this.bo)}},{key:"sc",value:function(t){var i=this.au;this.au=t,Le(i.iu(),this.au.iu())||this._u.m(),Le(i.nu(),this.au.nu())||this.uu.m(),this.nc()}},{key:"nc",value:function(){this.fu=null}},{key:"gu",value:function(){this.nc(),this.lu.clear()}},{key:"bu",value:function(){this.N_.updateFormatter(this.bo)}},{key:"Mu",value:function(){if(this._n.fixLeftEdge){var t=this.Tu();if(null!==t){var i=this.qs();if(null!==i){var e=i.Rs()-t;if(e<0){var n=this.pu-e-1;this.Zn(n)}this.Du()}}}}},{key:"xu",value:function(){this.Ou(),this.Du()}}]),t}(),$e=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"K",value:function(t,i,e){var n=this;t.useMediaCoordinateSpace((function(t){return n.Z(t,i,e)}))}},{key:"fl",value:function(t,i,e){var n=this;t.useMediaCoordinateSpace((function(t){return n.ac(t,i,e)}))}},{key:"ac",value:function(t,i,e){}}]),t}(),Ue=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t){var n;return(0,c.Z)(this,e),(n=i.call(this)).oc=new Map,n.zt=t,n}return(0,f.Z)(e,[{key:"Z",value:function(t){}},{key:"ac",value:function(t){if(this.zt.yt){var i,e=t.context,n=t.mediaSize,s=0,h=(0,r.Z)(this.zt._c);try{for(h.s();!(i=h.n()).done;){var a=i.value;if(0!==a.Zt.length){e.font=a.R;var u=this.uc(e,a.Zt);u>n.width?a.ju=n.width/u:a.ju=1,s+=a.cc*a.ju}}}catch(d){h.e(d)}finally{h.f()}var l=0;switch(this.zt.dc){case"top":l=0;break;case"center":l=Math.max((n.height-s)/2,0);break;case"bottom":l=Math.max(n.height-s,0)}e.fillStyle=this.zt.O;var o,c=(0,r.Z)(this.zt._c);try{for(c.s();!(o=c.n()).done;){var f=o.value;e.save();var v=0;switch(this.zt.fc){case"left":e.textAlign="left",v=f.cc/2;break;case"center":e.textAlign="center",v=n.width/2;break;case"right":e.textAlign="right",v=n.width-1-f.cc/2}e.translate(v,l),e.textBaseline="top",e.font=f.R,e.scale(f.ju,f.ju),e.fillText(f.Zt,0,f.vc),e.restore(),l+=f.cc*f.ju}}catch(d){c.e(d)}finally{c.f()}}}},{key:"uc",value:function(t,i){var e=this.mc(t.font),n=e.get(i);return void 0===n&&(n=t.measureText(i).width,e.set(i,n)),n}},{key:"mc",value:function(t){var i=this.oc.get(t);return void 0===i&&(i=new Map,this.oc.set(t,i)),i}}]),e}($e),Ye=function(){function t(i){(0,c.Z)(this,t),this.ft=!0,this.Ft={yt:!1,O:"",_c:[],dc:"center",fc:"center"},this.Wt=new Ue(this.Ft),this.jt=i}return(0,f.Z)(t,[{key:"bt",value:function(){this.ft=!0}},{key:"gt",value:function(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}},{key:"Mt",value:function(){var t=this.jt.W(),i=this.Ft;i.yt=t.visible,i.yt&&(i.O=t.color,i.fc=t.horzAlign,i.dc=t.vertAlign,i._c=[{Zt:t.text,R:et(t.fontSize,t.fontFamily,t.fontStyle),cc:1.2*t.fontSize,vc:0,ju:0}])}}]),t}(),Qe=function(t){(0,u.Z)(e,t);var i=(0,l.Z)(e);function e(t,n){var s;return(0,c.Z)(this,e),(s=i.call(this))._n=n,s.mn=new Ye((0,a.Z)(s)),s}return(0,f.Z)(e,[{key:"Tn",value:function(){return[]}},{key:"Cn",value:function(){return[this.mn]}},{key:"W",value:function(){return this._n}},{key:"Rn",value:function(){this.mn.bt()}}]),e}(zt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(Ve||(Ve={}));var Xe=function(){function t(i,e,n){(0,c.Z)(this,t),this.bc=[],this.wc=[],this.e_=0,this.gc=null,this.Mc=new U,this.xc=new U,this.Sc=null,this.kc=i,this._n=e,this.N_=n,this.yc=new nt(this),this.wl=new He(this,e.timeScale,this._n.localization,n),this.vt=new xt(this,e.crosshair),this.Cc=new ce(e.crosshair),this.Tc=new Qe(this,e.watermark),this.Pc(),this.bc[0].p_(2e3),this.Rc=this.Dc(0),this.Oc=this.Dc(1)}return(0,f.Z)(t,[{key:"$l",value:function(){this.Ac(Ct.ns())}},{key:"Nh",value:function(){this.Ac(Ct.ts())}},{key:"sa",value:function(){this.Ac(new Ct(1))}},{key:"Ul",value:function(t){var i=this.Vc(t);this.Ac(i)}},{key:"Bc",value:function(){return this.gc}},{key:"Ic",value:function(t){var i=this.gc;this.gc=t,null!==i&&this.Ul(i.zc),null!==t&&this.Ul(t.zc)}},{key:"W",value:function(){return this._n}},{key:"Eh",value:function(t){Y(this._n,t),this.bc.forEach((function(i){return i.c_(t)})),void 0!==t.timeScale&&this.wl.Eh(t.timeScale),void 0!==t.localization&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Mc.m(),this.Rc=this.Dc(0),this.Oc=this.Dc(1),this.$l()}},{key:"Lc",value:function(t,i){if("left"!==t)if("right"!==t){var e=this.Ec(t);null!==e&&(e.Dt.Eh(i),this.Mc.m())}else this.Eh({rightPriceScale:i});else this.Eh({leftPriceScale:i})}},{key:"Ec",value:function(t){var i,e=(0,r.Z)(this.bc);try{for(e.s();!(i=e.n()).done;){var n=i.value,s=n.d_(t);if(null!==s)return{Ht:n,Dt:s}}}catch(h){e.e(h)}finally{e.f()}return null}},{key:"St",value:function(){return this.wl}},{key:"Nc",value:function(){return this.bc}},{key:"Fc",value:function(){return this.Tc}},{key:"Wc",value:function(){return this.vt}},{key:"jc",value:function(){return this.xc}},{key:"Hc",value:function(t,i){t.Oo(i),this.Iu()}},{key:"m_",value:function(t){this.e_=t,this.wl.m_(this.e_),this.bc.forEach((function(i){return i.m_(t)})),this.Iu()}},{key:"Pc",value:function(t){var i=new Ne(this.wl,this);void 0!==t?this.bc.splice(t,0,i):this.bc.push(i);var e=void 0===t?this.bc.length-1:t,n=Ct.ns();return n.Ln(e,{En:0,Nn:!0}),this.Ac(n),i}},{key:"y_",value:function(t,i,e){t.y_(i,e)}},{key:"C_",value:function(t,i,e){t.C_(i,e),this.ql(),this.Ac(this.$c(t,2))}},{key:"T_",value:function(t,i){t.T_(i),this.Ac(this.$c(t,2))}},{key:"P_",value:function(t,i,e){i.yo()||t.P_(i,e)}},{key:"R_",value:function(t,i,e){i.yo()||(t.R_(i,e),this.ql(),this.Ac(this.$c(t,2)))}},{key:"D_",value:function(t,i){i.yo()||(t.D_(i),this.Ac(this.$c(t,2)))}},{key:"A_",value:function(t,i){t.A_(i),this.Ac(this.$c(t,2))}},{key:"Uc",value:function(t){this.wl.Uo(t)}},{key:"qc",value:function(t,i){var e=this.St();if(!e.Ei()&&0!==i){var n=e.ji();t=Math.max(1,Math.min(t,n)),e.ju(t,i),this.Iu()}}},{key:"Yc",value:function(t){this.Xc(0),this.Kc(t),this.Zc()}},{key:"Gc",value:function(t){this.wl.qo(t),this.Iu()}},{key:"Jc",value:function(){this.wl.Yo(),this.Nh()}},{key:"Xc",value:function(t){this.wl.Xo(t)}},{key:"Kc",value:function(t){this.wl.Ko(t),this.Iu()}},{key:"Zc",value:function(){this.wl.Zo(),this.Nh()}},{key:"wt",value:function(){return this.wc}},{key:"Qc",value:function(t,i,e,n,s){this.vt.bn(t,i);var h=NaN,r=this.wl.Vu(t),a=this.wl.qs();null!==a&&(r=Math.min(Math.max(a.Rs(),r),a.ui()));var u=n.dn(),l=u.Ct();null!==l&&(h=u.fn(i,l)),h=this.Cc.Ca(h,r,n),this.vt.xn(r,h,n),this.sa(),s||this.xc.m(this.vt.xt(),{x:t,y:i},e)}},{key:"td",value:function(t,i,e){var n=e.dn(),s=n.Ct(),h=n.Rt(t,L(s)),r=this.wl.ya(i,!0),a=this.wl.It(L(r));this.Qc(a,h,null,e,!0)}},{key:"nd",value:function(t){this.Wc().kn(),this.sa(),t||this.xc.m(null,null,null)}},{key:"ql",value:function(){var t=this.vt.Ht();if(null!==t){var i=this.vt.gn(),e=this.vt.Mn();this.Qc(i,e,null,t)}this.vt.Rn()}},{key:"sd",value:function(t,i,e){var n=this.wl.vn(0);void 0!==i&&void 0!==e&&this.wl.bt(i,e);var s=this.wl.vn(0),h=this.wl.Au(),r=this.wl.qs();if(null!==r&&null!==n&&null!==s){var a=r.Yr(h),u=this.N_.key(n)>this.N_.key(s),l=null!==t&&t>h&&!u,o=this.wl.W().allowShiftVisibleRangeOnWhitespaceReplacement,c=a&&(!(void 0===e)||o)&&this.wl.W().shiftVisibleRangeOnNewBar;if(l&&!c){var f=t-h;this.wl.Zn(this.wl.Lu()-f)}}this.wl.Wu(t)}},{key:"Kl",value:function(t){null!==t&&t.B_()}},{key:"_r",value:function(t){var i=this.bc.find((function(i){return i.No().includes(t)}));return void 0===i?null:i}},{key:"Iu",value:function(){this.Tc.Rn(),this.bc.forEach((function(t){return t.B_()})),this.ql()}},{key:"S",value:function(){this.bc.forEach((function(t){return t.S()})),this.bc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}},{key:"ed",value:function(){return this.yc}},{key:"vr",value:function(){return this.yc.W()}},{key:"f_",value:function(){return this.Mc}},{key:"rd",value:function(t,i,e){var n=this.bc[0],s=this.hd(i,t,n,e);return this.wc.push(s),1===this.wc.length?this.$l():this.Nh(),s}},{key:"ld",value:function(t){var i=this._r(t),e=this.wc.indexOf(t);R(-1!==e,"Series not found"),this.wc.splice(e,1),L(i).jo(t),t.S&&t.S()}},{key:"Hl",value:function(t,i){var e=L(this._r(t));e.jo(t);var n=this.Ec(i);if(null===n){var s=t.Xi();e.Fo(t,i,s)}else{var h=n.Ht===e?t.Xi():void 0;n.Ht.Fo(t,i,h)}}},{key:"Qu",value:function(){var t=Ct.ts();t.jn(),this.Ac(t)}},{key:"ad",value:function(t){var i=Ct.ts();i.Un(t),this.Ac(i)}},{key:"Xn",value:function(){var t=Ct.ts();t.Xn(),this.Ac(t)}},{key:"Kn",value:function(t){var i=Ct.ts();i.Kn(t),this.Ac(i)}},{key:"Zn",value:function(t){var i=Ct.ts();i.Zn(t),this.Ac(i)}},{key:"qn",value:function(t){var i=Ct.ts();i.qn(t),this.Ac(i)}},{key:"Hn",value:function(){var t=Ct.ts();t.Hn(),this.Ac(t)}},{key:"od",value:function(){return this._n.rightPriceScale.visible?"right":"left"}},{key:"_d",value:function(){return this.Oc}},{key:"q",value:function(){return this.Rc}},{key:"Vt",value:function(t){var i=this.Oc,e=this.Rc;if(i===e)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Sc||this.Sc.ys!==e||this.Sc.Cs!==i)this.Sc={ys:e,Cs:i,ud:new Map};else{var s=this.Sc.ud.get(t);if(void 0!==s)return s}var h=function(t,i,e){var s=H(t),h=(0,n.Z)(s,4),r=h[0],a=h[1],u=h[2],l=h[3],o=H(i),c=(0,n.Z)(o,4),f=c[0],v=c[1],d=c[2],y=c[3],m=[W(r+e*(f-r)),W(a+e*(v-a)),W(u+e*(d-u)),V(l+e*(y-l))];return"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3],")")}(e,i,t/100);return this.Sc.ud.set(t,h),h}},{key:"$c",value:function(t,i){var e=new Ct(i);if(null!==t){var n=this.bc.indexOf(t);e.Ln(n,{En:i})}return e}},{key:"Vc",value:function(t,i){return void 0===i&&(i=2),this.$c(this._r(t),i)}},{key:"Ac",value:function(t){this.kc&&this.kc(t),this.bc.forEach((function(t){return t.z_().Fh().bt()}))}},{key:"hd",value:function(t,i,e,n){var s=new oe(this,t,i,e,n),h=void 0!==t.priceScaleId?t.priceScaleId:this.od();return e.Fo(s,h),Zt(h)||s.Eh(t),s}},{key:"Dc",value:function(t){var i=this._n.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color}}]),t}();function qe(t){return!Q(t)&&!q(t)}function Ge(t){return Q(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(De||(De={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Ae||(Ae={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(je||(je={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Fe||(Fe={}));var Je=function(t){return t.getUTCFullYear()};var Ke=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";(0,c.Z)(this,t),this.dd=i,this.fd=e}return(0,f.Z)(t,[{key:"F_",value:function(t){return function(t,i,e){return i.replace(/yyyy/g,function(t){return Ot(Je(t),4)}(t)).replace(/yy/g,function(t){return Ot(Je(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,e)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,e)).replace(/MM/g,function(t){return Ot(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return Ot(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.dd,this.fd)}}]),t}(),tn=function(){function t(i){(0,c.Z)(this,t),this.vd=i||"%h:%m:%s"}return(0,f.Z)(t,[{key:"F_",value:function(t){return this.vd.replace("%h",Ot(t.getUTCHours(),2)).replace("%m",Ot(t.getUTCMinutes(),2)).replace("%s",Ot(t.getUTCSeconds(),2))}}]),t}(),en={pd:"yyyy-MM-dd",md:"%h:%m:%s",bd:" ",wd:"default"},nn=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)(this,t);var e=Object.assign(Object.assign({},en),i);this.gd=new Ke(e.pd,e.wd),this.Md=new tn(e.md),this.xd=e.bd}return(0,f.Z)(t,[{key:"F_",value:function(t){return"".concat(this.gd.F_(t)).concat(this.xd).concat(this.Md.F_(t))}}]),t}();function sn(t){return 60*t*60*1e3}function hn(t){return 60*t*1e3}var rn=[{Sd:(1,1e3),kd:10},{Sd:hn(1),kd:20},{Sd:hn(5),kd:21},{Sd:hn(30),kd:22},{Sd:sn(1),kd:30},{Sd:sn(3),kd:31},{Sd:sn(6),kd:32},{Sd:sn(12),kd:33}];function an(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var e=rn.length-1;e>=0;--e)if(Math.floor(i.getTime()/rn[e].Sd)!==Math.floor(t.getTime()/rn[e].Sd))return rn[e].kd;return 0}function un(t){var i=t;if(q(t)&&(i=on(t)),!qe(i))throw new Error("time must be of type BusinessDay");var e=new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0));return{yd:Math.round(e.getTime()/1e3),Cd:i}}function ln(t){if(!Ge(t))throw new Error("time must be of type isUTCTimestamp");return{yd:t}}function on(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function cn(t){q(t.time)&&(t.time=on(t.time))}var fn=function(){function t(){(0,c.Z)(this,t)}return(0,f.Z)(t,[{key:"options",value:function(){return this._n}},{key:"setOptions",value:function(t){this._n=t,this.updateFormatter(t.localization)}},{key:"preprocessData",value:function(t){Array.isArray(t)?function(t){t.forEach(cn)}(t):cn(t)}},{key:"createConverterToInternalObj",value:function(t){return L(function(t){return 0===t.length?null:qe(t[0].time)||q(t[0].time)?un:ln}(t))}},{key:"key",value:function(t){return"object"==typeof t&&"yd"in t?t.yd:this.key(this.convertHorzItemToInternal(t))}},{key:"cacheKey",value:function(t){var i=t;return void 0===i.Cd?new Date(1e3*i.yd).getTime():new Date(Date.UTC(i.Cd.year,i.Cd.month-1,i.Cd.day)).getTime()}},{key:"convertHorzItemToInternal",value:function(t){return Ge(i=t)?ln(i):qe(i)?un(i):un(on(i));var i}},{key:"updateFormatter",value:function(t){if(this._n){var i=t.dateFormat;this._n.timeScale.timeVisible?this.Td=new nn({pd:i,md:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",bd:"   ",wd:t.locale}):this.Td=new Ke(i,t.locale)}}},{key:"formatHorzItem",value:function(t){var i=t;return this.Td.F_(new Date(1e3*i.yd))}},{key:"formatTickmark",value:function(t,i){var e=function(t,i,e){switch(t){case 0:case 10:return i?e?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),n=this._n.timeScale;if(void 0!==n.tickMarkFormatter){var s=n.tickMarkFormatter(t.originalTime,e,i.locale);if(null!==s)return s}return function(t,i,e){var n={};switch(i){case 0:n.year="numeric";break;case 1:n.month="short";break;case 2:n.day="numeric";break;case 3:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case 4:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit"}var s=void 0===t.Cd?new Date(1e3*t.yd):new Date(Date.UTC(t.Cd.year,t.Cd.month-1,t.Cd.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(e,n)}(t.time,e,i.locale)}},{key:"maxTickMarkWeight",value:function(t){var i=t.reduce(We,t[0]).weight;return i>30&&i<50&&(i=30),i}},{key:"fillWeightsForPoints",value:function(t,i){!function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t.length){for(var e=0===i?null:t[i-1].time.yd,n=null!==e?new Date(1e3*e):null,s=0,h=i;h<t.length;++h){var r=t[h],a=new Date(1e3*r.time.yd);null!==n&&(r.timeWeight=an(a,n)),s+=r.time.yd-(e||r.time.yd),e=r.time.yd,n=a}if(0===i&&t.length>1){var u=Math.ceil(s/(t.length-1)),l=new Date(1e3*(t[0].time.yd-u));t[0].timeWeight=an(new Date(1e3*t[0].time.yd),l)}}}(t,i)}}],[{key:"Pd",value:function(t){return Y({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}]),t}(),vn="undefined"!=typeof window;function dn(){return!!vn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function yn(){return!!vn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function mn(t){return t+t%2}function pn(t,i){return t.Rd-i.Rd}function kn(t,i,e){var n=(t.Rd-i.Rd)/(t.ot-i.ot);return Math.sign(n)*Math.min(Math.abs(n),e)}var bn=function(){function t(i,e,n,s){(0,c.Z)(this,t),this.Dd=null,this.Od=null,this.Ad=null,this.Vd=null,this.Bd=null,this.Id=0,this.zd=0,this.Ld=i,this.Ed=e,this.Nd=n,this.ss=s}return(0,f.Z)(t,[{key:"Fd",value:function(t,i){if(null!==this.Dd){if(this.Dd.ot===i)return void(this.Dd.Rd=t);if(Math.abs(this.Dd.Rd-t)<this.ss)return}this.Vd=this.Ad,this.Ad=this.Od,this.Od=this.Dd,this.Dd={ot:i,Rd:t}}},{key:"Pr",value:function(t,i){if(null!==this.Dd&&null!==this.Od&&!(i-this.Dd.ot>50)){var e=0,n=kn(this.Dd,this.Od,this.Ed),s=pn(this.Dd,this.Od),h=[n],r=[s];if(e+=s,null!==this.Ad){var a=kn(this.Od,this.Ad,this.Ed);if(Math.sign(a)===Math.sign(n)){var u=pn(this.Od,this.Ad);if(h.push(a),r.push(u),e+=u,null!==this.Vd){var l=kn(this.Ad,this.Vd,this.Ed);if(Math.sign(l)===Math.sign(n)){var o=pn(this.Ad,this.Vd);h.push(l),r.push(o),e+=o}}}}for(var c=0,f=0;f<h.length;++f)c+=r[f]/e*h[f];Math.abs(c)<this.Ld||(this.Bd={Rd:t,ot:i},this.zd=c,this.Id=function(t,i){var e=Math.log(i);return Math.log(1*e/-t)/e}(Math.abs(c),this.Nd))}}},{key:"Xu",value:function(t){var i=L(this.Bd),e=t-i.ot;return i.Rd+this.zd*(Math.pow(this.Nd,e)-1)/Math.log(this.Nd)}},{key:"Yu",value:function(t){return null===this.Bd||this.Wd(t)===this.Id}},{key:"Wd",value:function(t){var i=t-L(this.Bd).ot;return Math.min(i,this.Id)}}]),t}();function gn(t,i){var e=L(t.ownerDocument).createElement("canvas");t.appendChild(e);var n=function(t,i){if("device-pixel-content-box"===i.type)return new m(t,i.transform,i.options);throw new Error("Unsupported binding target")}(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:function(t,i){return{width:Math.max(t.width,i.width),height:Math.max(t.height,i.height)}}});return n.resizeCanvasElement(i),n}function wn(t){var i;t.width=1,t.height=1,null===(i=t.getContext("2d"))||void 0===i||i.clearRect(0,0,1,1)}function _n(t,i,e,n){t.fl&&t.fl(i,e,n)}function Sn(t,i,e,n){t.K(i,e,n)}function Mn(t,i,e,n){var s,h=t(e,n),a=(0,r.Z)(h);try{for(a.s();!(s=a.n()).done;){var u=s.value.gt();null!==u&&i(u)}}catch(l){a.e(l)}finally{a.f()}}var zn=function(){function t(i,e,n){var s=this;(0,c.Z)(this,t),this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Xd=null,this.Kd=!1,this.Zd=null,this.Gd=null,this.Jd=!1,this.Qd=!1,this.tf=!1,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=0,this._f=!1,this.uf=!1,this.cf=!1,this.df=0,this.ff=null,this.vf=!yn(),this.pf=function(t){s.mf(t)},this.bf=function(t){if(s.wf(t)){var i=s.gf(t);if(++s.Ud,s.qd&&s.Ud>1)s.xf(Cn(t),s.Yd).Mf<30&&!s.tf&&s.Sf(i,s.yf.kf),s.Cf()}else{var e=s.gf(t);if(++s.jd,s.Hd&&s.jd>1)s.xf(Cn(t),s.$d).Mf<5&&!s.Qd&&s.Tf(e,s.yf.Pf),s.Rf()}},this.Df=i,this.yf=e,this._n=n,this.Of()}return(0,f.Z)(t,[{key:"S",value:function(){null!==this.if&&(this.if(),this.if=null),null!==this.nf&&(this.nf(),this.nf=null),null!==this.ef&&(this.ef(),this.ef=null),null!==this.rf&&(this.rf(),this.rf=null),null!==this.hf&&(this.hf(),this.hf=null),null!==this.sf&&(this.sf(),this.sf=null),this.Af(),this.Rf()}},{key:"Vf",value:function(t){var i=this;this.ef&&this.ef();var e=this.Bf.bind(this);if(this.ef=function(){i.Df.removeEventListener("mousemove",e)},this.Df.addEventListener("mousemove",e),!this.wf(t)){var n=this.gf(t);this.Tf(n,this.yf.If),this.vf=!0}}},{key:"Rf",value:function(){null!==this.Hd&&clearTimeout(this.Hd),this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}},{key:"Cf",value:function(){null!==this.qd&&clearTimeout(this.qd),this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}},{key:"Bf",value:function(t){if(!this.cf&&null===this.Gd&&!this.wf(t)){var i=this.gf(t);this.Tf(i,this.yf.zf),this.vf=!0}}},{key:"Lf",value:function(t){var i=En(t.changedTouches,L(this.ff));if(null!==i&&(this.df=On(t),null===this.lf&&!this.uf)){this._f=!0;var e=this.xf(Cn(i),L(this.Gd)),n=e.Ef,s=e.Nf,h=e.Mf;if(this.Jd||!(h<5)){if(!this.Jd){var r=.5*n,a=s>=r&&!this._n.Ff(),u=r>s&&!this._n.Wf();a||u||(this.uf=!0),this.Jd=!0,this.tf=!0,this.Af(),this.Cf()}if(!this.uf){var l=this.gf(t,i);this.Sf(l,this.yf.jf),Zn(t)}}}}},{key:"Hf",value:function(t){if(0===t.button&&(this.xf(Cn(t),L(this.Zd)).Mf>=5&&(this.Qd=!0,this.Rf()),this.Qd)){var i=this.gf(t);this.Tf(i,this.yf.$f)}}},{key:"xf",value:function(t,i){var e=Math.abs(i.nt-t.nt),n=Math.abs(i.st-t.st);return{Ef:e,Nf:n,Mf:e+n}}},{key:"Uf",value:function(t){var i=En(t.changedTouches,L(this.ff));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.ff=null,this.df=On(t),this.Af(),this.Gd=null,this.hf&&(this.hf(),this.hf=null);var e=this.gf(t,i);if(this.Sf(e,this.yf.qf),++this.Ud,this.qd&&this.Ud>1)this.xf(Cn(i),this.Yd).Mf<30&&!this.tf&&this.Sf(e,this.yf.kf),this.Cf();else this.tf||(this.Sf(e,this.yf.Yf),this.yf.Yf&&Zn(t));0===this.Ud&&Zn(t),0===t.touches.length&&this.Kd&&(this.Kd=!1,Zn(t))}}},{key:"mf",value:function(t){if(0===t.button){var i=this.gf(t);if(this.Zd=null,this.cf=!1,this.rf&&(this.rf(),this.rf=null),dn()&&this.Df.ownerDocument.documentElement.removeEventListener("mouseleave",this.pf),!this.wf(t))if(this.Tf(i,this.yf.Xf),++this.jd,this.Hd&&this.jd>1){this.xf(Cn(t),this.$d).Mf<5&&!this.Qd&&this.Tf(i,this.yf.Pf),this.Rf()}else this.Qd||this.Tf(i,this.yf.Kf)}}},{key:"Af",value:function(){null!==this.Xd&&(clearTimeout(this.Xd),this.Xd=null)}},{key:"Zf",value:function(t){if(null===this.ff){var i=t.changedTouches[0];this.ff=i.identifier,this.df=On(t);var e=this.Df.ownerDocument.documentElement;this.tf=!1,this.Jd=!1,this.uf=!1,this.Gd=Cn(i),this.hf&&(this.hf(),this.hf=null);var n=this.Lf.bind(this),s=this.Uf.bind(this);this.hf=function(){e.removeEventListener("touchmove",n),e.removeEventListener("touchend",s)},e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),this.Af(),this.Xd=setTimeout(this.Gf.bind(this,t),240);var h=this.gf(t,i);this.Sf(h,this.yf.Jf),this.qd||(this.Ud=0,this.qd=setTimeout(this.Cf.bind(this),500),this.Yd=Cn(i))}}},{key:"Qf",value:function(t){if(0===t.button){var i=this.Df.ownerDocument.documentElement;dn()&&i.addEventListener("mouseleave",this.pf),this.Qd=!1,this.Zd=Cn(t),this.rf&&(this.rf(),this.rf=null);var e=this.Hf.bind(this),n=this.mf.bind(this);if(this.rf=function(){i.removeEventListener("mousemove",e),i.removeEventListener("mouseup",n)},i.addEventListener("mousemove",e),i.addEventListener("mouseup",n),this.cf=!0,!this.wf(t)){var s=this.gf(t);this.Tf(s,this.yf.tv),this.Hd||(this.jd=0,this.Hd=setTimeout(this.Rf.bind(this),500),this.$d=Cn(t))}}}},{key:"Of",value:function(){var t=this;this.Df.addEventListener("mouseenter",this.Vf.bind(this)),this.Df.addEventListener("touchcancel",this.Af.bind(this));var i=this.Df.ownerDocument,e=function(i){t.yf.iv&&(i.composed&&t.Df.contains(i.composedPath()[0])||i.target&&t.Df.contains(i.target)||t.yf.iv())};this.nf=function(){i.removeEventListener("touchstart",e)},this.if=function(){i.removeEventListener("mousedown",e)},i.addEventListener("mousedown",e),i.addEventListener("touchstart",e,{passive:!0}),yn()&&(this.sf=function(){t.Df.removeEventListener("dblclick",t.bf)},this.Df.addEventListener("dblclick",this.bf)),this.Df.addEventListener("mouseleave",this.nv.bind(this)),this.Df.addEventListener("touchstart",this.Zf.bind(this),{passive:!0}),function(t){vn&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.Df),this.Df.addEventListener("mousedown",this.Qf.bind(this)),this.sv(),this.Df.addEventListener("touchmove",(function(){}),{passive:!1})}},{key:"sv",value:function(){var t=this;void 0===this.yf.ev&&void 0===this.yf.rv&&void 0===this.yf.hv||(this.Df.addEventListener("touchstart",(function(i){return t.lv(i.touches)}),{passive:!0}),this.Df.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.lf&&void 0!==t.yf.rv){var e=xn(i.touches[0],i.touches[1])/t.af;t.yf.rv(t.lf,e),Zn(i)}}),{passive:!1}),this.Df.addEventListener("touchend",(function(i){t.lv(i.touches)})))}},{key:"lv",value:function(t){1===t.length&&(this._f=!1),2!==t.length||this._f||this.Kd?this.av():this.ov(t)}},{key:"ov",value:function(t){var i=this.Df.getBoundingClientRect()||{left:0,top:0};this.lf={nt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,st:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.af=xn(t[0],t[1]),void 0!==this.yf.ev&&this.yf.ev(),this.Af()}},{key:"av",value:function(){null!==this.lf&&(this.lf=null,void 0!==this.yf.hv&&this.yf.hv())}},{key:"nv",value:function(t){if(this.ef&&this.ef(),!this.wf(t)&&this.vf){var i=this.gf(t);this.Tf(i,this.yf._v),this.vf=!yn()}}},{key:"Gf",value:function(t){var i=En(t.touches,L(this.ff));if(null!==i){var e=this.gf(t,i);this.Sf(e,this.yf.uv),this.tf=!0,this.Kd=!0}}},{key:"wf",value:function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:On(t)<this.df+500}},{key:"Sf",value:function(t,i){i&&i.call(this.yf,t)}},{key:"Tf",value:function(t,i){i&&i.call(this.yf,t)}},{key:"gf",value:function(t,i){var e=i||t,n=this.Df.getBoundingClientRect()||{left:0,top:0};return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-n.left,localY:e.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,cv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,dv:t.type,fv:e.target,vv:t.view,pv:function(){"touchstart"!==t.type&&Zn(t)}}}}]),t}();function xn(t,i){var e=t.clientX-i.clientX,n=t.clientY-i.clientY;return Math.sqrt(e*e+n*n)}function Zn(t){t.cancelable&&t.preventDefault()}function Cn(t){return{nt:t.pageX,st:t.pageY}}function On(t){return t.timeStamp||performance.now()}function En(t,i){for(var e=0;e<t.length;++e)if(t[e].identifier===i)return t[e];return null}function Tn(t){return{zc:t.zc,mv:{mr:t.bv.externalId},wv:t.bv.cursorStyle}}function Nn(t,i,e){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var h=n.value,a=h.gt();if(null!==a&&a.pr){var u=a.pr(i,e);if(null!==u)return{vv:h,mv:u}}}}catch(l){s.e(l)}finally{s.f()}return null}function Rn(t,i){return function(e){var n,s,h,r;return(null!==(s=null===(n=e.Dt())||void 0===n?void 0:n.xa())&&void 0!==s?s:"")!==i?[]:null!==(r=null===(h=e.la)||void 0===h?void 0:h.call(e,t))&&void 0!==r?r:[]}}var Bn=function(){function t(i,e,n,s){var h=this;(0,c.Z)(this,t),this.zi=null,this.gv=null,this.Mv=!1,this.xv=new pi(200),this.Zr=null,this.Sv=0,this.kv=!1,this.yv=function(){h.kv||h.Qi.Cv().$t().Nh()},this.Tv=function(){h.kv||h.Qi.Cv().$t().Nh()},this.Qi=i,this._n=e,this.mo=e.layout,this.yc=n,this.Pv="left"===s,this.Rv=Rn("normal",s),this.Dv=Rn("top",s),this.Ov=Rn("bottom",s),this.Av=document.createElement("div"),this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Av.style.width="25px",this.Av.style.left="0",this.Av.style.position="relative",this.Vv=gn(this.Av,v({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);var r=this.Vv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Bv=gn(this.Av,v({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);var a=this.Bv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";var u={tv:this.Iv.bind(this),Jf:this.Iv.bind(this),$f:this.zv.bind(this),jf:this.zv.bind(this),iv:this.Lv.bind(this),Xf:this.Ev.bind(this),qf:this.Ev.bind(this),Pf:this.Nv.bind(this),kf:this.Nv.bind(this),If:this.Fv.bind(this),_v:this.Wv.bind(this)};this.jv=new zn(this.Bv.canvasElement,u,{Ff:function(){return!h._n.handleScroll.vertTouchDrag},Wf:function(){return!0}})}return(0,f.Z)(t,[{key:"S",value:function(){this.jv.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),wn(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),wn(this.Vv.canvasElement),this.Vv.dispose(),null!==this.zi&&this.zi.$o().p(this),this.zi=null}},{key:"Hv",value:function(){return this.Av}},{key:"P",value:function(){return this.mo.fontSize}},{key:"$v",value:function(){var t=this.yc.W();return this.Zr!==t.R&&(this.xv.Qe(),this.Zr=t.R),t}},{key:"Uv",value:function(){if(null===this.zi)return 0;var t=0,i=this.$v(),e=L(this.Vv.canvasElement.getContext("2d"));e.save();var n=this.zi.La();e.font=this.qv(),n.length>0&&(t=Math.max(this.xv.Mi(e,n[0].Za),this.xv.Mi(e,n[n.length-1].Za)));for(var s=this.Yv(),h=s.length;h--;){var r=this.xv.Mi(e,s[h].Zt());r>t&&(t=r)}var a=this.zi.Ct();if(null!==a&&null!==this.gv){var u=this.zi.fn(1,a),l=this.zi.fn(this.gv.height-2,a);t=Math.max(t,this.xv.Mi(e,this.zi.Ni(Math.floor(Math.min(u,l))+.11111111111111,a)),this.xv.Mi(e,this.zi.Ni(Math.ceil(Math.max(u,l))-.11111111111111,a)))}e.restore();var o=t||34;return mn(Math.ceil(i.C+i.T+i.B+i.I+5+o))}},{key:"Xv",value:function(t){null!==this.gv&&d(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Av.style.width="".concat(t.width,"px"),this.Av.style.height="".concat(t.height,"px"))}},{key:"Kv",value:function(){return L(this.gv).width}},{key:"Zi",value:function(t){this.zi!==t&&(null!==this.zi&&this.zi.$o().p(this),this.zi=t,t.$o().l(this.ao.bind(this),this))}},{key:"Dt",value:function(){return this.zi}},{key:"Qe",value:function(){var t=this.Qi.Zv();this.Qi.Cv().$t().A_(t,L(this.Dt()))}},{key:"Gv",value:function(t){var i=this;if(null!==this.gv){if(1!==t){this.Jv(),this.Vv.applySuggestedBitmapSize();var e=b(this.Vv);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.Qv(t),i.Ae(t)})),this.Qi.tp(e,this.Ov),this.ip(e),this.Qi.tp(e,this.Rv),this.np(e))}this.Bv.applySuggestedBitmapSize();var n=b(this.Bv);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.sp(n),this.Qi.tp(n,this.Dv))}}},{key:"ep",value:function(){return this.Vv.bitmapSize}},{key:"rp",value:function(t,i,e){var n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,i,e)}},{key:"bt",value:function(){var t;null===(t=this.zi)||void 0===t||t.La()}},{key:"Iv",value:function(t){if(null!==this.zi&&!this.zi.Ei()&&this._n.handleScale.axisPressedMouseMove.price){var i=this.Qi.Cv().$t(),e=this.Qi.Zv();this.Mv=!0,i.y_(e,this.zi,t.localY)}}},{key:"zv",value:function(t){if(null!==this.zi&&this._n.handleScale.axisPressedMouseMove.price){var i=this.Qi.Cv().$t(),e=this.Qi.Zv(),n=this.zi;i.C_(e,n,t.localY)}}},{key:"Lv",value:function(){if(null!==this.zi&&this._n.handleScale.axisPressedMouseMove.price){var t=this.Qi.Cv().$t(),i=this.Qi.Zv(),e=this.zi;this.Mv&&(this.Mv=!1,t.T_(i,e))}}},{key:"Ev",value:function(t){if(null!==this.zi&&this._n.handleScale.axisPressedMouseMove.price){var i=this.Qi.Cv().$t(),e=this.Qi.Zv();this.Mv=!1,i.T_(e,this.zi)}}},{key:"Nv",value:function(t){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}},{key:"Fv",value:function(t){null!==this.zi&&(!this.Qi.Cv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.fh()||this.zi.Co()||this.hp(1))}},{key:"Wv",value:function(t){this.hp(0)}},{key:"Yv",value:function(){var t=this,i=[],e=null===this.zi?void 0:this.zi;return function(n){for(var s=0;s<n.length;++s)for(var h=n[s].Tn(t.Qi.Zv(),e),r=0;r<h.length;r++)i.push(h[r])}(this.Qi.Zv().No()),i}},{key:"Qv",value:function(t){var i=t.context,e=t.bitmapSize,n=e.width,s=e.height,h=this.Qi.Zv().$t(),r=h.q(),a=h._d();r===a?vt(i,0,0,n,s,r):pt(i,0,0,n,s,r,a)}},{key:"Ae",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio;if(null!==this.gv&&null!==this.zi&&this.zi.W().borderVisible){i.fillStyle=this.zi.W().borderColor;var s,h=Math.max(1,Math.floor(this.$v().C*n));s=this.Pv?e.width-h:0,i.fillRect(s,0,h,e.height)}}},{key:"ip",value:function(t){var i=this;if(null!==this.gv&&null!==this.zi){var e=this.zi.La(),n=this.zi.W(),s=this.$v(),h=this.Pv?this.gv.width-s.T:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var i=t.context,a=t.horizontalPixelRatio,u=t.verticalPixelRatio;i.fillStyle=n.borderColor;var l=Math.max(1,Math.floor(u)),o=Math.floor(.5*u),c=Math.round(s.T*a);i.beginPath();var f,v=(0,r.Z)(e);try{for(v.s();!(f=v.n()).done;){var d=f.value;i.rect(Math.floor(h*a),Math.round(d.Aa*u)-o,c,l)}}catch(y){v.e(y)}finally{v.f()}i.fill()})),t.useMediaCoordinateSpace((function(t){var r,a=t.context;a.font=i.qv(),a.fillStyle=null!==(r=n.textColor)&&void 0!==r?r:i.mo.textColor,a.textAlign=i.Pv?"right":"left",a.textBaseline="middle";for(var u=i.Pv?Math.round(h-s.B):Math.round(h+s.T+s.B),l=e.map((function(t){return i.xv.gi(a,t.Za)})),o=e.length;o--;){var c=e[o];a.fillText(c.Za,u,c.Aa+l[o])}}))}}},{key:"Jv",value:function(){if(null!==this.gv&&null!==this.zi){var t=this.gv.height/2,i=[],e=this.zi.No().slice(),n=this.Qi.Zv(),s=this.$v();this.zi===n.cr()&&this.Qi.Zv().No().forEach((function(t){n.ur(t)&&e.push(t)}));var h=this.zi.Ta()[0],r=this.zi;e.forEach((function(e){var s=e.Tn(n,r);s.forEach((function(t){t.Oi(null),t.Ai()&&i.push(t)})),h===e&&s.length>0&&(t=s[0].Si())})),i.forEach((function(t){return t.Oi(t.Si())})),this.zi.W().alignLabels&&this.lp(i,s,t)}}},{key:"lp",value:function(t,i,e){if(null!==this.gv){var n=t.filter((function(t){return t.Si()<=e})),s=t.filter((function(t){return t.Si()>e}));n.sort((function(t,i){return i.Si()-t.Si()})),n.length&&s.length&&s.push(n[0]),s.sort((function(t,i){return t.Si()-i.Si()}));var h,a=(0,r.Z)(t);try{for(a.s();!(h=a.n()).done;){var u=h.value,l=Math.floor(u.Bt(i)/2),o=u.Si();o>-l&&o<l&&u.Oi(l),o>this.gv.height-l&&o<this.gv.height+l&&u.Oi(this.gv.height-l)}}catch(S){a.e(S)}finally{a.f()}for(var c=1;c<n.length;c++){var f=n[c],v=n[c-1],d=v.Bt(i,!1),y=f.Si(),m=v.Di();y>m-d&&f.Oi(m-d)}for(var p=1;p<s.length;p++){var k=s[p],b=s[p-1],g=b.Bt(i,!0),w=k.Si(),_=b.Di();w<_+g&&k.Oi(_+g)}}}},{key:"np",value:function(t){var i=this;if(null!==this.gv){var e=this.Yv(),n=this.$v(),s=this.Pv?"right":"left";e.forEach((function(e){e.Vi()&&e.gt(L(i.zi)).K(t,n,i.xv,s)}))}}},{key:"sp",value:function(t){var i=this;if(null!==this.gv&&null!==this.zi){var e=this.Qi.Cv().$t(),n=[],s=this.Qi.Zv(),h=e.Wc().Tn(s,this.zi);h.length&&n.push(h);var r=this.$v(),a=this.Pv?"right":"left";n.forEach((function(e){e.forEach((function(e){e.gt(L(i.zi)).K(t,r,i.xv,a)}))}))}}},{key:"hp",value:function(t){this.Av.style.cursor=1===t?"ns-resize":"default"}},{key:"ao",value:function(){var t=this.Uv();this.Sv<t&&this.Qi.Cv().$t().$l(),this.Sv=t}},{key:"qv",value:function(){return et(this.mo.fontSize,this.mo.fontFamily)}}]),t}();function Ln(t,i){var e,n;return null!==(n=null===(e=t.ra)||void 0===e?void 0:e.call(t,i))&&void 0!==n?n:[]}function Pn(t,i){var e,n;return null!==(n=null===(e=t.Cn)||void 0===e?void 0:e.call(t,i))&&void 0!==n?n:[]}function In(t,i){var e,n;return null!==(n=null===(e=t.Gi)||void 0===e?void 0:e.call(t,i))&&void 0!==n?n:[]}function Wn(t,i){var e,n;return null!==(n=null===(e=t.na)||void 0===e?void 0:e.call(t,i))&&void 0!==n?n:[]}var Vn=function(){function t(i,e){var n=this;(0,c.Z)(this,t),this.gv=v({width:0,height:0}),this.ap=null,this.op=null,this._p=null,this.up=!1,this.cp=new U,this.dp=new U,this.fp=0,this.vp=!1,this.pp=null,this.mp=!1,this.bp=null,this.wp=null,this.kv=!1,this.yv=function(){n.kv||null===n.gp||n.Hi().Nh()},this.Tv=function(){n.kv||null===n.gp||n.Hi().Nh()},this.Mp=i,this.gp=e,this.gp.I_().l(this.xp.bind(this),this,!0),this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Sp.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.yp=document.createElement("td"),this.yp.style.padding="0",this.Sp.appendChild(s),this.Vv=gn(s,v({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);var h=this.Vv.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Bv=gn(s,v({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);var r=this.Bv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Cp=document.createElement("tr"),this.Cp.appendChild(this.kp),this.Cp.appendChild(this.Sp),this.Cp.appendChild(this.yp),this.Tp(),this.jv=new zn(this.Bv.canvasElement,this,{Ff:function(){return null===n.pp&&!n.Mp.W().handleScroll.vertTouchDrag},Wf:function(){return null===n.pp&&!n.Mp.W().handleScroll.horzTouchDrag}})}return(0,f.Z)(t,[{key:"S",value:function(){null!==this.ap&&this.ap.S(),null!==this.op&&this.op.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),wn(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),wn(this.Vv.canvasElement),this.Vv.dispose(),null!==this.gp&&this.gp.I_().p(this),this.jv.S()}},{key:"Zv",value:function(){return L(this.gp)}},{key:"Pp",value:function(i){null!==this.gp&&this.gp.I_().p(this),this.gp=i,null!==this.gp&&this.gp.I_().l(t.prototype.xp.bind(this),this,!0),this.Tp()}},{key:"Cv",value:function(){return this.Mp}},{key:"Hv",value:function(){return this.Cp}},{key:"Tp",value:function(){if(null!==this.gp&&(this.Rp(),0!==this.Hi().wt().length)){if(null!==this.ap){var t=this.gp.S_();this.ap.Zi(L(t))}if(null!==this.op){var i=this.gp.k_();this.op.Zi(L(i))}}}},{key:"Dp",value:function(){null!==this.ap&&this.ap.bt(),null!==this.op&&this.op.bt()}},{key:"v_",value:function(){return null!==this.gp?this.gp.v_():0}},{key:"p_",value:function(t){this.gp&&this.gp.p_(t)}},{key:"If",value:function(t){if(this.gp){this.Op();var i=t.localX,e=t.localY;this.Ap(i,e,t)}}},{key:"tv",value:function(t){this.Op(),this.Vp(),this.Ap(t.localX,t.localY,t)}},{key:"zf",value:function(t){var i;if(this.gp){this.Op();var e=t.localX,n=t.localY;this.Ap(e,n,t);var s=this.pr(e,n);this.Mp.Bp(null!==(i=null==s?void 0:s.wv)&&void 0!==i?i:null),this.Hi().Ic(s&&{zc:s.zc,mv:s.mv})}}},{key:"Kf",value:function(t){null!==this.gp&&(this.Op(),this.Ip(t))}},{key:"Pf",value:function(t){null!==this.gp&&this.zp(this.dp,t)}},{key:"kf",value:function(t){this.Pf(t)}},{key:"$f",value:function(t){this.Op(),this.Lp(t),this.Ap(t.localX,t.localY,t)}},{key:"Xf",value:function(t){null!==this.gp&&(this.Op(),this.vp=!1,this.Ep(t))}},{key:"Yf",value:function(t){null!==this.gp&&this.Ip(t)}},{key:"uv",value:function(t){if(this.vp=!0,null===this.pp){var i={x:t.localX,y:t.localY};this.Np(i,i,t)}}},{key:"_v",value:function(t){null!==this.gp&&(this.Op(),this.gp.$t().Ic(null),this.Fp())}},{key:"Wp",value:function(){return this.cp}},{key:"jp",value:function(){return this.dp}},{key:"ev",value:function(){this.fp=1,this.Hi().Hn()}},{key:"rv",value:function(t,i){if(this.Mp.W().handleScale.pinch){var e=5*(i-this.fp);this.fp=i,this.Hi().qc(t.nt,e)}}},{key:"Jf",value:function(t){this.vp=!1,this.mp=null!==this.pp,this.Vp();var i=this.Hi().Wc();null!==this.pp&&i.yt()&&(this.bp={x:i.Yt(),y:i.Xt()},this.pp={x:t.localX,y:t.localY})}},{key:"jf",value:function(t){if(null!==this.gp){var i=t.localX,e=t.localY;if(null===this.pp)this.Lp(t);else{this.mp=!1;var n=L(this.bp),s=n.x+(i-this.pp.x),h=n.y+(e-this.pp.y);this.Ap(s,h,t)}}}},{key:"qf",value:function(t){0===this.Cv().W().trackingMode.exitMode&&(this.mp=!0),this.Hp(),this.Ep(t)}},{key:"pr",value:function(t,i){var e=this.gp;return null===e?null:function(t,i,e){var n=t.No(),s=function(t,i,e){var n,s,h,a,u,l,o,c=(0,r.Z)(t);try{for(c.s();!(u=c.n()).done;){var f,v=u.value,d=null!==(s=null===(n=v.oa)||void 0===n?void 0:n.call(v,i,e))&&void 0!==s?s:[],y=(0,r.Z)(d);try{for(y.s();!(f=y.n()).done;){var m=f.value;l=m.zOrder,(!(o=null==h?void 0:h.zOrder)||"top"===l&&"top"!==o||"normal"===l&&"bottom"===o)&&(h=m,a=v)}}catch(p){y.e(p)}finally{y.f()}}}catch(p){c.e(p)}finally{c.f()}return h&&a?{bv:h,zc:a}:null}(n,i,e);if("top"===(null==s?void 0:s.bv.zOrder))return Tn(s);var h,a=(0,r.Z)(n);try{for(a.s();!(h=a.n()).done;){var u=h.value;if(s&&s.zc===u&&"bottom"!==s.bv.zOrder&&!s.bv.isBackground)return Tn(s);var l=Nn(u.Cn(t),i,e);if(null!==l)return{zc:u,vv:l.vv,mv:l.mv};if(s&&s.zc===u&&"bottom"!==s.bv.zOrder&&s.bv.isBackground)return Tn(s)}}catch(o){a.e(o)}finally{a.f()}return(null==s?void 0:s.bv)?Tn(s):null}(e,t,i)}},{key:"$p",value:function(t,i){L("left"===i?this.ap:this.op).Xv(v({width:t,height:this.gv.height}))}},{key:"Up",value:function(){return this.gv}},{key:"Xv",value:function(t){d(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Sp.style.width=t.width+"px",this.Sp.style.height=t.height+"px")}},{key:"qp",value:function(){var t=L(this.gp);t.x_(t.S_()),t.x_(t.k_());var i,e=(0,r.Z)(t.Ta());try{for(e.s();!(i=e.n()).done;){var n=i.value;if(t.ur(n)){var s=n.Dt();null!==s&&t.x_(s),n.Rn()}}}catch(h){e.e(h)}finally{e.f()}}},{key:"ep",value:function(){return this.Vv.bitmapSize}},{key:"rp",value:function(t,i,e){var n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,i,e)}},{key:"Gv",value:function(t){var i=this;if(0!==t&&null!==this.gp){if(t>1&&this.qp(),null!==this.ap&&this.ap.Gv(t),null!==this.op&&this.op.Gv(t),1!==t){this.Vv.applySuggestedBitmapSize();var e=b(this.Vv);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.Qv(t)})),this.gp&&(this.Yp(e,Ln),this.Xp(e),this.Kp(e),this.Yp(e,Pn),this.Yp(e,In)))}this.Bv.applySuggestedBitmapSize();var n=b(this.Bv);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.Zp(n),this.Yp(n,Wn))}}},{key:"Gp",value:function(){return this.ap}},{key:"Jp",value:function(){return this.op}},{key:"tp",value:function(t,i){this.Yp(t,i)}},{key:"xp",value:function(){null!==this.gp&&this.gp.I_().p(this),this.gp=null}},{key:"Ip",value:function(t){this.zp(this.cp,t)}},{key:"zp",value:function(t,i){var e=i.localX,n=i.localY;t.M()&&t.m(this.Hi().St().Vu(e),{x:e,y:n},i)}},{key:"Qv",value:function(t){var i=t.context,e=t.bitmapSize,n=e.width,s=e.height,h=this.Hi(),r=h.q(),a=h._d();r===a?vt(i,0,0,n,s,a):pt(i,0,0,n,s,r,a)}},{key:"Xp",value:function(t){var i=L(this.gp).z_().Fh().gt();null!==i&&i.K(t,!1)}},{key:"Kp",value:function(t){var i=this.Hi().Fc();this.Qp(t,Pn,_n,i),this.Qp(t,Pn,Sn,i)}},{key:"Zp",value:function(t){this.Qp(t,Pn,Sn,this.Hi().Wc())}},{key:"Yp",value:function(t,i){var e,n=L(this.gp).No(),s=(0,r.Z)(n);try{for(s.s();!(e=s.n()).done;){var h=e.value;this.Qp(t,i,_n,h)}}catch(o){s.e(o)}finally{s.f()}var a,u=(0,r.Z)(n);try{for(u.s();!(a=u.n()).done;){var l=a.value;this.Qp(t,i,Sn,l)}}catch(o){u.e(o)}finally{u.f()}}},{key:"Qp",value:function(t,i,e,n){var s=L(this.gp),h=s.$t().Bc(),r=null!==h&&h.zc===n,a=null!==h&&r&&void 0!==h.mv?h.mv.br:void 0;Mn(i,(function(i){return e(i,t,r,a)}),n,s)}},{key:"Rp",value:function(){if(null!==this.gp){var t=this.Mp,i=this.gp.S_().W().visible,e=this.gp.k_().W().visible;i||null===this.ap||(this.kp.removeChild(this.ap.Hv()),this.ap.S(),this.ap=null),e||null===this.op||(this.yp.removeChild(this.op.Hv()),this.op.S(),this.op=null);var n=t.$t().ed();i&&null===this.ap&&(this.ap=new Bn(this,t.W(),n,"left"),this.kp.appendChild(this.ap.Hv())),e&&null===this.op&&(this.op=new Bn(this,t.W(),n,"right"),this.yp.appendChild(this.op.Hv()))}}},{key:"tm",value:function(t){return t.cv&&this.vp||null!==this.pp}},{key:"im",value:function(t){return Math.max(0,Math.min(t,this.gv.width-1))}},{key:"nm",value:function(t){return Math.max(0,Math.min(t,this.gv.height-1))}},{key:"Ap",value:function(t,i,e){this.Hi().Qc(this.im(t),this.nm(i),e,L(this.gp))}},{key:"Fp",value:function(){this.Hi().nd()}},{key:"Hp",value:function(){this.mp&&(this.pp=null,this.Fp())}},{key:"Np",value:function(t,i,e){this.pp=t,this.mp=!1,this.Ap(i.x,i.y,e);var n=this.Hi().Wc();this.bp={x:n.Yt(),y:n.Xt()}}},{key:"Hi",value:function(){return this.Mp.$t()}},{key:"Ep",value:function(t){if(this.up){var i=this.Hi(),e=this.Zv();if(i.D_(e,e.dn()),this._p=null,this.up=!1,i.Zc(),null!==this.wp){var n=performance.now(),s=i.St();this.wp.Pr(s.Lu(),n),this.wp.Yu(n)||i.qn(this.wp)}}}},{key:"Op",value:function(){this.pp=null}},{key:"Vp",value:function(){if(this.gp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)L(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.gp.dn().Ei()&&this.Hi().St().Ei()}}},{key:"Lp",value:function(t){if(null!==this.gp){var i=this.Hi(),e=i.St();if(!e.Ei()){var n=this.Mp.W(),s=n.handleScroll,h=n.kineticScroll;if(s.pressedMouseMove&&!t.cv||(s.horzTouchDrag||s.vertTouchDrag)&&t.cv){var r=this.gp.dn(),a=performance.now();if(null!==this._p||this.tm(t)||(this._p={x:t.clientX,y:t.clientY,yd:a,sm:t.localX,rm:t.localY}),null!==this._p&&!this.up&&(this._p.x!==t.clientX||this._p.y!==t.clientY)){if(t.cv&&h.touch||!t.cv&&h.mouse){var u=e.ee();this.wp=new bn(.2/u,7/u,.997,15/u),this.wp.Fd(e.Lu(),this._p.yd)}else this.wp=null;r.Ei()||i.P_(this.gp,r,t.localY),i.Xc(t.localX),this.up=!0}this.up&&(r.Ei()||i.R_(this.gp,r,t.localY),i.Kc(t.localX),null!==this.wp&&this.wp.Fd(e.Lu(),a))}}}}}]),t}(),Dn=function(){function t(i,e,n,s,h){var r=this;(0,c.Z)(this,t),this.ft=!0,this.gv=v({width:0,height:0}),this.yv=function(){return r.Gv(3)},this.Pv="left"===i,this.yc=n.ed,this._n=e,this.hm=s,this.lm=h,this.Av=document.createElement("div"),this.Av.style.width="25px",this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Vv=gn(this.Av,v({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv)}return(0,f.Z)(t,[{key:"S",value:function(){this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),wn(this.Vv.canvasElement),this.Vv.dispose()}},{key:"Hv",value:function(){return this.Av}},{key:"Up",value:function(){return this.gv}},{key:"Xv",value:function(t){d(this.gv,t)||(this.gv=t,this.Vv.resizeCanvasElement(t),this.Av.style.width="".concat(t.width,"px"),this.Av.style.height="".concat(t.height,"px"),this.ft=!0)}},{key:"Gv",value:function(t){var i=this;if((!(t<3)||this.ft)&&0!==this.gv.width&&0!==this.gv.height){this.ft=!1,this.Vv.applySuggestedBitmapSize();var e=b(this.Vv);null!==e&&e.useBitmapCoordinateSpace((function(t){i.Qv(t),i.Ae(t)}))}}},{key:"ep",value:function(){return this.Vv.bitmapSize}},{key:"rp",value:function(t,i,e){var n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,i,e)}},{key:"Ae",value:function(t){var i=t.context,e=t.bitmapSize,n=t.horizontalPixelRatio,s=t.verticalPixelRatio;if(this.hm()){i.fillStyle=this._n.timeScale.borderColor;var h=Math.floor(this.yc.W().C*n),r=Math.floor(this.yc.W().C*s),a=this.Pv?e.width-h:0;i.fillRect(a,0,h,r)}}},{key:"Qv",value:function(t){var i=t.context,e=t.bitmapSize;vt(i,0,0,e.width,e.height,this.lm())}}]),t}();function An(t){return function(i){var e,n;return null!==(n=null===(e=i.aa)||void 0===e?void 0:e.call(i,t))&&void 0!==n?n:[]}}var jn,Fn=An("normal"),Hn=An("top"),$n=An("bottom"),Un=function(){function t(i,e){var n=this;(0,c.Z)(this,t),this.am=null,this.om=null,this.k=null,this._m=!1,this.gv=v({width:0,height:0}),this.um=new U,this.xv=new pi(5),this.kv=!1,this.yv=function(){n.kv||n.Mp.$t().Nh()},this.Tv=function(){n.kv||n.Mp.$t().Nh()},this.Mp=i,this.N_=e,this._n=i.W().layout,this.dm=document.createElement("tr"),this.fm=document.createElement("td"),this.fm.style.padding="0",this.vm=document.createElement("td"),this.vm.style.padding="0",this.Av=document.createElement("td"),this.Av.style.height="25px",this.Av.style.padding="0",this.pm=document.createElement("div"),this.pm.style.width="100%",this.pm.style.height="100%",this.pm.style.position="relative",this.pm.style.overflow="hidden",this.Av.appendChild(this.pm),this.Vv=gn(this.pm,v({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);var s=this.Vv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Bv=gn(this.pm,v({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);var h=this.Bv.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.dm.appendChild(this.fm),this.dm.appendChild(this.Av),this.dm.appendChild(this.vm),this.bm(),this.Mp.$t().f_().l(this.bm.bind(this),this),this.jv=new zn(this.Bv.canvasElement,this,{Ff:function(){return!0},Wf:function(){return!n.Mp.W().handleScroll.horzTouchDrag}})}return(0,f.Z)(t,[{key:"S",value:function(){this.jv.S(),null!==this.am&&this.am.S(),null!==this.om&&this.om.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),wn(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),wn(this.Vv.canvasElement),this.Vv.dispose()}},{key:"Hv",value:function(){return this.dm}},{key:"wm",value:function(){return this.am}},{key:"gm",value:function(){return this.om}},{key:"tv",value:function(t){if(!this._m){this._m=!0;var i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Uc(t.localX)}}},{key:"Jf",value:function(t){this.tv(t)}},{key:"iv",value:function(){var t=this.Mp.$t();!t.St().Ei()&&this._m&&(this._m=!1,this.Mp.W().handleScale.axisPressedMouseMove.time&&t.Jc())}},{key:"$f",value:function(t){var i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Gc(t.localX)}},{key:"jf",value:function(t){this.$f(t)}},{key:"Xf",value:function(){this._m=!1;var t=this.Mp.$t();t.St().Ei()&&!this.Mp.W().handleScale.axisPressedMouseMove.time||t.Jc()}},{key:"qf",value:function(){this.Xf()}},{key:"Pf",value:function(){this.Mp.W().handleScale.axisDoubleClickReset.time&&this.Mp.$t().Xn()}},{key:"kf",value:function(){this.Pf()}},{key:"If",value:function(){this.Mp.$t().W().handleScale.axisPressedMouseMove.time&&this.hp(1)}},{key:"_v",value:function(){this.hp(0)}},{key:"Up",value:function(){return this.gv}},{key:"Mm",value:function(){return this.um}},{key:"xm",value:function(t,i,e){d(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Av.style.width="".concat(t.width,"px"),this.Av.style.height="".concat(t.height,"px"),this.um.m(t)),null!==this.am&&this.am.Xv(v({width:i,height:t.height})),null!==this.om&&this.om.Xv(v({width:e,height:t.height}))}},{key:"Sm",value:function(){var t=this.km();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.ym)}},{key:"bt",value:function(){this.Mp.$t().St().La()}},{key:"ep",value:function(){return this.Vv.bitmapSize}},{key:"rp",value:function(t,i,e){var n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,i,e)}},{key:"Gv",value:function(t){var i=this;if(0!==t){if(1!==t){this.Vv.applySuggestedBitmapSize();var e=b(this.Vv);null!==e&&(e.useBitmapCoordinateSpace((function(t){i.Qv(t),i.Ae(t),i.Cm(e,$n)})),this.ip(e),this.Cm(e,Fn)),null!==this.am&&this.am.Gv(t),null!==this.om&&this.om.Gv(t)}this.Bv.applySuggestedBitmapSize();var n=b(this.Bv);null!==n&&(n.useBitmapCoordinateSpace((function(t){var i=t.context,e=t.bitmapSize;i.clearRect(0,0,e.width,e.height)})),this.Tm([].concat((0,o.Z)(this.Mp.$t().wt()),[this.Mp.$t().Wc()]),n),this.Cm(n,Hn))}}},{key:"Cm",value:function(t,i){var e,n=this.Mp.$t().wt(),s=(0,r.Z)(n);try{for(s.s();!(e=s.n()).done;){Mn(i,(function(i){return _n(i,t,!1,void 0)}),e.value,void 0)}}catch(u){s.e(u)}finally{s.f()}var h,a=(0,r.Z)(n);try{for(a.s();!(h=a.n()).done;){Mn(i,(function(i){return Sn(i,t,!1,void 0)}),h.value,void 0)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Qv",value:function(t){var i=t.context,e=t.bitmapSize;vt(i,0,0,e.width,e.height,this.Mp.$t()._d())}},{key:"Ae",value:function(t){var i=t.context,e=t.bitmapSize,n=t.verticalPixelRatio;if(this.Mp.W().timeScale.borderVisible){i.fillStyle=this.Pm();var s=Math.max(1,Math.floor(this.km().C*n));i.fillRect(0,0,e.width,s)}}},{key:"ip",value:function(t){var i=this,e=this.Mp.$t().St(),n=e.La();if(n&&0!==n.length){var s=this.N_.maxTickMarkWeight(n),h=this.km(),a=e.W();a.borderVisible&&a.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var e=t.context,s=t.horizontalPixelRatio,r=t.verticalPixelRatio;e.strokeStyle=i.Pm(),e.fillStyle=i.Pm();var a=Math.max(1,Math.floor(s)),u=Math.floor(.5*s);e.beginPath();for(var l=Math.round(h.T*r),o=n.length;o--;){var c=Math.round(n[o].coord*s);e.rect(c-u,0,a,l)}e.fill()})),t.useMediaCoordinateSpace((function(t){var e=t.context,a=h.C+h.T+h.L+h.P/2;e.textAlign="center",e.textBaseline="middle",e.fillStyle=i.$(),e.font=i.qv();var u,l=(0,r.Z)(n);try{for(l.s();!(u=l.n()).done;){var o=u.value;if(o.weight<s){var c=o.needAlignCoordinate?i.Rm(e,o.coord,o.label):o.coord;e.fillText(o.label,c,a)}}}catch(m){l.e(m)}finally{l.f()}i.Mp.W().timeScale.allowBoldLabels&&(e.font=i.Dm());var f,v=(0,r.Z)(n);try{for(v.s();!(f=v.n()).done;){var d=f.value;if(d.weight>=s){var y=d.needAlignCoordinate?i.Rm(e,d.coord,d.label):d.coord;e.fillText(d.label,y,a)}}}catch(m){v.e(m)}finally{v.f()}}))}}},{key:"Rm",value:function(t,i,e){var n=this.xv.Mi(t,e),s=n/2,h=Math.floor(i-s)+.5;return h<0?i+=Math.abs(0-h):h+n>this.gv.width&&(i-=Math.abs(this.gv.width-(h+n))),i}},{key:"Tm",value:function(t,i){var e,n=this.km(),s=(0,r.Z)(t);try{for(s.s();!(e=s.n()).done;){var h,a=e.value,u=(0,r.Z)(a.Ji());try{for(u.s();!(h=u.n()).done;){h.value.gt().K(i,n)}}catch(l){u.e(l)}finally{u.f()}}}catch(l){s.e(l)}finally{s.f()}}},{key:"Pm",value:function(){return this.Mp.W().timeScale.borderColor}},{key:"$",value:function(){return this._n.textColor}},{key:"j",value:function(){return this._n.fontSize}},{key:"qv",value:function(){return et(this.j(),this._n.fontFamily)}},{key:"Dm",value:function(){return et(this.j(),this._n.fontFamily,"bold")}},{key:"km",value:function(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new pi,ym:0});var t=this.k,i=this.qv();if(t.R!==i){var e=this.j();t.P=e,t.R=i,t.L=3*e/12,t.V=3*e/12,t.Wi=9*e/12,t.N=0,t.ym=4*e/12,t.Fi.Qe()}return this.k}},{key:"hp",value:function(t){this.Av.style.cursor=1===t?"ew-resize":"default"}},{key:"bm",value:function(){var t=this.Mp.$t(),i=t.W();i.leftPriceScale.visible||null===this.am||(this.fm.removeChild(this.am.Hv()),this.am.S(),this.am=null),i.rightPriceScale.visible||null===this.om||(this.vm.removeChild(this.om.Hv()),this.om.S(),this.om=null);var e={ed:this.Mp.$t().ed()},n=function(){return i.leftPriceScale.borderVisible&&t.St().W().borderVisible},s=function(){return t._d()};i.leftPriceScale.visible&&null===this.am&&(this.am=new Dn("left",i,e,n,s),this.fm.appendChild(this.am.Hv())),i.rightPriceScale.visible&&null===this.om&&(this.om=new Dn("right",i,e,n,s),this.vm.appendChild(this.om.Hv()))}}]),t}(),Yn=!!vn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((function(t){return t.brand.includes("Chromium")}))&&!!vn&&((null===(jn=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===jn?void 0:jn.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0),Qn=function(){function t(i,e,n){var s;(0,c.Z)(this,t),this.Om=[],this.Am=0,this.Qa=0,this.e_=0,this.Vm=0,this.Bm=0,this.Im=null,this.zm=!1,this.cp=new U,this.dp=new U,this.xc=new U,this.Lm=null,this.Em=null,this.Nm=i,this._n=e,this.N_=n,this.dm=document.createElement("div"),this.dm.classList.add("tv-lightweight-charts"),this.dm.style.overflow="hidden",this.dm.style.direction="ltr",this.dm.style.width="100%",this.dm.style.height="100%",(s=this.dm).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Fm=document.createElement("table"),this.Fm.setAttribute("cellspacing","0"),this.dm.appendChild(this.Fm),this.Wm=this.jm.bind(this),Xn(this._n)&&this.Hm(!0),this.Hi=new Xe(this.kc.bind(this),this._n,n),this.$t().jc().l(this.$m.bind(this),this),this.Um=new Un(this,this.N_),this.Fm.appendChild(this.Um.Hv());var h=e.autoSize&&this.qm(),r=this._n.width,a=this._n.height;if(h||0===r||0===a){var u=i.getBoundingClientRect();r=r||u.width,a=a||u.height}this.Ym(r,a),this.Xm(),i.appendChild(this.dm),this.Km(),this.Hi.St().Gu().l(this.Hi.$l.bind(this.Hi),this),this.Hi.f_().l(this.Hi.$l.bind(this.Hi),this)}return(0,f.Z)(t,[{key:"$t",value:function(){return this.Hi}},{key:"W",value:function(){return this._n}},{key:"Zm",value:function(){return this.Om}},{key:"Gm",value:function(){return this.Um}},{key:"S",value:function(){this.Hm(!1),0!==this.Am&&window.cancelAnimationFrame(this.Am),this.Hi.jc().p(this),this.Hi.St().Gu().p(this),this.Hi.f_().p(this),this.Hi.S();var t,i=(0,r.Z)(this.Om);try{for(i.s();!(t=i.n()).done;){var e=t.value;this.Fm.removeChild(e.Hv()),e.Wp().p(this),e.jp().p(this),e.S()}}catch(n){i.e(n)}finally{i.f()}this.Om=[],L(this.Um).S(),null!==this.dm.parentElement&&this.dm.parentElement.removeChild(this.dm),this.xc.S(),this.cp.S(),this.dp.S(),this.Jm()}},{key:"Ym",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.Qa!==i||this.e_!==t){var n=function(t){var i=Math.floor(t.width),e=Math.floor(t.height);return v({width:i-i%2,height:e-e%2})}(v({width:t,height:i}));this.Qa=n.height,this.e_=n.width;var s=this.Qa+"px",h=this.e_+"px";L(this.dm).style.height=s,L(this.dm).style.width=h,this.Fm.style.height=s,this.Fm.style.width=h,e?this.Qm(Ct.ns(),performance.now()):this.Hi.$l()}}},{key:"Gv",value:function(t){void 0===t&&(t=Ct.ns());for(var i=0;i<this.Om.length;i++)this.Om[i].Gv(t.Wn(i).En);this._n.timeScale.visible&&this.Um.Gv(t.Fn())}},{key:"Eh",value:function(t){var i=Xn(this._n);this.Hi.Eh(t);var e=Xn(this._n);e!==i&&this.Hm(e),this.Km(),this.tb(t)}},{key:"Wp",value:function(){return this.cp}},{key:"jp",value:function(){return this.dp}},{key:"jc",value:function(){return this.xc}},{key:"ib",value:function(){null!==this.Im&&(this.Qm(this.Im,performance.now()),this.Im=null);var t=this.nb(null),i=document.createElement("canvas");i.width=t.width,i.height=t.height;var e=L(i.getContext("2d"));return this.nb(e),i}},{key:"sb",value:function(t){return("left"!==t||this.eb())&&("right"!==t||this.rb())?0===this.Om.length?0:L("left"===t?this.Om[0].Gp():this.Om[0].Jp()).Kv():0}},{key:"hb",value:function(){return this._n.autoSize&&null!==this.Lm}},{key:"lb",value:function(){return this.dm}},{key:"Bp",value:function(t){this.Em=t,this.Em?this.lb().style.setProperty("cursor",t):this.lb().style.removeProperty("cursor")}},{key:"ab",value:function(){return this.Em}},{key:"ob",value:function(){return B(this.Om[0]).Up()}},{key:"tb",value:function(t){(void 0!==t.autoSize||!this.Lm||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Lm&&this.qm(),!1===t.autoSize&&null!==this.Lm&&this.Jm(),t.autoSize||void 0===t.width&&void 0===t.height||this.Ym(t.width||this.e_,t.height||this.Qa))}},{key:"nb",value:function(t){var i=this,e=0,n=0,s=this.Om[0],h=function(e,n){for(var s=0,h=0;h<i.Om.length;h++){var r=i.Om[h],a=L("left"===e?r.Gp():r.Jp()),u=a.ep();null!==t&&a.rp(t,n,s),s+=u.height}};this.eb()&&(h("left",0),e+=L(s.Gp()).ep().width);for(var r=0;r<this.Om.length;r++){var a=this.Om[r],u=a.ep();null!==t&&a.rp(t,e,n),n+=u.height}e+=s.ep().width,this.rb()&&(h("right",e),e+=L(s.Jp()).ep().width);var l=function(e,n,s){L("left"===e?i.Um.wm():i.Um.gm()).rp(L(t),n,s)};if(this._n.timeScale.visible){var o=this.Um.ep();if(null!==t){var c=0;this.eb()&&(l("left",c,n),c=L(s.Gp()).ep().width),this.Um.rp(t,c,n),c+=o.width,this.rb()&&l("right",c,n)}n+=o.height}return v({width:e,height:n})}},{key:"_b",value:function(){var t,i=0,e=0,n=0,s=(0,r.Z)(this.Om);try{for(s.s();!(t=s.n()).done;){var h=t.value;this.eb()&&(e=Math.max(e,L(h.Gp()).Uv(),this._n.leftPriceScale.minimumWidth)),this.rb()&&(n=Math.max(n,L(h.Jp()).Uv(),this._n.rightPriceScale.minimumWidth)),i+=h.v_()}}catch(_){s.e(_)}finally{s.f()}e=mn(e),n=mn(n);for(var a,u=this.e_,l=this.Qa,o=Math.max(u-e-n,0),c=this._n.timeScale.visible,f=c?Math.max(this.Um.Sm(),this._n.timeScale.minimumHeight):0,d=0+(f=(a=f)+a%2),y=l<d?0:l-d,m=y/i,p=0,k=0;k<this.Om.length;++k){var b=this.Om[k];b.Pp(this.Hi.Nc()[k]);var g,w;w=k===this.Om.length-1?y-p:Math.round(b.v_()*m),p+=g=Math.max(w,2),b.Xv(v({width:o,height:g})),this.eb()&&b.$p(e,"left"),this.rb()&&b.$p(n,"right"),b.Zv()&&this.Hi.Hc(b.Zv(),g)}this.Um.xm(v({width:c?o:0,height:f}),c?e:0,c?n:0),this.Hi.m_(o),this.Vm!==e&&(this.Vm=e),this.Bm!==n&&(this.Bm=n)}},{key:"Hm",value:function(t){t?this.dm.addEventListener("wheel",this.Wm,{passive:!1}):this.dm.removeEventListener("wheel",this.Wm)}},{key:"ub",value:function(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Yn?1/window.devicePixelRatio:1}},{key:"jm",value:function(t){if(0!==t.deltaX&&this._n.handleScroll.mouseWheel||0!==t.deltaY&&this._n.handleScale.mouseWheel){var i=this.ub(t),e=i*t.deltaX/100,n=-i*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==n&&this._n.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.dm.getBoundingClientRect().left;this.$t().qc(h,s)}0!==e&&this._n.handleScroll.mouseWheel&&this.$t().Yc(-80*e)}}},{key:"Qm",value:function(t,i){var e,n=t.Fn();3===n&&this.cb(),3!==n&&2!==n||(this.fb(t),this.vb(t,i),this.Um.bt(),this.Om.forEach((function(t){t.Dp()})),3===(null===(e=this.Im)||void 0===e?void 0:e.Fn())&&(this.Im.Jn(t),this.cb(),this.fb(this.Im),this.vb(this.Im,i),t=this.Im,this.Im=null)),this.Gv(t)}},{key:"vb",value:function(t,i){var e,n=(0,r.Z)(t.Gn());try{for(n.s();!(e=n.n()).done;){var s=e.value;this.Qn(s,i)}}catch(h){n.e(h)}finally{n.f()}}},{key:"fb",value:function(t){for(var i=this.Hi.Nc(),e=0;e<i.length;e++)t.Wn(e).Nn&&i[e].V_()}},{key:"Qn",value:function(t,i){var e=this.Hi.St();switch(t.$n){case 0:e.Qu();break;case 1:e.tc(t.Ot);break;case 2:e.Kn(t.Ot);break;case 3:e.Zn(t.Ot);break;case 4:e.Fu();break;case 5:t.Ot.Yu(i)||e.Zn(t.Ot.Xu(i))}}},{key:"kc",value:function(t){var i=this;null!==this.Im?this.Im.Jn(t):this.Im=t,this.zm||(this.zm=!0,this.Am=window.requestAnimationFrame((function(t){if(i.zm=!1,i.Am=0,null!==i.Im){var e=i.Im;i.Im=null,i.Qm(e,t);var n,s=(0,r.Z)(e.Gn());try{for(s.s();!(n=s.n()).done;){var h=n.value;if(5===h.$n&&!h.Ot.Yu(t)){i.$t().qn(h.Ot);break}}}catch(a){s.e(a)}finally{s.f()}}})))}},{key:"cb",value:function(){this.Xm()}},{key:"Xm",value:function(){for(var t=this.Hi.Nc(),i=t.length,e=this.Om.length,n=i;n<e;n++){var s=B(this.Om.pop());this.Fm.removeChild(s.Hv()),s.Wp().p(this),s.jp().p(this),s.S()}for(var h=e;h<i;h++){var r=new Vn(this,t[h]);r.Wp().l(this.pb.bind(this),this),r.jp().l(this.mb.bind(this),this),this.Om.push(r),this.Fm.insertBefore(r.Hv(),this.Um.Hv())}for(var a=0;a<i;a++){var u=t[a],l=this.Om[a];l.Zv()!==u?l.Pp(u):l.Tp()}this.Km(),this._b()}},{key:"bb",value:function(t,i,e){var n,s,h=new Map;if(null!==t&&this.Hi.wt().forEach((function(i){var e=i.Vn().il(t);null!==e&&h.set(i,e)})),null!==t){var r=null===(n=this.Hi.St().$i(t))||void 0===n?void 0:n.originalTime;void 0!==r&&(s=r)}var a=this.$t().Bc(),u=null!==a&&a.zc instanceof oe?a.zc:void 0,l=null!==a&&void 0!==a.mv?a.mv.mr:void 0;return{wb:s,ie:null!=t?t:void 0,gb:null!=i?i:void 0,Mb:u,xb:h,Sb:l,kb:null!=e?e:void 0}}},{key:"pb",value:function(t,i,e){var n=this;this.cp.m((function(){return n.bb(t,i,e)}))}},{key:"mb",value:function(t,i,e){var n=this;this.dp.m((function(){return n.bb(t,i,e)}))}},{key:"$m",value:function(t,i,e){var n=this;this.xc.m((function(){return n.bb(t,i,e)}))}},{key:"Km",value:function(){var t=this._n.timeScale.visible?"":"none";this.Um.Hv().style.display=t}},{key:"eb",value:function(){return this.Om[0].Zv().S_().W().visible}},{key:"rb",value:function(){return this.Om[0].Zv().k_().W().visible}},{key:"qm",value:function(){var t=this;return"ResizeObserver"in window&&(this.Lm=new ResizeObserver((function(i){var e=i.find((function(i){return i.target===t.Nm}));e&&t.Ym(e.contentRect.width,e.contentRect.height)})),this.Lm.observe(this.Nm,{box:"border-box"}),!0)}},{key:"Jm",value:function(){null!==this.Lm&&this.Lm.disconnect(),this.Lm=null}}]),t}();function Xn(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function qn(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e}function Gn(t,i,e,n){var s=e.value,h={ie:i,ot:t,Ot:[s,s,s,s],wb:n};return void 0!==e.color&&(h.O=e.color),h}function Jn(t,i,e,n){var s=e.value,h={ie:i,ot:t,Ot:[s,s,s,s],wb:n};return void 0!==e.lineColor&&(h.lt=e.lineColor),void 0!==e.topColor&&(h.ys=e.topColor),void 0!==e.bottomColor&&(h.Cs=e.bottomColor),h}function Kn(t,i,e,n){var s=e.value,h={ie:i,ot:t,Ot:[s,s,s,s],wb:n};return void 0!==e.topLineColor&&(h.Ce=e.topLineColor),void 0!==e.bottomLineColor&&(h.Te=e.bottomLineColor),void 0!==e.topFillColor1&&(h.Me=e.topFillColor1),void 0!==e.topFillColor2&&(h.xe=e.topFillColor2),void 0!==e.bottomFillColor1&&(h.Se=e.bottomFillColor1),void 0!==e.bottomFillColor2&&(h.ke=e.bottomFillColor2),h}function ts(t,i,e,n){var s={ie:i,ot:t,Ot:[e.open,e.high,e.low,e.close],wb:n};return void 0!==e.color&&(s.O=e.color),s}function is(t,i,e,n){var s={ie:i,ot:t,Ot:[e.open,e.high,e.low,e.close],wb:n};return void 0!==e.color&&(s.O=e.color),void 0!==e.borderColor&&(s.At=e.borderColor),void 0!==e.wickColor&&(s.Hh=e.wickColor),s}function es(t,i,e,n,s){var h=B(s)(e),r=Math.max.apply(Math,(0,o.Z)(h)),a=Math.min.apply(Math,(0,o.Z)(h)),u=h[h.length-1],l=[u,r,a,u],c=e,f=(c.time,c.color);return{ie:i,ot:t,Ot:l,wb:n,We:qn(c,["time","color"]),O:f}}function ns(t){return void 0!==t.Ot}function ss(t,i){return void 0!==i.customValues&&(t.yb=i.customValues),t}function hs(t){return function(i,e,n,s,h,r){return function(t,i){return i?i(t):void 0===(e=t).open&&void 0===e.value;var e}(n,r)?ss({ot:i,ie:e,wb:s},n):ss(t(i,e,n,s,h),n)}}function rs(t){return{Candlestick:hs(is),Bar:hs(ts),Area:hs(Jn),Baseline:hs(Kn),Histogram:hs(Gn),Line:hs(Gn),Custom:hs(es)}[t]}function as(t){return{ie:0,Cb:new Map,ia:t}}function us(t,i){if(void 0!==t&&0!==t.length)return{Tb:i.key(t[0].ot),Pb:i.key(t[t.length-1].ot)}}function ls(t){var i;return t.forEach((function(t){void 0===i&&(i=t.wb)})),B(i)}var os=function(){function t(i){(0,c.Z)(this,t),this.Rb=new Map,this.Db=new Map,this.Ob=new Map,this.Ab=[],this.N_=i}return(0,f.Z)(t,[{key:"S",value:function(){this.Rb.clear(),this.Db.clear(),this.Ob.clear(),this.Ab=[]}},{key:"Vb",value:function(t,i){var e=this,n=0!==this.Rb.size,s=!1,h=this.Db.get(t);if(void 0!==h)if(1===this.Db.size)n=!1,s=!0,this.Rb.clear();else{var a,u=(0,r.Z)(this.Ab);try{for(u.s();!(a=u.n()).done;){a.value.pointData.Cb.delete(t)&&(s=!0)}}catch(p){u.e(p)}finally{u.f()}}var l=[];if(0!==i.length){var o=i.map((function(t){return t.time})),c=this.N_.createConverterToInternalObj(i),f=rs(t.Yh()),v=t.ga(),d=t.Ma();l=i.map((function(i,n){var h=c(i.time),r=e.N_.key(h),a=e.Rb.get(r);void 0===a&&(a=as(h),e.Rb.set(r,a),s=!0);var u=f(h,a.ie,i,o[n],v,d);return a.Cb.set(t,u),u}))}n&&this.Bb(),this.Ib(t,l);var y=-1;if(s){var m=[];this.Rb.forEach((function(t){m.push({timeWeight:0,time:t.ia,pointData:t,originalTime:ls(t.Cb)})})),m.sort((function(t,i){return e.N_.key(t.time)-e.N_.key(i.time)})),y=this.zb(m)}return this.Lb(t,y,function(t,i,e){var n=us(t,e),s=us(i,e);if(void 0!==n&&void 0!==s)return{Xl:n.Pb>=s.Pb&&n.Tb>=s.Tb}}(this.Db.get(t),h,this.N_))}},{key:"ld",value:function(t){return this.Vb(t,[])}},{key:"Eb",value:function(t,i){var e=this,n=i;!function(t){void 0===t.wb&&(t.wb=t.time)}(n),this.N_.preprocessData(i);var s=this.N_.createConverterToInternalObj([i])(i.time),h=this.Ob.get(t);if(void 0!==h&&this.N_.key(s)<this.N_.key(h))throw new Error("Cannot update oldest data, last time=".concat(h,", new time=").concat(s));var r=this.Rb.get(this.N_.key(s)),a=void 0===r;void 0===r&&(r=as(s),this.Rb.set(this.N_.key(s),r));var u=rs(t.Yh()),l=t.ga(),o=t.Ma(),c=u(s,r.ie,i,n.wb,l,o);r.Cb.set(t,c),this.Nb(t,c);var f={Xl:ns(c)};if(!a)return this.Lb(t,-1,f);var v={timeWeight:0,time:r.ia,pointData:r,originalTime:ls(r.Cb)},d=Qt(this.Ab,this.N_.key(v.time),(function(t,i){return e.N_.key(t.time)<i}));this.Ab.splice(d,0,v);for(var y=d;y<this.Ab.length;++y)cs(this.Ab[y].pointData,y);return this.N_.fillWeightsForPoints(this.Ab,d),this.Lb(t,d,f)}},{key:"Nb",value:function(t,i){var e=this.Db.get(t);void 0===e&&(e=[],this.Db.set(t,e));var n=0!==e.length?e[e.length-1]:null;null===n||this.N_.key(i.ot)>this.N_.key(n.ot)?ns(i)&&e.push(i):ns(i)?e[e.length-1]=i:e.splice(-1,1),this.Ob.set(t,i.ot)}},{key:"Ib",value:function(t,i){0!==i.length?(this.Db.set(t,i.filter(ns)),this.Ob.set(t,i[i.length-1].ot)):(this.Db.delete(t),this.Ob.delete(t))}},{key:"Bb",value:function(){var t,i=(0,r.Z)(this.Ab);try{for(i.s();!(t=i.n()).done;){var e=t.value;0===e.pointData.Cb.size&&this.Rb.delete(this.N_.key(e.time))}}catch(n){i.e(n)}finally{i.f()}}},{key:"zb",value:function(t){for(var i=-1,e=0;e<this.Ab.length&&e<t.length;++e){var n=this.Ab[e],s=t[e];if(this.N_.key(n.time)!==this.N_.key(s.time)){i=e;break}s.timeWeight=n.timeWeight,cs(s.pointData,e)}if(-1===i&&this.Ab.length!==t.length&&(i=Math.min(this.Ab.length,t.length)),-1===i)return-1;for(var h=i;h<t.length;++h)cs(t[h].pointData,h);return this.N_.fillWeightsForPoints(t,i),this.Ab=t,i}},{key:"Fb",value:function(){if(0===this.Db.size)return null;var t=0;return this.Db.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].ie))})),t}},{key:"Lb",value:function(t,i,e){var n={Wb:new Map,St:{Au:this.Fb()}};if(-1!==i)this.Db.forEach((function(i,s){n.Wb.set(s,{We:i,jb:s===t?e:void 0})})),this.Db.has(t)||n.Wb.set(t,{We:[],jb:e}),n.St.Hb=this.Ab,n.St.$b=i;else{var s=this.Db.get(t);n.Wb.set(t,{We:s||[],jb:e})}return n}}]),t}();function cs(t,i){t.ie=i,t.Cb.forEach((function(t){t.ie=i}))}function fs(t){var i={value:t.Ot[3],time:t.wb};return void 0!==t.yb&&(i.customValues=t.yb),i}function vs(t){var i=fs(t);return void 0!==t.O&&(i.color=t.O),i}function ds(t){var i=fs(t);return void 0!==t.lt&&(i.lineColor=t.lt),void 0!==t.ys&&(i.topColor=t.ys),void 0!==t.Cs&&(i.bottomColor=t.Cs),i}function ys(t){var i=fs(t);return void 0!==t.Ce&&(i.topLineColor=t.Ce),void 0!==t.Te&&(i.bottomLineColor=t.Te),void 0!==t.Me&&(i.topFillColor1=t.Me),void 0!==t.xe&&(i.topFillColor2=t.xe),void 0!==t.Se&&(i.bottomFillColor1=t.Se),void 0!==t.ke&&(i.bottomFillColor2=t.ke),i}function ms(t){var i={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.wb};return void 0!==t.yb&&(i.customValues=t.yb),i}function ps(t){var i=ms(t);return void 0!==t.O&&(i.color=t.O),i}function ks(t){var i=ms(t),e=t.O,n=t.At,s=t.Hh;return void 0!==e&&(i.color=e),void 0!==n&&(i.borderColor=n),void 0!==s&&(i.wickColor=s),i}function bs(t){return{Area:ds,Line:vs,Baseline:ys,Histogram:vs,Bar:ps,Candlestick:ks,Custom:gs}[t]}function gs(t){var i=t.wb;return Object.assign(Object.assign({},t.We),{time:i})}var ws={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},_s={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Ss={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:it},Ms={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},zs={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},xs={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:it,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function Zs(){return{width:0,height:0,autoSize:!1,layout:Ss,crosshair:ws,grid:_s,overlayPriceScales:Object.assign({},Ms),leftPriceScale:Object.assign(Object.assign({},Ms),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ms),{visible:!0}),timeScale:zs,watermark:xs,localization:{locale:vn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var Cs=function(){function t(i,e){(0,c.Z)(this,t),this.Ub=i,this.qb=e}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.Ub.$t().Lc(this.qb,t)}},{key:"options",value:function(){return this.zi().W()}},{key:"width",value:function(){return Zt(this.qb)?this.Ub.sb(this.qb):0}},{key:"zi",value:function(){return L(this.Ub.$t().Ec(this.qb)).Dt}}]),t}();function Os(t,i,e){var n=qn(t,["time","originalTime"]),s=Object.assign({time:i},n);return void 0!==e&&(s.originalTime=e),s}var Es={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Ts=function(){function t(i){(0,c.Z)(this,t),this.Vh=i}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.Vh.Eh(t)}},{key:"options",value:function(){return this.Vh.W()}},{key:"Yb",value:function(){return this.Vh}}]),t}(),Ns=function(){function t(i,e,n,s,h){(0,c.Z)(this,t),this.Xb=new U,this.Is=i,this.Kb=e,this.Zb=n,this.N_=h,this.Gb=s}return(0,f.Z)(t,[{key:"S",value:function(){this.Xb.S()}},{key:"priceFormatter",value:function(){return this.Is.ca()}},{key:"priceToCoordinate",value:function(t){var i=this.Is.Ct();return null===i?null:this.Is.Dt().Rt(t,i.Ot)}},{key:"coordinateToPrice",value:function(t){var i=this.Is.Ct();return null===i?null:this.Is.Dt().fn(t,i.Ot)}},{key:"barsInLogicalRange",value:function(t){if(null===t)return null;var i=new Ie(new Be(t.from,t.to)).iu(),e=this.Is.Vn();if(e.Ei())return null;var n=e.il(i.Rs(),1),s=e.il(i.ui(),-1),h=L(e.Jh()),r=L(e.An());if(null!==n&&null!==s&&n.ie>s.ie)return{barsBefore:t.from-h,barsAfter:r-t.to};var a={barsBefore:null===n||n.ie===h?t.from-h:n.ie-h,barsAfter:null===s||s.ie===r?r-t.to:r-s.ie};return null!==n&&null!==s&&(a.from=n.wb,a.to=s.wb),a}},{key:"setData",value:function(t){this.N_,this.Is.Yh(),this.Kb.Jb(this.Is,t),this.Qb("full")}},{key:"update",value:function(t){this.Is.Yh(),this.Kb.tw(this.Is,t),this.Qb("update")}},{key:"dataByIndex",value:function(t,i){var e=this.Is.Vn().il(t,i);return null===e?null:bs(this.seriesType())(e)}},{key:"data",value:function(){var t=bs(this.seriesType());return this.Is.Vn().Qs().map((function(i){return t(i)}))}},{key:"subscribeDataChanged",value:function(t){this.Xb.l(t)}},{key:"unsubscribeDataChanged",value:function(t){this.Xb.v(t)}},{key:"setMarkers",value:function(t){var i=this;this.N_;var e=t.map((function(t){return Os(t,i.N_.convertHorzItemToInternal(t.time),t.time)}));this.Is.Zl(e)}},{key:"markers",value:function(){return this.Is.Gl().map((function(t){return Os(t,t.originalTime,void 0)}))}},{key:"applyOptions",value:function(t){this.Is.Eh(t)}},{key:"options",value:function(){return J(this.Is.W())}},{key:"priceScale",value:function(){return this.Zb.priceScale(this.Is.Dt().xa())}},{key:"createPriceLine",value:function(t){var i=Y(J(Es),t),e=this.Is.Jl(i);return new Ts(e)}},{key:"removePriceLine",value:function(t){this.Is.Ql(t.Yb())}},{key:"seriesType",value:function(){return this.Is.Yh()}},{key:"attachPrimitive",value:function(t){var i=this;this.Is.ba(t),t.attached&&t.attached({chart:this.Gb,series:this,requestUpdate:function(){return i.Is.$t().$l()}})}},{key:"detachPrimitive",value:function(t){this.Is.wa(t),t.detached&&t.detached()}},{key:"Qb",value:function(t){this.Xb.M()&&this.Xb.m(t)}}]),t}(),Rs=function(){function t(i,e,n){(0,c.Z)(this,t),this.iw=new U,this.uu=new U,this.um=new U,this.Hi=i,this.wl=i.St(),this.Um=e,this.wl.Ku().l(this.nw.bind(this)),this.wl.Zu().l(this.sw.bind(this)),this.Um.Mm().l(this.ew.bind(this)),this.N_=n}return(0,f.Z)(t,[{key:"S",value:function(){this.wl.Ku().p(this),this.wl.Zu().p(this),this.Um.Mm().p(this),this.iw.S(),this.uu.S(),this.um.S()}},{key:"scrollPosition",value:function(){return this.wl.Lu()}},{key:"scrollToPosition",value:function(t,i){i?this.wl.qu(t,1e3):this.Hi.Zn(t)}},{key:"scrollToRealTime",value:function(){this.wl.Uu()}},{key:"getVisibleRange",value:function(){var t=this.wl.yu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}},{key:"setVisibleRange",value:function(t){var i={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},e=this.wl.Ru(i);this.Hi.ad(e)}},{key:"getVisibleLogicalRange",value:function(){var t=this.wl.ku();return null===t?null:{from:t.Rs(),to:t.ui()}}},{key:"setVisibleLogicalRange",value:function(t){R(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.ad(t)}},{key:"resetTimeScale",value:function(){this.Hi.Xn()}},{key:"fitContent",value:function(){this.Hi.Qu()}},{key:"logicalToCoordinate",value:function(t){var i=this.Hi.St();return i.Ei()?null:i.It(t)}},{key:"coordinateToLogical",value:function(t){return this.wl.Ei()?null:this.wl.Vu(t)}},{key:"timeToCoordinate",value:function(t){var i=this.N_.convertHorzItemToInternal(t),e=this.wl.ya(i,!1);return null===e?null:this.wl.It(e)}},{key:"coordinateToTime",value:function(t){var i=this.Hi.St(),e=i.Vu(t),n=i.$i(e);return null===n?null:n.originalTime}},{key:"width",value:function(){return this.Um.Up().width}},{key:"height",value:function(){return this.Um.Up().height}},{key:"subscribeVisibleTimeRangeChange",value:function(t){this.iw.l(t)}},{key:"unsubscribeVisibleTimeRangeChange",value:function(t){this.iw.v(t)}},{key:"subscribeVisibleLogicalRangeChange",value:function(t){this.uu.l(t)}},{key:"unsubscribeVisibleLogicalRangeChange",value:function(t){this.uu.v(t)}},{key:"subscribeSizeChange",value:function(t){this.um.l(t)}},{key:"unsubscribeSizeChange",value:function(t){this.um.v(t)}},{key:"applyOptions",value:function(t){this.wl.Eh(t)}},{key:"options",value:function(){return Object.assign(Object.assign({},J(this.wl.W())),{barSpacing:this.wl.ee()})}},{key:"nw",value:function(){this.iw.M()&&this.iw.m(this.getVisibleRange())}},{key:"sw",value:function(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}},{key:"ew",value:function(t){this.um.m(t.width,t.height)}}]),t}();function Bs(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var e=Math.round(t);if(Math.abs(e-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Ls(t){return function(t){if(G(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale){var e=t.handleScale,n=e.axisPressedMouseMove,s=e.axisDoubleClickReset;G(n)&&(t.handleScale.axisPressedMouseMove={time:n,price:n}),G(s)&&(t.handleScale.axisDoubleClickReset={time:s,price:s})}var h=t.handleScroll;G(h)&&(t.handleScroll={horzTouchDrag:h,vertTouchDrag:h,mouseWheel:h,pressedMouseMove:h})}(t),t}var Ps=function(){function t(i,e,n){var s=this;(0,c.Z)(this,t),this.rw=new Map,this.hw=new Map,this.lw=new U,this.aw=new U,this.ow=new U,this._w=new os(e);var h=void 0===n?J(Zs()):Y(J(Zs()),Ls(n));this.N_=e,this.Ub=new Qn(i,h,e),this.Ub.Wp().l((function(t){s.lw.M()&&s.lw.m(s.uw(t()))}),this),this.Ub.jp().l((function(t){s.aw.M()&&s.aw.m(s.uw(t()))}),this),this.Ub.jc().l((function(t){s.ow.M()&&s.ow.m(s.uw(t()))}),this);var r=this.Ub.$t();this.cw=new Rs(r,this.Ub.Gm(),this.N_)}return(0,f.Z)(t,[{key:"remove",value:function(){this.Ub.Wp().p(this),this.Ub.jp().p(this),this.Ub.jc().p(this),this.cw.S(),this.Ub.S(),this.rw.clear(),this.hw.clear(),this.lw.S(),this.aw.S(),this.ow.S(),this._w.S()}},{key:"resize",value:function(t,i,e){this.autoSizeActive()||this.Ub.Ym(t,i,e)}},{key:"addCustomSeries",value:function(t,i){var e=P(t),n=Object.assign(Object.assign({},O),e.defaultOptions());return this.dw("Custom",n,i,e)}},{key:"addAreaSeries",value:function(t){return this.dw("Area",x,t)}},{key:"addBaselineSeries",value:function(t){return this.dw("Baseline",Z,t)}},{key:"addBarSeries",value:function(t){return this.dw("Bar",M,t)}},{key:"addCandlestickSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(t),this.dw("Candlestick",S,t)}},{key:"addHistogramSeries",value:function(t){return this.dw("Histogram",C,t)}},{key:"addLineSeries",value:function(t){return this.dw("Line",z,t)}},{key:"removeSeries",value:function(t){var i=B(this.rw.get(t)),e=this._w.ld(i);this.Ub.$t().ld(i),this.fw(e),this.rw.delete(t),this.hw.delete(i)}},{key:"Jb",value:function(t,i){this.fw(this._w.Vb(t,i))}},{key:"tw",value:function(t,i){this.fw(this._w.Eb(t,i))}},{key:"subscribeClick",value:function(t){this.lw.l(t)}},{key:"unsubscribeClick",value:function(t){this.lw.v(t)}},{key:"subscribeCrosshairMove",value:function(t){this.ow.l(t)}},{key:"unsubscribeCrosshairMove",value:function(t){this.ow.v(t)}},{key:"subscribeDblClick",value:function(t){this.aw.l(t)}},{key:"unsubscribeDblClick",value:function(t){this.aw.v(t)}},{key:"priceScale",value:function(t){return new Cs(this.Ub,t)}},{key:"timeScale",value:function(){return this.cw}},{key:"applyOptions",value:function(t){this.Ub.Eh(Ls(t))}},{key:"options",value:function(){return this.Ub.W()}},{key:"takeScreenshot",value:function(){return this.Ub.ib()}},{key:"autoSizeActive",value:function(){return this.Ub.hb()}},{key:"chartElement",value:function(){return this.Ub.lb()}},{key:"paneSize",value:function(){var t=this.Ub.ob();return{height:t.height,width:t.width}}},{key:"setCrosshairPosition",value:function(t,i,e){var n=this.rw.get(e);if(void 0!==n){var s=this.Ub.$t()._r(n);null!==s&&this.Ub.$t().td(t,i,s)}}},{key:"clearCrosshairPosition",value:function(){this.Ub.$t().nd(!0)}},{key:"dw",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;Bs(e.priceFormat);var s=Y(J(E),J(i),e),h=this.Ub.$t().rd(t,s,n),r=new Ns(h,this,this,this,this.N_);return this.rw.set(r,h),this.hw.set(h,r),r}},{key:"fw",value:function(t){var i=this.Ub.$t();i.sd(t.St.Au,t.St.Hb,t.St.$b),t.Wb.forEach((function(t,i){return i.J(t.We,t.jb)})),i.Iu()}},{key:"pw",value:function(t){return B(this.hw.get(t))}},{key:"uw",value:function(t){var i=this,e=new Map;t.xb.forEach((function(t,n){var s=n.Yh(),h=bs(s)(t);if("Custom"!==s)R(function(t){return void 0!==t.open||void 0!==t.value}(h));else{var r=n.Ma();R(!r||!1===r(h))}e.set(i.pw(n),h)}));var n=void 0===t.Mb?void 0:this.pw(t.Mb);return{time:t.wb,logical:t.ie,point:t.gb,hoveredSeries:n,hoveredObjectId:t.Sb,seriesData:e,sourceEvent:t.kb}}}]),t}();function Is(t,i){return function(t,i,e){var n;if(q(t)){var s=document.getElementById(t);R(null!==s,"Cannot find element in DOM with id=".concat(t)),n=s}else n=t;var h=new Ps(n,i,e);return i.setOptions(h.options()),h}(t,new fn,fn.Pd(i))}Object.assign(Object.assign({},E),O)}}]);
//# sourceMappingURL=650.be76d58b.chunk.js.map